function ZR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function eC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VE={exports:{}},$h={},jE={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=Symbol.for("react.element"),tC=Symbol.for("react.portal"),nC=Symbol.for("react.fragment"),rC=Symbol.for("react.strict_mode"),sC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),rw=Symbol.iterator;function dC(t){return t===null||typeof t!="object"?null:(t=rw&&t[rw]||t["@@iterator"],typeof t=="function"?t:null)}var ME={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OE=Object.assign,LE={};function Ea(t,e,n){this.props=t,this.context=e,this.refs=LE,this.updater=n||ME}Ea.prototype.isReactComponent={};Ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FE(){}FE.prototype=Ea.prototype;function dy(t,e,n){this.props=t,this.context=e,this.refs=LE,this.updater=n||ME}var hy=dy.prototype=new FE;hy.constructor=dy;OE(hy,Ea.prototype);hy.isPureReactComponent=!0;var sw=Array.isArray,UE=Object.prototype.hasOwnProperty,fy={current:null},BE={key:!0,ref:!0,__self:!0,__source:!0};function $E(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)UE.call(e,r)&&!BE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Nc,type:t,key:i,ref:o,props:s,_owner:fy.current}}function hC(t,e){return{$$typeof:Nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function py(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nc}function fC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iw=/\/+/g;function mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fC(""+t.key):e.toString(36)}function ad(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nc:case tC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mp(o,0):r,sw(s)?(n="",t!=null&&(n=t.replace(iw,"$&/")+"/"),ad(s,e,n,"",function(c){return c})):s!=null&&(py(s)&&(s=hC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sw(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+mp(i,a);o+=ad(i,e,n,l,s)}else if(l=dC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+mp(i,a++),o+=ad(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cu(t,e,n){if(t==null)return t;var r=[],s=0;return ad(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},ld={transition:null},mC={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ld,ReactCurrentOwner:fy};function zE(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Cu,forEach:function(t,e,n){Cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cu(t,function(){e++}),e},toArray:function(t){return Cu(t,function(e){return e})||[]},only:function(t){if(!py(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Ea;de.Fragment=nC;de.Profiler=sC;de.PureComponent=dy;de.StrictMode=rC;de.Suspense=lC;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;de.act=zE;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=OE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=fy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)UE.call(e,l)&&!BE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nc,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:oC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iC,_context:t},t.Consumer=t};de.createElement=$E;de.createFactory=function(t){var e=$E.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:aC,render:t}};de.isValidElement=py;de.lazy=function(t){return{$$typeof:uC,_payload:{_status:-1,_result:t},_init:pC}};de.memo=function(t,e){return{$$typeof:cC,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=ld.transition;ld.transition={};try{t()}finally{ld.transition=e}};de.unstable_act=zE;de.useCallback=function(t,e){return Gt.current.useCallback(t,e)};de.useContext=function(t){return Gt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Gt.current.useEffect(t,e)};de.useId=function(){return Gt.current.useId()};de.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Gt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};de.useRef=function(t){return Gt.current.useRef(t)};de.useState=function(t){return Gt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Gt.current.useTransition()};de.version="18.3.1";jE.exports=de;var C=jE.exports;const Dc=eC(C),gC=ZR({__proto__:null,default:Dc},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=C,vC=Symbol.for("react.element"),_C=Symbol.for("react.fragment"),wC=Object.prototype.hasOwnProperty,xC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TC={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wC.call(e,r)&&!TC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vC,type:t,key:i,ref:o,props:s,_owner:xC.current}}$h.Fragment=_C;$h.jsx=qE;$h.jsxs=qE;VE.exports=$h;var f=VE.exports,ym={},WE={exports:{}},yn={},GE={exports:{}},HE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Z){var se=H.length;H.push(Z);e:for(;0<se;){var te=se-1>>>1,pe=H[te];if(0<s(pe,Z))H[te]=Z,H[se]=pe,se=te;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],se=H.pop();if(se!==Z){H[0]=se;e:for(var te=0,pe=H.length,be=pe>>>1;te<be;){var Kt=2*(te+1)-1,Qt=H[Kt],vt=Kt+1,$=H[vt];if(0>s(Qt,se))vt<pe&&0>s($,Qt)?(H[te]=$,H[vt]=se,te=vt):(H[te]=Qt,H[Kt]=se,te=Kt);else if(vt<pe&&0>s($,se))H[te]=$,H[vt]=se,te=vt;else break e}}return Z}function s(H,Z){var se=H.sortIndex-Z.sortIndex;return se!==0?se:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=H)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function k(H){if(E=!1,_(H),!x)if(n(l)!==null)x=!0,Ce(D);else{var Z=n(c);Z!==null&&tt(k,Z.startTime-H)}}function D(H,Z){x=!1,E&&(E=!1,w(I),I=-1),y=!0;var se=p;try{for(_(Z),h=n(l);h!==null&&(!(h.expirationTime>Z)||H&&!N());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var pe=te(h.expirationTime<=Z);Z=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),_(Z)}else r(l);h=n(l)}if(h!==null)var be=!0;else{var Kt=n(c);Kt!==null&&tt(k,Kt.startTime-Z),be=!1}return be}finally{h=null,p=se,y=!1}}var O=!1,A=null,I=-1,b=5,P=-1;function N(){return!(t.unstable_now()-P<b)}function V(){if(A!==null){var H=t.unstable_now();P=H;var Z=!0;try{Z=A(!0,H)}finally{Z?R():(O=!1,A=null)}}else O=!1}var R;if(typeof v=="function")R=function(){v(V)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,St=_e.port2;_e.port1.onmessage=V,R=function(){St.postMessage(null)}}else R=function(){T(V,0)};function Ce(H){A=H,O||(O=!0,R())}function tt(H,Z){I=T(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Ce(D))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var se=p;p=Z;try{return H()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=p;p=H;try{return Z()}finally{p=se}},t.unstable_scheduleCallback=function(H,Z,se){var te=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=se+pe,H={id:d++,callback:Z,priorityLevel:H,startTime:se,expirationTime:pe,sortIndex:-1},se>te?(H.sortIndex=se,e(c,H),n(l)===null&&H===n(c)&&(E?(w(I),I=-1):E=!0,tt(k,se-te))):(H.sortIndex=pe,e(l,H),x||y||(x=!0,Ce(D))),H},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(H){var Z=p;return function(){var se=p;p=Z;try{return H.apply(this,arguments)}finally{p=se}}}})(HE);GE.exports=HE;var EC=GE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=C,pn=EC;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KE=new Set,Kl={};function qi(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(Kl[t]=e,t=0;t<e.length;t++)KE.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vm=Object.prototype.hasOwnProperty,SC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function AC(t){return vm.call(aw,t)?!0:vm.call(ow,t)?!1:SC.test(t)?aw[t]=!0:(ow[t]=!0,!1)}function bC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kC(t,e,n,r){if(e===null||typeof e>"u"||bC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var my=/[\-:]([a-z])/g;function gy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(my,gy);It[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(my,gy);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(my,gy);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function yy(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kC(e,n,s,r)&&(n=null),r||s===null?AC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),vo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),QE=Symbol.for("react.provider"),XE=Symbol.for("react.context"),_y=Symbol.for("react.forward_ref"),wm=Symbol.for("react.suspense"),xm=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),JE=Symbol.for("react.offscreen"),lw=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=lw&&t[lw]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,gp;function pl(t){if(gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gp=e&&e[1]||""}return`
`+gp+t}var yp=!1;function vp(t,e){if(!t||yp)return"";yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pl(t):""}function PC(t){switch(t.tag){case 5:return pl(t.type);case 16:return pl("Lazy");case 13:return pl("Suspense");case 19:return pl("SuspenseList");case 0:case 2:case 15:return t=vp(t.type,!1),t;case 11:return t=vp(t.type.render,!1),t;case 1:return t=vp(t.type,!0),t;default:return""}}function Tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case vo:return"Portal";case _m:return"Profiler";case vy:return"StrictMode";case wm:return"Suspense";case xm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XE:return(t.displayName||"Context")+".Consumer";case QE:return(t._context.displayName||"Context")+".Provider";case _y:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wy:return e=t.displayName||null,e!==null?e:Tm(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Tm(t(e))}catch{}}return null}function RC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(e);case 8:return e===vy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function YE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CC(t){var e=YE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Du(t){t._valueTracker||(t._valueTracker=CC(t))}function ZE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=YE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Em(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eI(t,e){e=e.checked,e!=null&&yy(t,"checked",e,!1)}function Im(t,e){eI(t,e);var n=Ss(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sm(t,e.type,Ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sm(t,e,n){(e!=="number"||Od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ml=Array.isArray;function jo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ss(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Am(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ml(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ss(n)}}function tI(t,e){var n=Ss(e.value),r=Ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,rI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ql(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NC=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(t){NC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),El[e]=El[t]})});function sI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||El.hasOwnProperty(t)&&El[t]?(""+e).trim():e+"px"}function iI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DC=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function km(t,e){if(e){if(DC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=null;function xy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,Mo=null,Oo=null;function fw(t){if(t=Mc(t)){if(typeof Cm!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Hh(e),Cm(t.stateNode,t.type,e))}}function oI(t){Mo?Oo?Oo.push(t):Oo=[t]:Mo=t}function aI(){if(Mo){var t=Mo,e=Oo;if(Oo=Mo=null,fw(t),e)for(t=0;t<e.length;t++)fw(e[t])}}function lI(t,e){return t(e)}function cI(){}var _p=!1;function uI(t,e,n){if(_p)return t(e,n);_p=!0;try{return lI(t,e,n)}finally{_p=!1,(Mo!==null||Oo!==null)&&(cI(),aI())}}function Xl(t,e){var n=t.stateNode;if(n===null)return null;var r=Hh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Nm=!1;if(wr)try{var el={};Object.defineProperty(el,"passive",{get:function(){Nm=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{Nm=!1}function VC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Il=!1,Ld=null,Fd=!1,Dm=null,jC={onError:function(t){Il=!0,Ld=t}};function MC(t,e,n,r,s,i,o,a,l){Il=!1,Ld=null,VC.apply(jC,arguments)}function OC(t,e,n,r,s,i,o,a,l){if(MC.apply(this,arguments),Il){if(Il){var c=Ld;Il=!1,Ld=null}else throw Error(z(198));Fd||(Fd=!0,Dm=c)}}function Wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pw(t){if(Wi(t)!==t)throw Error(z(188))}function LC(t){var e=t.alternate;if(!e){if(e=Wi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pw(s),t;if(i===r)return pw(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function hI(t){return t=LC(t),t!==null?fI(t):null}function fI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fI(t);if(e!==null)return e;t=t.sibling}return null}var pI=pn.unstable_scheduleCallback,mw=pn.unstable_cancelCallback,FC=pn.unstable_shouldYield,UC=pn.unstable_requestPaint,Je=pn.unstable_now,BC=pn.unstable_getCurrentPriorityLevel,Ty=pn.unstable_ImmediatePriority,mI=pn.unstable_UserBlockingPriority,Ud=pn.unstable_NormalPriority,$C=pn.unstable_LowPriority,gI=pn.unstable_IdlePriority,zh=null,Qn=null;function zC(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:GC,qC=Math.log,WC=Math.LN2;function GC(t){return t>>>=0,t===0?32:31-(qC(t)/WC|0)|0}var ju=64,Mu=4194304;function gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gl(a):(i&=o,i!==0&&(r=gl(i)))}else o=n&~s,o!==0?r=gl(o):i!==0&&(r=gl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function HC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=HC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yI(){var t=ju;return ju<<=1,!(ju&4194240)&&(ju=64),t}function wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function QC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function vI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _I,Iy,wI,xI,TI,jm=!1,Ou=[],cs=null,us=null,ds=null,Jl=new Map,Yl=new Map,Qr=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gw(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(e.pointerId)}}function tl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Mc(e),e!==null&&Iy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JC(t,e,n,r,s){switch(e){case"focusin":return cs=tl(cs,t,e,n,r,s),!0;case"dragenter":return us=tl(us,t,e,n,r,s),!0;case"mouseover":return ds=tl(ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Jl.set(i,tl(Jl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yl.set(i,tl(Yl.get(i)||null,t,e,n,r,s)),!0}return!1}function EI(t){var e=fi(t.target);if(e!==null){var n=Wi(e);if(n!==null){if(e=n.tag,e===13){if(e=dI(n),e!==null){t.blockedOn=e,TI(t.priority,function(){wI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rm=r,n.target.dispatchEvent(r),Rm=null}else return e=Mc(n),e!==null&&Iy(e),t.blockedOn=n,!1;e.shift()}return!0}function yw(t,e,n){cd(t)&&n.delete(e)}function YC(){jm=!1,cs!==null&&cd(cs)&&(cs=null),us!==null&&cd(us)&&(us=null),ds!==null&&cd(ds)&&(ds=null),Jl.forEach(yw),Yl.forEach(yw)}function nl(t,e){t.blockedOn===e&&(t.blockedOn=null,jm||(jm=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,YC)))}function Zl(t){function e(s){return nl(s,t)}if(0<Ou.length){nl(Ou[0],t);for(var n=1;n<Ou.length;n++){var r=Ou[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cs!==null&&nl(cs,t),us!==null&&nl(us,t),ds!==null&&nl(ds,t),Jl.forEach(e),Yl.forEach(e),n=0;n<Qr.length;n++)r=Qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)EI(n),n.blockedOn===null&&Qr.shift()}var Lo=Rr.ReactCurrentBatchConfig,$d=!0;function ZC(t,e,n,r){var s=xe,i=Lo.transition;Lo.transition=null;try{xe=1,Sy(t,e,n,r)}finally{xe=s,Lo.transition=i}}function eN(t,e,n,r){var s=xe,i=Lo.transition;Lo.transition=null;try{xe=4,Sy(t,e,n,r)}finally{xe=s,Lo.transition=i}}function Sy(t,e,n,r){if($d){var s=Mm(t,e,n,r);if(s===null)Rp(t,e,r,zd,n),gw(t,r);else if(JC(s,t,e,n,r))r.stopPropagation();else if(gw(t,r),e&4&&-1<XC.indexOf(t)){for(;s!==null;){var i=Mc(s);if(i!==null&&_I(i),i=Mm(t,e,n,r),i===null&&Rp(t,e,r,zd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Rp(t,e,r,null,n)}}var zd=null;function Mm(t,e,n,r){if(zd=null,t=xy(r),t=fi(t),t!==null)if(e=Wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zd=t,null}function II(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BC()){case Ty:return 1;case mI:return 4;case Ud:case $C:return 16;case gI:return 536870912;default:return 16}default:return 16}}var rs=null,Ay=null,ud=null;function SI(){if(ud)return ud;var t,e=Ay,n=e.length,r,s="value"in rs?rs.value:rs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ud=s.slice(t,1<r?1-r:void 0)}function dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lu(){return!0}function vw(){return!1}function vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Lu:vw,this.isPropagationStopped=vw,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=vn(Ia),jc=We({},Ia,{view:0,detail:0}),tN=vn(jc),xp,Tp,rl,qh=We({},jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ky,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rl&&(rl&&t.type==="mousemove"?(xp=t.screenX-rl.screenX,Tp=t.screenY-rl.screenY):Tp=xp=0,rl=t),xp)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),_w=vn(qh),nN=We({},qh,{dataTransfer:0}),rN=vn(nN),sN=We({},jc,{relatedTarget:0}),Ep=vn(sN),iN=We({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),oN=vn(iN),aN=We({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lN=vn(aN),cN=We({},Ia,{data:0}),ww=vn(cN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hN[t])?!!e[t]:!1}function ky(){return fN}var pN=We({},jc,{key:function(t){if(t.key){var e=uN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ky,charCode:function(t){return t.type==="keypress"?dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mN=vn(pN),gN=We({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xw=vn(gN),yN=We({},jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ky}),vN=vn(yN),_N=We({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=vn(_N),xN=We({},qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TN=vn(xN),EN=[9,13,27,32],Py=wr&&"CompositionEvent"in window,Sl=null;wr&&"documentMode"in document&&(Sl=document.documentMode);var IN=wr&&"TextEvent"in window&&!Sl,AI=wr&&(!Py||Sl&&8<Sl&&11>=Sl),Tw=String.fromCharCode(32),Ew=!1;function bI(t,e){switch(t){case"keyup":return EN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function SN(t,e){switch(t){case"compositionend":return kI(e);case"keypress":return e.which!==32?null:(Ew=!0,Tw);case"textInput":return t=e.data,t===Tw&&Ew?null:t;default:return null}}function AN(t,e){if(wo)return t==="compositionend"||!Py&&bI(t,e)?(t=SI(),ud=Ay=rs=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AI&&e.locale!=="ko"?null:e.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bN[t.type]:e==="textarea"}function PI(t,e,n,r){oI(r),e=qd(e,"onChange"),0<e.length&&(n=new by("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Al=null,ec=null;function kN(t){UI(t,0)}function Wh(t){var e=Eo(t);if(ZE(e))return t}function PN(t,e){if(t==="change")return e}var RI=!1;if(wr){var Ip;if(wr){var Sp="oninput"in document;if(!Sp){var Sw=document.createElement("div");Sw.setAttribute("oninput","return;"),Sp=typeof Sw.oninput=="function"}Ip=Sp}else Ip=!1;RI=Ip&&(!document.documentMode||9<document.documentMode)}function Aw(){Al&&(Al.detachEvent("onpropertychange",CI),ec=Al=null)}function CI(t){if(t.propertyName==="value"&&Wh(ec)){var e=[];PI(e,ec,t,xy(t)),uI(kN,e)}}function RN(t,e,n){t==="focusin"?(Aw(),Al=e,ec=n,Al.attachEvent("onpropertychange",CI)):t==="focusout"&&Aw()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wh(ec)}function NN(t,e){if(t==="click")return Wh(e)}function DN(t,e){if(t==="input"||t==="change")return Wh(e)}function VN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:VN;function tc(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vm.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function bw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kw(t,e){var n=bw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bw(n)}}function NI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DI(){for(var t=window,e=Od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Od(t.document)}return e}function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jN(t){var e=DI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NI(n.ownerDocument.documentElement,n)){if(r!==null&&Ry(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kw(n,i);var o=kw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MN=wr&&"documentMode"in document&&11>=document.documentMode,xo=null,Om=null,bl=null,Lm=!1;function Pw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lm||xo==null||xo!==Od(r)||(r=xo,"selectionStart"in r&&Ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bl&&tc(bl,r)||(bl=r,r=qd(Om,"onSelect"),0<r.length&&(e=new by("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xo)))}function Fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:Fu("Animation","AnimationEnd"),animationiteration:Fu("Animation","AnimationIteration"),animationstart:Fu("Animation","AnimationStart"),transitionend:Fu("Transition","TransitionEnd")},Ap={},VI={};wr&&(VI=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Gh(t){if(Ap[t])return Ap[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VI)return Ap[t]=e[n];return t}var jI=Gh("animationend"),MI=Gh("animationiteration"),OI=Gh("animationstart"),LI=Gh("transitionend"),FI=new Map,Rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){FI.set(t,e),qi(e,[t])}for(var bp=0;bp<Rw.length;bp++){var kp=Rw[bp],ON=kp.toLowerCase(),LN=kp[0].toUpperCase()+kp.slice(1);Os(ON,"on"+LN)}Os(jI,"onAnimationEnd");Os(MI,"onAnimationIteration");Os(OI,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(LI,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function Cw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OC(r,e,void 0,t),t.currentTarget=null}function UI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Cw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Cw(s,a,c),i=l}}}if(Fd)throw t=Dm,Fd=!1,Dm=null,t}function De(t,e){var n=e[zm];n===void 0&&(n=e[zm]=new Set);var r=t+"__bubble";n.has(r)||(BI(e,t,2,!1),n.add(r))}function Pp(t,e,n){var r=0;e&&(r|=4),BI(n,t,r,e)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function nc(t){if(!t[Uu]){t[Uu]=!0,KE.forEach(function(n){n!=="selectionchange"&&(FN.has(n)||Pp(n,!1,t),Pp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uu]||(e[Uu]=!0,Pp("selectionchange",!1,e))}}function BI(t,e,n,r){switch(II(e)){case 1:var s=ZC;break;case 4:s=eN;break;default:s=Sy}n=s.bind(null,e,n,t),s=void 0,!Nm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=fi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}uI(function(){var c=i,d=xy(n),h=[];e:{var p=FI.get(t);if(p!==void 0){var y=by,x=t;switch(t){case"keypress":if(dd(n)===0)break e;case"keydown":case"keyup":y=mN;break;case"focusin":x="focus",y=Ep;break;case"focusout":x="blur",y=Ep;break;case"beforeblur":case"afterblur":y=Ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=rN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=vN;break;case jI:case MI:case OI:y=oN;break;case LI:y=wN;break;case"scroll":y=tN;break;case"wheel":y=TN;break;case"copy":case"cut":case"paste":y=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xw}var E=(e&4)!==0,T=!E&&t==="scroll",w=E?p!==null?p+"Capture":null:p;E=[];for(var v=c,_;v!==null;){_=v;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,w!==null&&(k=Xl(v,w),k!=null&&E.push(rc(v,k,_)))),T)break;v=v.return}0<E.length&&(p=new y(p,x,null,n,d),h.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Rm&&(x=n.relatedTarget||n.fromElement)&&(fi(x)||x[xr]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?fi(x):null,x!==null&&(T=Wi(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(E=_w,k="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=xw,k="onPointerLeave",w="onPointerEnter",v="pointer"),T=y==null?p:Eo(y),_=x==null?p:Eo(x),p=new E(k,v+"leave",y,n,d),p.target=T,p.relatedTarget=_,k=null,fi(d)===c&&(E=new E(w,v+"enter",x,n,d),E.target=_,E.relatedTarget=T,k=E),T=k,y&&x)t:{for(E=y,w=x,v=0,_=E;_;_=oo(_))v++;for(_=0,k=w;k;k=oo(k))_++;for(;0<v-_;)E=oo(E),v--;for(;0<_-v;)w=oo(w),_--;for(;v--;){if(E===w||w!==null&&E===w.alternate)break t;E=oo(E),w=oo(w)}E=null}else E=null;y!==null&&Nw(h,p,y,E,!1),x!==null&&T!==null&&Nw(h,T,x,E,!0)}}e:{if(p=c?Eo(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var D=PN;else if(Iw(p))if(RI)D=DN;else{D=CN;var O=RN}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=NN);if(D&&(D=D(t,c))){PI(h,D,n,d);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Sm(p,"number",p.value)}switch(O=c?Eo(c):window,t){case"focusin":(Iw(O)||O.contentEditable==="true")&&(xo=O,Om=c,bl=null);break;case"focusout":bl=Om=xo=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,Pw(h,n,d);break;case"selectionchange":if(MN)break;case"keydown":case"keyup":Pw(h,n,d)}var A;if(Py)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else wo?bI(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(AI&&n.locale!=="ko"&&(wo||I!=="onCompositionStart"?I==="onCompositionEnd"&&wo&&(A=SI()):(rs=d,Ay="value"in rs?rs.value:rs.textContent,wo=!0)),O=qd(c,I),0<O.length&&(I=new ww(I,t,null,n,d),h.push({event:I,listeners:O}),A?I.data=A:(A=kI(n),A!==null&&(I.data=A)))),(A=IN?SN(t,n):AN(t,n))&&(c=qd(c,"onBeforeInput"),0<c.length&&(d=new ww("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}UI(h,e)})}function rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xl(t,n),i!=null&&r.unshift(rc(t,i,s)),i=Xl(t,e),i!=null&&r.push(rc(t,i,s))),t=t.return}return r}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Xl(n,i),l!=null&&o.unshift(rc(n,l,a))):s||(l=Xl(n,i),l!=null&&o.push(rc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UN=/\r\n?/g,BN=/\u0000|\uFFFD/g;function Dw(t){return(typeof t=="string"?t:""+t).replace(UN,`
`).replace(BN,"")}function Bu(t,e,n){if(e=Dw(e),Dw(t)!==e&&n)throw Error(z(425))}function Wd(){}var Fm=null,Um=null;function Bm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $m=typeof setTimeout=="function"?setTimeout:void 0,$N=typeof clearTimeout=="function"?clearTimeout:void 0,Vw=typeof Promise=="function"?Promise:void 0,zN=typeof queueMicrotask=="function"?queueMicrotask:typeof Vw<"u"?function(t){return Vw.resolve(null).then(t).catch(qN)}:$m;function qN(t){setTimeout(function(){throw t})}function Cp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zl(e)}function hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Sa,sc="__reactProps$"+Sa,xr="__reactContainer$"+Sa,zm="__reactEvents$"+Sa,WN="__reactListeners$"+Sa,GN="__reactHandles$"+Sa;function fi(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jw(t);t!==null;){if(n=t[Wn])return n;t=jw(t)}return e}t=n,n=t.parentNode}return null}function Mc(t){return t=t[Wn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Hh(t){return t[sc]||null}var qm=[],Io=-1;function Ls(t){return{current:t}}function je(t){0>Io||(t.current=qm[Io],qm[Io]=null,Io--)}function ke(t,e){Io++,qm[Io]=t.current,t.current=e}var As={},Lt=Ls(As),tn=Ls(!1),Si=As;function Ho(t,e){var n=t.type.contextTypes;if(!n)return As;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function Gd(){je(tn),je(Lt)}function Mw(t,e,n){if(Lt.current!==As)throw Error(z(168));ke(Lt,e),ke(tn,n)}function $I(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,RC(t)||"Unknown",s));return We({},n,r)}function Hd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||As,Si=Lt.current,ke(Lt,t),ke(tn,tn.current),!0}function Ow(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=$I(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,je(tn),je(Lt),ke(Lt,t)):je(tn),ke(tn,n)}var ur=null,Kh=!1,Np=!1;function zI(t){ur===null?ur=[t]:ur.push(t)}function HN(t){Kh=!0,zI(t)}function Fs(){if(!Np&&ur!==null){Np=!0;var t=0,e=xe;try{var n=ur;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ur=null,Kh=!1}catch(s){throw ur!==null&&(ur=ur.slice(t+1)),pI(Ty,Fs),s}finally{xe=e,Np=!1}}return null}var So=[],Ao=0,Kd=null,Qd=0,xn=[],Tn=0,Ai=null,dr=1,hr="";function ti(t,e){So[Ao++]=Qd,So[Ao++]=Kd,Kd=t,Qd=e}function qI(t,e,n){xn[Tn++]=dr,xn[Tn++]=hr,xn[Tn++]=Ai,Ai=t;var r=dr;t=hr;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,dr=1<<32-Mn(e)+s|n<<s|r,hr=i+t}else dr=1<<i|n<<s|r,hr=t}function Cy(t){t.return!==null&&(ti(t,1),qI(t,1,0))}function Ny(t){for(;t===Kd;)Kd=So[--Ao],So[Ao]=null,Qd=So[--Ao],So[Ao]=null;for(;t===Ai;)Ai=xn[--Tn],xn[Tn]=null,hr=xn[--Tn],xn[Tn]=null,dr=xn[--Tn],xn[Tn]=null}var dn=null,un=null,Le=!1,Vn=null;function WI(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:dr,overflow:hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,un=null,!0):!1;default:return!1}}function Wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gm(t){if(Le){var e=un;if(e){var n=e;if(!Lw(t,e)){if(Wm(t))throw Error(z(418));e=hs(n.nextSibling);var r=dn;e&&Lw(t,e)?WI(r,n):(t.flags=t.flags&-4097|2,Le=!1,dn=t)}}else{if(Wm(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,dn=t}}}function Fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function $u(t){if(t!==dn)return!1;if(!Le)return Fw(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bm(t.type,t.memoizedProps)),e&&(e=un)){if(Wm(t))throw GI(),Error(z(418));for(;e;)WI(t,e),e=hs(e.nextSibling)}if(Fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?hs(t.stateNode.nextSibling):null;return!0}function GI(){for(var t=un;t;)t=hs(t.nextSibling)}function Ko(){un=dn=null,Le=!1}function Dy(t){Vn===null?Vn=[t]:Vn.push(t)}var KN=Rr.ReactCurrentBatchConfig;function sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function zu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uw(t){var e=t._init;return e(t._payload)}function HI(t){function e(w,v){if(t){var _=w.deletions;_===null?(w.deletions=[v],w.flags|=16):_.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=gs(w,v),w.index=0,w.sibling=null,w}function i(w,v,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<v?(w.flags|=2,v):_):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,_,k){return v===null||v.tag!==6?(v=Fp(_,w.mode,k),v.return=w,v):(v=s(v,_),v.return=w,v)}function l(w,v,_,k){var D=_.type;return D===_o?d(w,v,_.props.children,k,_.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gr&&Uw(D)===v.type)?(k=s(v,_.props),k.ref=sl(w,v,_),k.return=w,k):(k=vd(_.type,_.key,_.props,null,w.mode,k),k.ref=sl(w,v,_),k.return=w,k)}function c(w,v,_,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Up(_,w.mode,k),v.return=w,v):(v=s(v,_.children||[]),v.return=w,v)}function d(w,v,_,k,D){return v===null||v.tag!==7?(v=wi(_,w.mode,k,D),v.return=w,v):(v=s(v,_),v.return=w,v)}function h(w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fp(""+v,w.mode,_),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nu:return _=vd(v.type,v.key,v.props,null,w.mode,_),_.ref=sl(w,null,v),_.return=w,_;case vo:return v=Up(v,w.mode,_),v.return=w,v;case Gr:var k=v._init;return h(w,k(v._payload),_)}if(ml(v)||Za(v))return v=wi(v,w.mode,_,null),v.return=w,v;zu(w,v)}return null}function p(w,v,_,k){var D=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:a(w,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:return _.key===D?l(w,v,_,k):null;case vo:return _.key===D?c(w,v,_,k):null;case Gr:return D=_._init,p(w,v,D(_._payload),k)}if(ml(_)||Za(_))return D!==null?null:d(w,v,_,k,null);zu(w,_)}return null}function y(w,v,_,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(_)||null,a(v,w,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Nu:return w=w.get(k.key===null?_:k.key)||null,l(v,w,k,D);case vo:return w=w.get(k.key===null?_:k.key)||null,c(v,w,k,D);case Gr:var O=k._init;return y(w,v,_,O(k._payload),D)}if(ml(k)||Za(k))return w=w.get(_)||null,d(v,w,k,D,null);zu(v,k)}return null}function x(w,v,_,k){for(var D=null,O=null,A=v,I=v=0,b=null;A!==null&&I<_.length;I++){A.index>I?(b=A,A=null):b=A.sibling;var P=p(w,A,_[I],k);if(P===null){A===null&&(A=b);break}t&&A&&P.alternate===null&&e(w,A),v=i(P,v,I),O===null?D=P:O.sibling=P,O=P,A=b}if(I===_.length)return n(w,A),Le&&ti(w,I),D;if(A===null){for(;I<_.length;I++)A=h(w,_[I],k),A!==null&&(v=i(A,v,I),O===null?D=A:O.sibling=A,O=A);return Le&&ti(w,I),D}for(A=r(w,A);I<_.length;I++)b=y(A,w,I,_[I],k),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?I:b.key),v=i(b,v,I),O===null?D=b:O.sibling=b,O=b);return t&&A.forEach(function(N){return e(w,N)}),Le&&ti(w,I),D}function E(w,v,_,k){var D=Za(_);if(typeof D!="function")throw Error(z(150));if(_=D.call(_),_==null)throw Error(z(151));for(var O=D=null,A=v,I=v=0,b=null,P=_.next();A!==null&&!P.done;I++,P=_.next()){A.index>I?(b=A,A=null):b=A.sibling;var N=p(w,A,P.value,k);if(N===null){A===null&&(A=b);break}t&&A&&N.alternate===null&&e(w,A),v=i(N,v,I),O===null?D=N:O.sibling=N,O=N,A=b}if(P.done)return n(w,A),Le&&ti(w,I),D;if(A===null){for(;!P.done;I++,P=_.next())P=h(w,P.value,k),P!==null&&(v=i(P,v,I),O===null?D=P:O.sibling=P,O=P);return Le&&ti(w,I),D}for(A=r(w,A);!P.done;I++,P=_.next())P=y(A,w,I,P.value,k),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?I:P.key),v=i(P,v,I),O===null?D=P:O.sibling=P,O=P);return t&&A.forEach(function(V){return e(w,V)}),Le&&ti(w,I),D}function T(w,v,_,k){if(typeof _=="object"&&_!==null&&_.type===_o&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:e:{for(var D=_.key,O=v;O!==null;){if(O.key===D){if(D=_.type,D===_o){if(O.tag===7){n(w,O.sibling),v=s(O,_.props.children),v.return=w,w=v;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gr&&Uw(D)===O.type){n(w,O.sibling),v=s(O,_.props),v.ref=sl(w,O,_),v.return=w,w=v;break e}n(w,O);break}else e(w,O);O=O.sibling}_.type===_o?(v=wi(_.props.children,w.mode,k,_.key),v.return=w,w=v):(k=vd(_.type,_.key,_.props,null,w.mode,k),k.ref=sl(w,v,_),k.return=w,w=k)}return o(w);case vo:e:{for(O=_.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(w,v.sibling),v=s(v,_.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Up(_,w.mode,k),v.return=w,w=v}return o(w);case Gr:return O=_._init,T(w,v,O(_._payload),k)}if(ml(_))return x(w,v,_,k);if(Za(_))return E(w,v,_,k);zu(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,_),v.return=w,w=v):(n(w,v),v=Fp(_,w.mode,k),v.return=w,w=v),o(w)):n(w,v)}return T}var Qo=HI(!0),KI=HI(!1),Xd=Ls(null),Jd=null,bo=null,Vy=null;function jy(){Vy=bo=Jd=null}function My(t){var e=Xd.current;je(Xd),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){Jd=t,Vy=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(Vy!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(Jd===null)throw Error(z(308));bo=t,Jd.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var pi=null;function Oy(t){pi===null?pi=[t]:pi.push(t)}function QI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Oy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function Ly(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Oy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tr(t,n)}function hd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}function Bw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yd(t,e,n,r){var s=t.updateQueue;Hr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,y=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,E=a;switch(p=e,y=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){h=x.call(y,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,p=typeof x=="function"?x.call(y,h,p):x,p==null)break e;h=We({},h,p);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=h}}function $w(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Oc={},Xn=Ls(Oc),ic=Ls(Oc),oc=Ls(Oc);function mi(t){if(t===Oc)throw Error(z(174));return t}function Fy(t,e){switch(ke(oc,e),ke(ic,t),ke(Xn,Oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bm(e,t)}je(Xn),ke(Xn,e)}function Xo(){je(Xn),je(ic),je(oc)}function JI(t){mi(oc.current);var e=mi(Xn.current),n=bm(e,t.type);e!==n&&(ke(ic,t),ke(Xn,n))}function Uy(t){ic.current===t&&(je(Xn),je(ic))}var $e=Ls(0);function Zd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dp=[];function By(){for(var t=0;t<Dp.length;t++)Dp[t]._workInProgressVersionPrimary=null;Dp.length=0}var fd=Rr.ReactCurrentDispatcher,Vp=Rr.ReactCurrentBatchConfig,bi=0,qe=null,ot=null,ht=null,eh=!1,kl=!1,ac=0,QN=0;function Rt(){throw Error(z(321))}function $y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function zy(t,e,n,r,s,i){if(bi=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fd.current=t===null||t.memoizedState===null?ZN:eD,t=n(r,s),kl){i=0;do{if(kl=!1,ac=0,25<=i)throw Error(z(301));i+=1,ht=ot=null,e.updateQueue=null,fd.current=tD,t=n(r,s)}while(kl)}if(fd.current=th,e=ot!==null&&ot.next!==null,bi=0,ht=ot=qe=null,eh=!1,e)throw Error(z(300));return t}function qy(){var t=ac!==0;return ac=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?qe.memoizedState=ht=t:ht=ht.next=t,ht}function bn(){if(ot===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?qe.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(z(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?qe.memoizedState=ht=t:ht=ht.next=t}return ht}function lc(t,e){return typeof e=="function"?e(t):e}function jp(t){var e=bn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((bi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qe.lanes|=d,ki|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Fn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mp(t){var e=bn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Fn(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function YI(){}function ZI(t,e){var n=qe,r=bn(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Jt=!0),r=r.queue,Wy(nS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,cc(9,tS.bind(null,n,r,s,e),void 0,null),pt===null)throw Error(z(349));bi&30||eS(n,e,s)}return s}function eS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tS(t,e,n,r){e.value=n,e.getSnapshot=r,rS(e)&&sS(t)}function nS(t,e,n){return n(function(){rS(e)&&sS(t)})}function rS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function sS(t){var e=Tr(t,1);e!==null&&On(e,t,1,-1)}function zw(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lc,lastRenderedState:t},e.queue=t,t=t.dispatch=YN.bind(null,qe,t),[e.memoizedState,t]}function cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iS(){return bn().memoizedState}function pd(t,e,n,r){var s=$n();qe.flags|=t,s.memoizedState=cc(1|e,n,void 0,r===void 0?null:r)}function Qh(t,e,n,r){var s=bn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&$y(r,o.deps)){s.memoizedState=cc(e,n,i,r);return}}qe.flags|=t,s.memoizedState=cc(1|e,n,i,r)}function qw(t,e){return pd(8390656,8,t,e)}function Wy(t,e){return Qh(2048,8,t,e)}function oS(t,e){return Qh(4,2,t,e)}function aS(t,e){return Qh(4,4,t,e)}function lS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cS(t,e,n){return n=n!=null?n.concat([t]):null,Qh(4,4,lS.bind(null,e,t),n)}function Gy(){}function uS(t,e){var n=bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$y(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dS(t,e){var n=bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$y(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hS(t,e,n){return bi&21?(Fn(n,e)||(n=yI(),qe.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function XN(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Vp.transition;Vp.transition={};try{t(!1),e()}finally{xe=n,Vp.transition=r}}function fS(){return bn().memoizedState}function JN(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pS(t))mS(e,n);else if(n=QI(t,e,n,r),n!==null){var s=qt();On(n,t,r,s),gS(n,e,r)}}function YN(t,e,n){var r=ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pS(t))mS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Fn(a,o)){var l=e.interleaved;l===null?(s.next=s,Oy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=QI(t,e,s,r),n!==null&&(s=qt(),On(n,t,r,s),gS(n,e,r))}}function pS(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function mS(t,e){kl=eh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}var th={readContext:An,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},ZN={readContext:An,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:qw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pd(4194308,4,lS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pd(4194308,4,t,e)},useInsertionEffect:function(t,e){return pd(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JN.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:zw,useDebugValue:Gy,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=zw(!1),e=t[0];return t=XN.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=$n();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),pt===null)throw Error(z(349));bi&30||eS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qw(nS.bind(null,r,i,t),[t]),r.flags|=2048,cc(9,tS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$n(),e=pt.identifierPrefix;if(Le){var n=hr,r=dr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eD={readContext:An,useCallback:uS,useContext:An,useEffect:Wy,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:aS,useMemo:dS,useReducer:jp,useRef:iS,useState:function(){return jp(lc)},useDebugValue:Gy,useDeferredValue:function(t){var e=bn();return hS(e,ot.memoizedState,t)},useTransition:function(){var t=jp(lc)[0],e=bn().memoizedState;return[t,e]},useMutableSource:YI,useSyncExternalStore:ZI,useId:fS,unstable_isNewReconciler:!1},tD={readContext:An,useCallback:uS,useContext:An,useEffect:Wy,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:aS,useMemo:dS,useReducer:Mp,useRef:iS,useState:function(){return Mp(lc)},useDebugValue:Gy,useDeferredValue:function(t){var e=bn();return ot===null?e.memoizedState=t:hS(e,ot.memoizedState,t)},useTransition:function(){var t=Mp(lc)[0],e=bn().memoizedState;return[t,e]},useMutableSource:YI,useSyncExternalStore:ZI,useId:fS,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Km(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xh={isMounted:function(t){return(t=t._reactInternals)?Wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=ms(t),i=yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,s),e!==null&&(On(e,t,s,r),hd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=ms(t),i=yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,s),e!==null&&(On(e,t,s,r),hd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=ms(t),s=yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=fs(t,s,r),e!==null&&(On(e,t,r,n),hd(e,t,r))}};function Ww(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!tc(n,r)||!tc(s,i):!0}function yS(t,e,n){var r=!1,s=As,i=e.contextType;return typeof i=="object"&&i!==null?i=An(i):(s=nn(e)?Si:Lt.current,r=e.contextTypes,i=(r=r!=null)?Ho(t,s):As),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xh.enqueueReplaceState(e,e.state,null)}function Qm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ly(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=An(i):(i=nn(e)?Si:Lt.current,s.context=Ho(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Km(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xh.enqueueReplaceState(s,s.state,null),Yd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Jo(t,e){try{var n="",r=e;do n+=PC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nD=typeof WeakMap=="function"?WeakMap:Map;function vS(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rh||(rh=!0,og=r),Xm(t,e)},n}function _S(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xm(t,e),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gD.bind(null,t,e,n),e.then(t,t))}function Kw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,fs(n,e,1))),n.lanes|=1),t)}var rD=Rr.ReactCurrentOwner,Jt=!1;function zt(t,e,n,r){e.child=t===null?KI(e,null,n,r):Qo(e,t.child,n,r)}function Xw(t,e,n,r,s){n=n.render;var i=e.ref;return Fo(e,s),r=zy(t,e,n,r,i,s),n=qy(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Er(t,e,s)):(Le&&n&&Cy(e),e.flags|=1,zt(t,e,r,s),e.child)}function Jw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!e0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wS(t,e,i,r,s)):(t=vd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:tc,n(o,r)&&t.ref===e.ref)return Er(t,e,s)}return e.flags|=1,t=gs(i,r),t.ref=e.ref,t.return=e,e.child=t}function wS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(tc(i,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,Er(t,e,s)}return Jm(t,e,n,r,s)}function xS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Po,an),an|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Po,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(Po,an),an|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(Po,an),an|=r;return zt(t,e,s,n),e.child}function TS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jm(t,e,n,r,s){var i=nn(n)?Si:Lt.current;return i=Ho(e,i),Fo(e,s),n=zy(t,e,n,r,i,s),r=qy(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Er(t,e,s)):(Le&&r&&Cy(e),e.flags|=1,zt(t,e,n,s),e.child)}function Yw(t,e,n,r,s){if(nn(n)){var i=!0;Hd(e)}else i=!1;if(Fo(e,s),e.stateNode===null)md(t,e),yS(e,n,r),Qm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=An(c):(c=nn(n)?Si:Lt.current,c=Ho(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Gw(e,o,r,c),Hr=!1;var p=e.memoizedState;o.state=p,Yd(e,r,o,s),l=e.memoizedState,a!==r||p!==l||tn.current||Hr?(typeof d=="function"&&(Km(e,n,d,r),l=e.memoizedState),(a=Hr||Ww(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Cn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=An(l):(l=nn(n)?Si:Lt.current,l=Ho(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Gw(e,o,r,l),Hr=!1,p=e.memoizedState,o.state=p,Yd(e,r,o,s);var x=e.memoizedState;a!==h||p!==x||tn.current||Hr?(typeof y=="function"&&(Km(e,n,y,r),x=e.memoizedState),(c=Hr||Ww(e,n,c,r,p,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ym(t,e,n,r,i,s)}function Ym(t,e,n,r,s,i){TS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ow(e,n,!1),Er(t,e,i);r=e.stateNode,rD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qo(e,t.child,null,i),e.child=Qo(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&Ow(e,n,!0),e.child}function ES(t){var e=t.stateNode;e.pendingContext?Mw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mw(t,e.context,!1),Fy(t,e.containerInfo)}function Zw(t,e,n,r,s){return Ko(),Dy(s),e.flags|=256,zt(t,e,n,r),e.child}var Zm={dehydrated:null,treeContext:null,retryLane:0};function eg(t){return{baseLanes:t,cachePool:null,transitions:null}}function IS(t,e,n){var r=e.pendingProps,s=$e.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke($e,s&1),t===null)return Gm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zh(o,r,0,null),t=wi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=eg(n),e.memoizedState=Zm,t):Hy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sD(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gs(a,i):(i=wi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?eg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zm,r}return i=t.child,t=i.sibling,r=gs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hy(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,r){return r!==null&&Dy(r),Qo(e,t.child,null,n),t=Hy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Op(Error(z(422))),qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zh({mode:"visible",children:r.children},s,0,null),i=wi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Qo(e,t.child,null,o),e.child.memoizedState=eg(o),e.memoizedState=Zm,i);if(!(e.mode&1))return qu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Op(i,r,void 0),qu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jt||a){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(t,s),On(r,t,s,-1))}return Zy(),r=Op(Error(z(421))),qu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,un=hs(s.nextSibling),dn=e,Le=!0,Vn=null,t!==null&&(xn[Tn++]=dr,xn[Tn++]=hr,xn[Tn++]=Ai,dr=t.id,hr=t.overflow,Ai=e),e=Hy(e,r.children),e.flags|=4096,e)}function e1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function Lp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function SS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e1(t,n,e);else if(t.tag===19)e1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke($e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lp(e,!0,n,null,i);break;case"together":Lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function md(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iD(t,e,n){switch(e.tag){case 3:ES(e),Ko();break;case 5:JI(e);break;case 1:nn(e.type)&&Hd(e);break;case 4:Fy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(Xd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?IS(t,e,n):(ke($e,$e.current&1),t=Er(t,e,n),t!==null?t.sibling:null);ke($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return SS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,xS(t,e,n)}return Er(t,e,n)}var AS,tg,bS,kS;AS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tg=function(){};bS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,mi(Xn.current);var i=null;switch(n){case"input":s=Em(t,s),r=Em(t,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=Am(t,s),r=Am(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wd)}km(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&De("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};kS=function(t,e,n,r){n!==r&&(e.flags|=4)};function il(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oD(t,e,n){var r=e.pendingProps;switch(Ny(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return nn(e.type)&&Gd(),Ct(e),null;case 3:return r=e.stateNode,Xo(),je(tn),je(Lt),By(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(cg(Vn),Vn=null))),tg(t,e),Ct(e),null;case 5:Uy(e);var s=mi(oc.current);if(n=e.type,t!==null&&e.stateNode!=null)bS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Ct(e),null}if(t=mi(Xn.current),$u(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wn]=e,r[sc]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<yl.length;s++)De(yl[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":cw(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":dw(r,i),De("invalid",r)}km(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),s=["children",""+a]):Kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Du(r),uw(r,i,!0);break;case"textarea":Du(r),hw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[sc]=r,AS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pm(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<yl.length;s++)De(yl[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":cw(t,r),s=Em(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),De("invalid",t);break;case"textarea":dw(t,r),s=Am(t,r),De("invalid",t);break;default:s=r}km(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?iI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rI(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ql(t,l):typeof l=="number"&&Ql(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&De("scroll",t):l!=null&&yy(t,i,l,o))}switch(n){case"input":Du(t),uw(t,r,!1);break;case"textarea":Du(t),hw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ss(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?jo(t,!!r.multiple,i,!1):r.defaultValue!=null&&jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)kS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=mi(oc.current),mi(Xn.current),$u(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Bu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Ct(e),null;case 13:if(je($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&un!==null&&e.mode&1&&!(e.flags&128))GI(),Ko(),e.flags|=98560,i=!1;else if(i=$u(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Wn]=e}else Ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),i=!1}else Vn!==null&&(cg(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?at===0&&(at=3):Zy())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Xo(),tg(t,e),t===null&&nc(e.stateNode.containerInfo),Ct(e),null;case 10:return My(e.type._context),Ct(e),null;case 17:return nn(e.type)&&Gd(),Ct(e),null;case 19:if(je($e),i=e.memoizedState,i===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)il(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zd(t),o!==null){for(e.flags|=128,il(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Yo&&(e.flags|=128,r=!0,il(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),il(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return Ct(e),null}else 2*Je()-i.renderingStartTime>Yo&&n!==1073741824&&(e.flags|=128,r=!0,il(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=$e.current,ke($e,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return Yy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function aD(t,e){switch(Ny(e),e.tag){case 1:return nn(e.type)&&Gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xo(),je(tn),je(Lt),By(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uy(e),null;case 13:if(je($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je($e),null;case 4:return Xo(),null;case 10:return My(e.type._context),null;case 22:case 23:return Yy(),null;case 24:return null;default:return null}}var Wu=!1,jt=!1,lD=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function ng(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var t1=!1;function cD(t,e){if(Fm=$d,t=DI(),Ry(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Um={focusedElem:t,selectionRange:n},$d=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,T=x.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?E:Cn(e.type,E),T);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){Ke(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=t1,t1=!1,x}function Pl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ng(e,n,i)}s=s.next}while(s!==r)}}function Jh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PS(t){var e=t.alternate;e!==null&&(t.alternate=null,PS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[sc],delete e[zm],delete e[WN],delete e[GN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RS(t){return t.tag===5||t.tag===3||t.tag===4}function n1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wd));else if(r!==4&&(t=t.child,t!==null))for(sg(t,e,n),t=t.sibling;t!==null;)sg(t,e,n),t=t.sibling}function ig(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ig(t,e,n),t=t.sibling;t!==null;)ig(t,e,n),t=t.sibling}var wt=null,Nn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)CS(t,e,n),n=n.sibling}function CS(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:jt||ko(n,e);case 6:var r=wt,s=Nn;wt=null,Ur(t,e,n),wt=r,Nn=s,wt!==null&&(Nn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Nn?(t=wt,n=n.stateNode,t.nodeType===8?Cp(t.parentNode,n):t.nodeType===1&&Cp(t,n),Zl(t)):Cp(wt,n.stateNode));break;case 4:r=wt,s=Nn,wt=n.stateNode.containerInfo,Nn=!0,Ur(t,e,n),wt=r,Nn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ng(n,e,o),s=s.next}while(s!==r)}Ur(t,e,n);break;case 1:if(!jt&&(ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Ur(t,e,n),jt=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function r1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lD),e.forEach(function(r){var s=vD.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,Nn=!1;break e;case 3:wt=a.stateNode.containerInfo,Nn=!0;break e;case 4:wt=a.stateNode.containerInfo,Nn=!0;break e}a=a.return}if(wt===null)throw Error(z(160));CS(i,o,s),wt=null,Nn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ke(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NS(e,t),e=e.sibling}function NS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Bn(t),r&4){try{Pl(3,t,t.return),Jh(3,t)}catch(E){Ke(t,t.return,E)}try{Pl(5,t,t.return)}catch(E){Ke(t,t.return,E)}}break;case 1:Rn(e,t),Bn(t),r&512&&n!==null&&ko(n,n.return);break;case 5:if(Rn(e,t),Bn(t),r&512&&n!==null&&ko(n,n.return),t.flags&32){var s=t.stateNode;try{Ql(s,"")}catch(E){Ke(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&eI(s,i),Pm(a,o);var c=Pm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?iI(s,h):d==="dangerouslySetInnerHTML"?rI(s,h):d==="children"?Ql(s,h):yy(s,d,h,c)}switch(a){case"input":Im(s,i);break;case"textarea":tI(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?jo(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?jo(s,!!i.multiple,i.defaultValue,!0):jo(s,!!i.multiple,i.multiple?[]:"",!1))}s[sc]=i}catch(E){Ke(t,t.return,E)}}break;case 6:if(Rn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Ke(t,t.return,E)}}break;case 3:if(Rn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zl(e.containerInfo)}catch(E){Ke(t,t.return,E)}break;case 4:Rn(e,t),Bn(t);break;case 13:Rn(e,t),Bn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xy=Je())),r&4&&r1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||d,Rn(e,t),jt=c):Rn(e,t),Bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(p=Q,y=p.child,p.tag){case 0:case 11:case 14:case 15:Pl(4,p,p.return);break;case 1:ko(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Ke(r,n,E)}}break;case 5:ko(p,p.return);break;case 22:if(p.memoizedState!==null){i1(h);continue}}y!==null?(y.return=p,Q=y):i1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sI("display",o))}catch(E){Ke(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){Ke(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Rn(e,t),Bn(t),r&4&&r1(t);break;case 21:break;default:Rn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ql(s,""),r.flags&=-33);var i=n1(t);ig(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=n1(t);sg(t,a,o);break;default:throw Error(z(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uD(t,e,n){Q=t,DS(t)}function DS(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Wu;var c=jt;if(Wu=o,(jt=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?o1(s):l!==null?(l.return=o,Q=l):o1(s);for(;i!==null;)Q=i,DS(i),i=i.sibling;Q=s,Wu=a,jt=c}s1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):s1(t)}}function s1(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Jh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$w(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$w(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}jt||e.flags&512&&rg(e)}catch(p){Ke(e,e.return,p)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function i1(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function o1(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jh(4,e)}catch(l){Ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ke(e,s,l)}}var i=e.return;try{rg(e)}catch(l){Ke(e,i,l)}break;case 5:var o=e.return;try{rg(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var dD=Math.ceil,nh=Rr.ReactCurrentDispatcher,Ky=Rr.ReactCurrentOwner,Sn=Rr.ReactCurrentBatchConfig,ye=0,pt=null,st=null,Et=0,an=0,Po=Ls(0),at=0,uc=null,ki=0,Yh=0,Qy=0,Rl=null,Xt=null,Xy=0,Yo=1/0,lr=null,rh=!1,og=null,ps=null,Gu=!1,ss=null,sh=0,Cl=0,ag=null,gd=-1,yd=0;function qt(){return ye&6?Je():gd!==-1?gd:gd=Je()}function ms(t){return t.mode&1?ye&2&&Et!==0?Et&-Et:KN.transition!==null?(yd===0&&(yd=yI()),yd):(t=xe,t!==0||(t=window.event,t=t===void 0?16:II(t.type)),t):1}function On(t,e,n,r){if(50<Cl)throw Cl=0,ag=null,Error(z(185));Vc(t,n,r),(!(ye&2)||t!==pt)&&(t===pt&&(!(ye&2)&&(Yh|=n),at===4&&Xr(t,Et)),rn(t,r),n===1&&ye===0&&!(e.mode&1)&&(Yo=Je()+500,Kh&&Fs()))}function rn(t,e){var n=t.callbackNode;KC(t,e);var r=Bd(t,t===pt?Et:0);if(r===0)n!==null&&mw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mw(n),e===1)t.tag===0?HN(a1.bind(null,t)):zI(a1.bind(null,t)),zN(function(){!(ye&6)&&Fs()}),n=null;else{switch(vI(r)){case 1:n=Ty;break;case 4:n=mI;break;case 16:n=Ud;break;case 536870912:n=gI;break;default:n=Ud}n=BS(n,VS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VS(t,e){if(gd=-1,yd=0,ye&6)throw Error(z(327));var n=t.callbackNode;if(Uo()&&t.callbackNode!==n)return null;var r=Bd(t,t===pt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ih(t,r);else{e=r;var s=ye;ye|=2;var i=MS();(pt!==t||Et!==e)&&(lr=null,Yo=Je()+500,_i(t,e));do try{pD();break}catch(a){jS(t,a)}while(1);jy(),nh.current=i,ye=s,st!==null?e=0:(pt=null,Et=0,e=at)}if(e!==0){if(e===2&&(s=Vm(t),s!==0&&(r=s,e=lg(t,s))),e===1)throw n=uc,_i(t,0),Xr(t,r),rn(t,Je()),n;if(e===6)Xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!hD(s)&&(e=ih(t,r),e===2&&(i=Vm(t),i!==0&&(r=i,e=lg(t,i))),e===1))throw n=uc,_i(t,0),Xr(t,r),rn(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ni(t,Xt,lr);break;case 3:if(Xr(t,r),(r&130023424)===r&&(e=Xy+500-Je(),10<e)){if(Bd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=$m(ni.bind(null,t,Xt,lr),e);break}ni(t,Xt,lr);break;case 4:if(Xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dD(r/1960))-r,10<r){t.timeoutHandle=$m(ni.bind(null,t,Xt,lr),r);break}ni(t,Xt,lr);break;case 5:ni(t,Xt,lr);break;default:throw Error(z(329))}}}return rn(t,Je()),t.callbackNode===n?VS.bind(null,t):null}function lg(t,e){var n=Rl;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=ih(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&cg(e)),t}function cg(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function hD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~Qy,e&=~Yh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function a1(t){if(ye&6)throw Error(z(327));Uo();var e=Bd(t,0);if(!(e&1))return rn(t,Je()),null;var n=ih(t,e);if(t.tag!==0&&n===2){var r=Vm(t);r!==0&&(e=r,n=lg(t,r))}if(n===1)throw n=uc,_i(t,0),Xr(t,e),rn(t,Je()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,Xt,lr),rn(t,Je()),null}function Jy(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(Yo=Je()+500,Kh&&Fs())}}function Pi(t){ss!==null&&ss.tag===0&&!(ye&6)&&Uo();var e=ye;ye|=1;var n=Sn.transition,r=xe;try{if(Sn.transition=null,xe=1,t)return t()}finally{xe=r,Sn.transition=n,ye=e,!(ye&6)&&Fs()}}function Yy(){an=Po.current,je(Po)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$N(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Ny(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gd();break;case 3:Xo(),je(tn),je(Lt),By();break;case 5:Uy(r);break;case 4:Xo();break;case 13:je($e);break;case 19:je($e);break;case 10:My(r.type._context);break;case 22:case 23:Yy()}n=n.return}if(pt=t,st=t=gs(t.current,null),Et=an=e,at=0,uc=null,Qy=Yh=ki=0,Xt=Rl=null,pi!==null){for(e=0;e<pi.length;e++)if(n=pi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}pi=null}return t}function jS(t,e){do{var n=st;try{if(jy(),fd.current=th,eh){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}eh=!1}if(bi=0,ht=ot=qe=null,kl=!1,ac=0,Ky.current=null,n===null||n.return===null){at=1,uc=e,st=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Kw(o);if(y!==null){y.flags&=-257,Qw(y,o,a,i,e),y.mode&1&&Hw(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){Hw(i,c,e),Zy();break e}l=Error(z(426))}}else if(Le&&a.mode&1){var T=Kw(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Qw(T,o,a,i,e),Dy(Jo(l,a));break e}}i=l=Jo(l,a),at!==4&&(at=2),Rl===null?Rl=[i]:Rl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=vS(i,l,e);Bw(i,w);break e;case 1:a=l;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ps===null||!ps.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=_S(i,a,e);Bw(i,k);break e}}i=i.return}while(i!==null)}LS(n)}catch(D){e=D,st===n&&n!==null&&(st=n=n.return);continue}break}while(1)}function MS(){var t=nh.current;return nh.current=th,t===null?th:t}function Zy(){(at===0||at===3||at===2)&&(at=4),pt===null||!(ki&268435455)&&!(Yh&268435455)||Xr(pt,Et)}function ih(t,e){var n=ye;ye|=2;var r=MS();(pt!==t||Et!==e)&&(lr=null,_i(t,e));do try{fD();break}catch(s){jS(t,s)}while(1);if(jy(),ye=n,nh.current=r,st!==null)throw Error(z(261));return pt=null,Et=0,at}function fD(){for(;st!==null;)OS(st)}function pD(){for(;st!==null&&!FC();)OS(st)}function OS(t){var e=US(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?LS(t):st=e,Ky.current=null}function LS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aD(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,st=null;return}}else if(n=oD(n,e,an),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);at===0&&(at=5)}function ni(t,e,n){var r=xe,s=Sn.transition;try{Sn.transition=null,xe=1,mD(t,e,n,r)}finally{Sn.transition=s,xe=r}return null}function mD(t,e,n,r){do Uo();while(ss!==null);if(ye&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(QC(t,i),t===pt&&(st=pt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,BS(Ud,function(){return Uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=xe;xe=1;var a=ye;ye|=4,Ky.current=null,cD(t,n),NS(n,t),jN(Um),$d=!!Fm,Um=Fm=null,t.current=n,uD(n),UC(),ye=a,xe=o,Sn.transition=i}else t.current=n;if(Gu&&(Gu=!1,ss=t,sh=s),i=t.pendingLanes,i===0&&(ps=null),zC(n.stateNode),rn(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rh)throw rh=!1,t=og,og=null,t;return sh&1&&t.tag!==0&&Uo(),i=t.pendingLanes,i&1?t===ag?Cl++:(Cl=0,ag=t):Cl=0,Fs(),null}function Uo(){if(ss!==null){var t=vI(sh),e=Sn.transition,n=xe;try{if(Sn.transition=null,xe=16>t?16:t,ss===null)var r=!1;else{if(t=ss,ss=null,sh=0,ye&6)throw Error(z(331));var s=ye;for(ye|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Pl(8,d,i)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var p=d.sibling,y=d.return;if(PS(d),d===c){Q=null;break}if(p!==null){p.return=y,Q=p;break}Q=y}}}var x=i.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pl(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Q=w;break e}Q=i.return}}var v=t.current;for(Q=v;Q!==null;){o=Q;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Q=_;else e:for(o=v;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jh(9,a)}}catch(D){Ke(a,a.return,D)}if(a===o){Q=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Q=k;break e}Q=a.return}}if(ye=s,Fs(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(zh,t)}catch{}r=!0}return r}finally{xe=n,Sn.transition=e}}return!1}function l1(t,e,n){e=Jo(n,e),e=vS(t,e,1),t=fs(t,e,1),e=qt(),t!==null&&(Vc(t,1,e),rn(t,e))}function Ke(t,e,n){if(t.tag===3)l1(t,t,n);else for(;e!==null;){if(e.tag===3){l1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){t=Jo(n,t),t=_S(e,t,1),e=fs(e,t,1),t=qt(),e!==null&&(Vc(e,1,t),rn(e,t));break}}e=e.return}}function gD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(Et&n)===n&&(at===4||at===3&&(Et&130023424)===Et&&500>Je()-Xy?_i(t,0):Qy|=n),rn(t,e)}function FS(t,e){e===0&&(t.mode&1?(e=Mu,Mu<<=1,!(Mu&130023424)&&(Mu=4194304)):e=1);var n=qt();t=Tr(t,e),t!==null&&(Vc(t,e,n),rn(t,n))}function yD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FS(t,n)}function vD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),FS(t,n)}var US;US=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,iD(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Le&&e.flags&1048576&&qI(e,Qd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;md(t,e),t=e.pendingProps;var s=Ho(e,Lt.current);Fo(e,n),s=zy(null,e,r,t,s,n);var i=qy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(i=!0,Hd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ly(e),s.updater=Xh,e.stateNode=s,s._reactInternals=e,Qm(e,r,t,n),e=Ym(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Cy(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(md(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wD(r),t=Cn(r,t),s){case 0:e=Jm(null,e,r,t,n);break e;case 1:e=Yw(null,e,r,t,n);break e;case 11:e=Xw(null,e,r,t,n);break e;case 14:e=Jw(null,e,r,Cn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Jm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Yw(t,e,r,s,n);case 3:e:{if(ES(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,XI(t,e),Yd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Jo(Error(z(423)),e),e=Zw(t,e,r,n,s);break e}else if(r!==s){s=Jo(Error(z(424)),e),e=Zw(t,e,r,n,s);break e}else for(un=hs(e.stateNode.containerInfo.firstChild),dn=e,Le=!0,Vn=null,n=KI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ko(),r===s){e=Er(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return JI(e),t===null&&Gm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Bm(r,s)?o=null:i!==null&&Bm(r,i)&&(e.flags|=32),TS(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&Gm(e),null;case 13:return IS(t,e,n);case 4:return Fy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qo(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Xw(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(Xd,r._currentValue),r._currentValue=o,i!==null)if(Fn(i.value,o)){if(i.children===s.children&&!tn.current){e=Er(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=yr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Hm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fo(e,n),s=An(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=Cn(r,e.pendingProps),s=Cn(r.type,s),Jw(t,e,r,s,n);case 15:return wS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),md(t,e),e.tag=1,nn(r)?(t=!0,Hd(e)):t=!1,Fo(e,n),yS(e,r,s),Qm(e,r,s,n),Ym(null,e,r,!0,t,n);case 19:return SS(t,e,n);case 22:return xS(t,e,n)}throw Error(z(156,e.tag))};function BS(t,e){return pI(t,e)}function _D(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new _D(t,e,n,r)}function e0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wD(t){if(typeof t=="function")return e0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_y)return 11;if(t===wy)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")e0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _o:return wi(n.children,s,i,e);case vy:o=8,s|=8;break;case _m:return t=In(12,n,e,s|2),t.elementType=_m,t.lanes=i,t;case wm:return t=In(13,n,e,s),t.elementType=wm,t.lanes=i,t;case xm:return t=In(19,n,e,s),t.elementType=xm,t.lanes=i,t;case JE:return Zh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QE:o=10;break e;case XE:o=9;break e;case _y:o=11;break e;case wy:o=14;break e;case Gr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=In(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function wi(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function Zh(t,e,n,r){return t=In(22,t,r,e),t.elementType=JE,t.lanes=n,t.stateNode={isHidden:!1},t}function Fp(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function Up(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xD(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function t0(t,e,n,r,s,i,o,a,l){return t=new xD(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=In(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ly(i),t}function TD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $S(t){if(!t)return As;t=t._reactInternals;e:{if(Wi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(nn(n))return $I(t,n,e)}return e}function zS(t,e,n,r,s,i,o,a,l){return t=t0(n,r,!0,t,s,i,o,a,l),t.context=$S(null),n=t.current,r=qt(),s=ms(n),i=yr(r,s),i.callback=e??null,fs(n,i,s),t.current.lanes=s,Vc(t,s,r),rn(t,r),t}function ef(t,e,n,r){var s=e.current,i=qt(),o=ms(s);return n=$S(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fs(s,e,o),t!==null&&(On(t,s,o,i),hd(t,s,o)),o}function oh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function n0(t,e){c1(t,e),(t=t.alternate)&&c1(t,e)}function ED(){return null}var qS=typeof reportError=="function"?reportError:function(t){console.error(t)};function r0(t){this._internalRoot=t}tf.prototype.render=r0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ef(t,e,null,null)};tf.prototype.unmount=r0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ef(null,t,null,null)}),e[xr]=null}};function tf(t){this._internalRoot=t}tf.prototype.unstable_scheduleHydration=function(t){if(t){var e=xI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&EI(t)}};function s0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u1(){}function ID(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=oh(o);i.call(c)}}var o=zS(e,r,t,0,null,!1,!1,"",u1);return t._reactRootContainer=o,t[xr]=o.current,nc(t.nodeType===8?t.parentNode:t),Pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=oh(l);a.call(c)}}var l=t0(t,0,!1,null,null,!1,!1,"",u1);return t._reactRootContainer=l,t[xr]=l.current,nc(t.nodeType===8?t.parentNode:t),Pi(function(){ef(e,l,n,r)}),l}function rf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=oh(o);a.call(l)}}ef(e,o,t,s)}else o=ID(n,e,t,s,r);return oh(o)}_I=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gl(e.pendingLanes);n!==0&&(Ey(e,n|1),rn(e,Je()),!(ye&6)&&(Yo=Je()+500,Fs()))}break;case 13:Pi(function(){var r=Tr(t,1);if(r!==null){var s=qt();On(r,t,1,s)}}),n0(t,1)}};Iy=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=qt();On(e,t,134217728,n)}n0(t,134217728)}};wI=function(t){if(t.tag===13){var e=ms(t),n=Tr(t,e);if(n!==null){var r=qt();On(n,t,e,r)}n0(t,e)}};xI=function(){return xe};TI=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Cm=function(t,e,n){switch(e){case"input":if(Im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hh(r);if(!s)throw Error(z(90));ZE(r),Im(r,s)}}}break;case"textarea":tI(t,n);break;case"select":e=n.value,e!=null&&jo(t,!!n.multiple,e,!1)}};lI=Jy;cI=Pi;var SD={usingClientEntryPoint:!1,Events:[Mc,Eo,Hh,oI,aI,Jy]},ol={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AD={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hI(t),t===null?null:t.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||ED,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{zh=Hu.inject(AD),Qn=Hu}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SD;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s0(e))throw Error(z(200));return TD(t,e,null,n)};yn.createRoot=function(t,e){if(!s0(t))throw Error(z(299));var n=!1,r="",s=qS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=t0(t,1,!1,null,null,n,!1,r,s),t[xr]=e.current,nc(t.nodeType===8?t.parentNode:t),new r0(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=hI(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Pi(t)};yn.hydrate=function(t,e,n){if(!nf(e))throw Error(z(200));return rf(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!s0(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zS(e,null,t,1,n??null,s,!1,i,o),t[xr]=e.current,nc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tf(e)};yn.render=function(t,e,n){if(!nf(e))throw Error(z(200));return rf(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!nf(t))throw Error(z(40));return t._reactRootContainer?(Pi(function(){rf(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};yn.unstable_batchedUpdates=Jy;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nf(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return rf(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function WS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WS)}catch(t){console.error(t)}}WS(),WE.exports=yn;var bD=WE.exports,d1=bD;ym.createRoot=d1.createRoot,ym.hydrateRoot=d1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));const h1="popstate";function kD(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return ug("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ah(s)}return RD(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PD(){return Math.random().toString(36).substr(2,8)}function f1(t,e){return{usr:t.state,key:t.key,idx:e}}function ug(t,e,n,r){return n===void 0&&(n=null),dc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Aa(e):e,{state:n,key:e&&e.key||r||PD()})}function ah(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Aa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RD(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=is.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(dc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=is.Pop;let T=d(),w=T==null?null:T-c;c=T,l&&l({action:a,location:E.location,delta:w})}function p(T,w){a=is.Push;let v=ug(E.location,T,w);n&&n(v,T),c=d()+1;let _=f1(v,c),k=E.createHref(v);try{o.pushState(_,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(k)}i&&l&&l({action:a,location:E.location,delta:1})}function y(T,w){a=is.Replace;let v=ug(E.location,T,w);n&&n(v,T),c=d();let _=f1(v,c),k=E.createHref(v);o.replaceState(_,"",k),i&&l&&l({action:a,location:E.location,delta:0})}function x(T){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:ah(T);return v=v.replace(/ $/,"%20"),Ze(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let E={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(h1,h),l=T,()=>{s.removeEventListener(h1,h),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let w=x(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:y,go(T){return o.go(T)}};return E}var p1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p1||(p1={}));function CD(t,e,n){return n===void 0&&(n="/"),ND(t,e,n,!1)}function ND(t,e,n,r){let s=typeof e=="string"?Aa(e):e,i=i0(s.pathname||"/",n);if(i==null)return null;let o=HS(t);DD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=qD(i);a=$D(o[l],c,r)}return a}function HS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ys([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),HS(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:UD(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of KS(i.path))s(i,o,l)}),e}function KS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=KS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function DD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const VD=/^:[\w-]+$/,jD=3,MD=2,OD=1,LD=10,FD=-2,m1=t=>t==="*";function UD(t,e){let n=t.split("/"),r=n.length;return n.some(m1)&&(r+=FD),e&&(r+=MD),n.filter(s=>!m1(s)).reduce((s,i)=>s+(VD.test(i)?jD:i===""?OD:LD),r)}function BD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function $D(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=g1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=g1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ys([i,h.pathname]),pathnameBase:KD(ys([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=ys([i,h.pathnameBase]))}return o}function g1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zD(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:y}=d;if(p==="*"){let E=a[h]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const x=a[h];return y&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function zD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function i0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Aa(t):t;return{pathname:n?n.startsWith("/")?n:GD(n,e):e,search:QD(r),hash:XD(s)}}function GD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o0(t,e){let n=HD(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function a0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Aa(t):(s=dc({},t),Ze(!s.pathname||!s.pathname.includes("?"),Bp("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),Bp("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),Bp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=WD(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),KD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QS=["post","put","patch","delete"];new Set(QS);const YD=["get",...QS];new Set(YD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hc.apply(this,arguments)}const l0=C.createContext(null),ZD=C.createContext(null),Us=C.createContext(null),sf=C.createContext(null),Cr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),XS=C.createContext(null);function eV(t,e){let{relative:n}=e===void 0?{}:e;ba()||Ze(!1);let{basename:r,navigator:s}=C.useContext(Us),{hash:i,pathname:o,search:a}=ZS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ys([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ba(){return C.useContext(sf)!=null}function Gi(){return ba()||Ze(!1),C.useContext(sf).location}function JS(t){C.useContext(Us).static||C.useLayoutEffect(t)}function YS(){let{isDataRoute:t}=C.useContext(Cr);return t?pV():tV()}function tV(){ba()||Ze(!1);let t=C.useContext(l0),{basename:e,future:n,navigator:r}=C.useContext(Us),{matches:s}=C.useContext(Cr),{pathname:i}=Gi(),o=JSON.stringify(o0(s,n.v7_relativeSplatPath)),a=C.useRef(!1);return JS(()=>{a.current=!0}),C.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=a0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ys([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function nV(){let{matches:t}=C.useContext(Cr),e=t[t.length-1];return e?e.params:{}}function ZS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Us),{matches:s}=C.useContext(Cr),{pathname:i}=Gi(),o=JSON.stringify(o0(s,r.v7_relativeSplatPath));return C.useMemo(()=>a0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function rV(t,e){return sV(t,e)}function sV(t,e,n,r){ba()||Ze(!1);let{navigator:s}=C.useContext(Us),{matches:i}=C.useContext(Cr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Gi(),d;if(e){var h;let T=typeof e=="string"?Aa(e):e;l==="/"||(h=T.pathname)!=null&&h.startsWith(l)||Ze(!1),d=T}else d=c;let p=d.pathname||"/",y=p;if(l!=="/"){let T=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=CD(t,{pathname:y}),E=cV(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ys([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ys([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&E?C.createElement(sf.Provider,{value:{location:hc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:is.Pop}},E):E}function iV(){let t=fV(),e=JD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,i)}const oV=C.createElement(iV,null);class aV extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Cr.Provider,{value:this.props.routeContext},C.createElement(XS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lV(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(l0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Cr.Provider,{value:e},r)}function cV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ze(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:y}=n,x=h.route.loader&&p[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let y,x=!1,E=null,T=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,E=h.route.errorElement||oV,l&&(c<0&&p===0?(mV("route-fallback",!1),x=!0,T=null):c===p&&(x=!0,T=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let _;return y?_=E:x?_=T:h.route.Component?_=C.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,C.createElement(lV,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?C.createElement(aV,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var eA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eA||{}),lh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lh||{});function uV(t){let e=C.useContext(l0);return e||Ze(!1),e}function dV(t){let e=C.useContext(ZD);return e||Ze(!1),e}function hV(t){let e=C.useContext(Cr);return e||Ze(!1),e}function tA(t){let e=hV(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function fV(){var t;let e=C.useContext(XS),n=dV(lh.UseRouteError),r=tA(lh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pV(){let{router:t}=uV(eA.UseNavigateStable),e=tA(lh.UseNavigateStable),n=C.useRef(!1);return JS(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,hc({fromRouteId:e},i)))},[t,e])}const y1={};function mV(t,e,n){!e&&!y1[t]&&(y1[t]=!0)}function gV(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function nA(t){let{to:e,replace:n,state:r,relative:s}=t;ba()||Ze(!1);let{future:i,static:o}=C.useContext(Us),{matches:a}=C.useContext(Cr),{pathname:l}=Gi(),c=YS(),d=a0(e,o0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return C.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function ar(t){Ze(!1)}function yV(t){let{basename:e="/",children:n=null,location:r,navigationType:s=is.Pop,navigator:i,static:o=!1,future:a}=t;ba()&&Ze(!1);let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:i,static:o,future:hc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Aa(r));let{pathname:d="/",search:h="",hash:p="",state:y=null,key:x="default"}=r,E=C.useMemo(()=>{let T=i0(d,l);return T==null?null:{location:{pathname:T,search:h,hash:p,state:y,key:x},navigationType:s}},[l,d,h,p,y,x,s]);return E==null?null:C.createElement(Us.Provider,{value:c},C.createElement(sf.Provider,{children:n,value:E}))}function v1(t){let{children:e,location:n}=t;return rV(dg(e),n)}new Promise(()=>{});function dg(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,dg(r.props.children,i));return}r.type!==ar&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dg(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hg.apply(this,arguments)}function vV(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _V(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wV(t,e){return t.button===0&&(!e||e==="_self")&&!_V(t)}const xV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TV="6";try{window.__reactRouterVersion=TV}catch{}const EV="startTransition",_1=gC[EV];function IV(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=kD({window:s,v5Compat:!0}));let o=i.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=C.useCallback(h=>{c&&_1?_1(()=>l(h)):l(h)},[l,c]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>gV(r),[r]),C.createElement(yV,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const SV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=vV(e,xV),{basename:y}=C.useContext(Us),x,E=!1;if(typeof c=="string"&&AV.test(c)&&(x=c,SV))try{let _=new URL(window.location.href),k=c.startsWith("//")?new URL(_.protocol+c):new URL(c),D=i0(k.pathname,y);k.origin===_.origin&&D!=null?c=D+k.search+k.hash:E=!0}catch{}let T=eV(c,{relative:s}),w=bV(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(_){r&&r(_),_.defaultPrevented||w(_)}return C.createElement("a",hg({},p,{href:x||T,onClick:E||i?r:v,ref:n,target:l}))});var w1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(w1||(w1={}));var x1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x1||(x1={}));function bV(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=YS(),c=Gi(),d=ZS(t,{relative:o});return C.useCallback(h=>{if(wV(h,n)){h.preventDefault();let p=r!==void 0?r:ah(c)===ah(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const rA=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),of=C.createContext({}),af=C.createContext(null),lf=typeof document<"u",c0=lf?C.useLayoutEffect:C.useEffect,sA=C.createContext({strict:!1}),u0=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kV="framerAppearId",iA="data-"+u0(kV);function PV(t,e,n,r){const{visualElement:s}=C.useContext(of),i=C.useContext(sA),o=C.useContext(af),a=C.useContext(rA).reducedMotion,l=C.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;C.useInsertionEffect(()=>{c&&c.update(n,o)});const d=C.useRef(!!(n[iA]&&!window.HandoffComplete));return c0(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),C.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function Ro(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function RV(t,e,n){return C.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ro(n)&&(n.current=r))},[e])}function fc(t){return typeof t=="string"||Array.isArray(t)}function cf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const d0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],h0=["initial",...d0];function uf(t){return cf(t.animate)||h0.some(e=>fc(t[e]))}function oA(t){return!!(uf(t)||t.variants)}function CV(t,e){if(uf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||fc(n)?n:void 0,animate:fc(r)?r:void 0}}return t.inherit!==!1?e:{}}function NV(t){const{initial:e,animate:n}=CV(t,C.useContext(of));return C.useMemo(()=>({initial:e,animate:n}),[T1(e),T1(n)])}function T1(t){return Array.isArray(t)?t.join(" "):t}const E1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const t in E1)pc[t]={isEnabled:e=>E1[t].some(n=>!!e[n])};function DV(t){for(const e in t)pc[e]={...pc[e],...t[e]}}const f0=C.createContext({}),aA=C.createContext({}),VV=Symbol.for("motionComponentSymbol");function jV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&DV(t);function i(a,l){let c;const d={...C.useContext(rA),...a,layoutId:MV(a)},{isStatic:h}=d,p=NV(a),y=r(a,h);if(!h&&lf){p.visualElement=PV(s,y,d,e);const x=C.useContext(aA),E=C.useContext(sA).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,E,t,x))}return C.createElement(of.Provider,{value:p},c&&p.visualElement?C.createElement(c,{visualElement:p.visualElement,...d}):null,n(s,a,RV(y,p.visualElement,l),y,h,p.visualElement))}const o=C.forwardRef(i);return o[VV]=s,o}function MV({layoutId:t}){const e=C.useContext(f0).id;return e&&t!==void 0?e+"-"+t:t}function OV(t){function e(r,s={}){return jV(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const LV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function p0(t){return typeof t!="string"||t.includes("-")?!1:!!(LV.indexOf(t)>-1||/[A-Z]/.test(t))}const ch={};function FV(t){Object.assign(ch,t)}const Lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hi=new Set(Lc);function lA(t,{layout:e,layoutId:n}){return Hi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ch[t]||t==="opacity")}const sn=t=>!!(t&&t.getVelocity),UV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BV=Lc.length;function $V(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<BV;o++){const a=Lc[o];if(t[a]!==void 0){const l=UV[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const cA=t=>e=>typeof e=="string"&&e.startsWith(t),uA=cA("--"),fg=cA("var(--"),zV=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qV=(t,e)=>e&&typeof t=="number"?e.transform(t):t,bs=(t,e,n)=>Math.min(Math.max(n,t),e),Ki={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Nl={...Ki,transform:t=>bs(0,1,t)},Ku={...Ki,default:1},Dl=t=>Math.round(t*1e5)/1e5,df=/(-)?([\d]*\.?[\d])+/g,dA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,WV=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Fc(t){return typeof t=="string"}const Uc=t=>({test:e=>Fc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wr=Uc("deg"),Jn=Uc("%"),ne=Uc("px"),GV=Uc("vh"),HV=Uc("vw"),I1={...Jn,parse:t=>Jn.parse(t)/100,transform:t=>Jn.transform(t*100)},S1={...Ki,transform:Math.round},hA={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:Wr,rotateX:Wr,rotateY:Wr,rotateZ:Wr,scale:Ku,scaleX:Ku,scaleY:Ku,scaleZ:Ku,skew:Wr,skewX:Wr,skewY:Wr,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:Nl,originX:I1,originY:I1,originZ:ne,zIndex:S1,fillOpacity:Nl,strokeOpacity:Nl,numOctaves:S1};function m0(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const h in e){const p=e[h];if(uA(h)){i[h]=p;continue}const y=hA[h],x=qV(p,y);if(Hi.has(h)){if(l=!0,o[h]=x,!d)continue;p!==(y.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,a[h]=x):s[h]=x}if(e.transform||(l||r?s.transform=$V(t.transform,n,d,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:y=0}=a;s.transformOrigin=`${h} ${p} ${y}`}}const g0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fA(t,e,n){for(const r in e)!sn(e[r])&&!lA(r,n)&&(t[r]=e[r])}function KV({transformTemplate:t},e,n){return C.useMemo(()=>{const r=g0();return m0(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function QV(t,e,n){const r=t.style||{},s={};return fA(s,r,t),Object.assign(s,KV(t,e,n)),t.transformValues?t.transformValues(s):s}function XV(t,e,n){const r={},s=QV(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const JV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function uh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JV.has(t)}let pA=t=>!uh(t);function YV(t){t&&(pA=e=>e.startsWith("on")?!uh(e):t(e))}try{YV(require("@emotion/is-prop-valid").default)}catch{}function ZV(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(pA(s)||n===!0&&uh(s)||!e&&!uh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function A1(t,e,n){return typeof t=="string"?t:ne.transform(e+n*t)}function e4(t,e,n){const r=A1(e,t.x,t.width),s=A1(n,t.y,t.height);return`${r} ${s}`}const t4={offset:"stroke-dashoffset",array:"stroke-dasharray"},n4={offset:"strokeDashoffset",array:"strokeDasharray"};function r4(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?t4:n4;t[i.offset]=ne.transform(-r);const o=ne.transform(e),a=ne.transform(n);t[i.array]=`${o} ${a}`}function y0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h,p){if(m0(t,c,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x,dimensions:E}=t;y.transform&&(E&&(x.transform=y.transform),delete y.transform),E&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=e4(E,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&r4(y,o,a,l,!1)}const mA=()=>({...g0(),attrs:{}}),v0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function s4(t,e,n,r){const s=C.useMemo(()=>{const i=mA();return y0(i,e,{enableHardwareAcceleration:!1},v0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};fA(i,t.style,t),s.style={...i,...s.style}}return s}function i4(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(p0(n)?s4:XV)(r,i,o,n),d={...ZV(r,typeof n=="string",t),...l,ref:s},{children:h}=r,p=C.useMemo(()=>sn(h)?h.get():h,[h]);return C.createElement(n,{...d,children:p})}}function gA(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const yA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vA(t,e,n,r){gA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(yA.has(s)?s:u0(s),e.attrs[s])}function _0(t,e){const{style:n}=t,r={};for(const s in n)(sn(n[s])||e.style&&sn(e.style[s])||lA(s,t))&&(r[s]=n[s]);return r}function _A(t,e){const n=_0(t,e);for(const r in t)if(sn(t[r])||sn(e[r])){const s=Lc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function w0(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function wA(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const dh=t=>Array.isArray(t),o4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),a4=t=>dh(t)?t[t.length-1]||0:t;function _d(t){const e=sn(t)?t.get():t;return o4(e)?e.toValue():e}function l4({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:c4(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const xA=t=>(e,n)=>{const r=C.useContext(of),s=C.useContext(af),i=()=>l4(t,e,r,s);return n?i():wA(i)};function c4(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=_d(i[p]);let{initial:o,animate:a}=t;const l=uf(t),c=oA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!cf(h)&&(Array.isArray(h)?h:[h]).forEach(y=>{const x=w0(t,y);if(!x)return;const{transitionEnd:E,transition:T,...w}=x;for(const v in w){let _=w[v];if(Array.isArray(_)){const k=d?_.length-1:0;_=_[k]}_!==null&&(s[v]=_)}for(const v in E)s[v]=E[v]}),s}const Qe=t=>t;class b1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function u4(t){let e=new b1,n=new b1,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const h=d&&s,p=h?e:n;return c&&o.add(l),p.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Qu=["prepare","read","update","preRender","render","postRender"],d4=40;function h4(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Qu.reduce((h,p)=>(h[p]=u4(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,d4),1),s.timestamp=h,s.isProcessing=!0,Qu.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Qu.reduce((h,p)=>{const y=i[p];return h[p]=(x,E=!1,T=!1)=>(n||l(),y.schedule(x,E,T)),h},{}),cancel:h=>Qu.forEach(p=>i[p].cancel(h)),state:s,steps:i}}const{schedule:Pe,cancel:Ir,state:Dt,steps:$p}=h4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qe,!0),f4={useVisualState:xA({scrapeMotionValuesFromProps:_A,createRenderState:mA,onMount:(t,e,{renderState:n,latestValues:r})=>{Pe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Pe.render(()=>{y0(n,r,{enableHardwareAcceleration:!1},v0(e.tagName),t.transformTemplate),vA(e,n)})}})},p4={useVisualState:xA({scrapeMotionValuesFromProps:_0,createRenderState:g0})};function m4(t,{forwardMotionProps:e=!1},n,r){return{...p0(t)?f4:p4,preloadedFeatures:n,useRender:i4(e),createVisualElement:r,Component:t}}function fr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const TA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function hf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const g4=t=>e=>TA(e)&&t(e,hf(e));function vr(t,e,n,r){return fr(t,e,g4(n),r)}const y4=(t,e)=>n=>e(t(n)),vs=(...t)=>t.reduce(y4);function EA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const k1=EA("dragHorizontal"),P1=EA("dragVertical");function IA(t){let e=!1;if(t==="y")e=P1();else if(t==="x")e=k1();else{const n=k1(),r=P1();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function SA(){const t=IA(!0);return t?(t(),!1):!0}class Bs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function R1(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||SA())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Pe.update(()=>a[r](i,o))};return vr(t.current,n,s,{passive:!t.getProps()[r]})}class v4 extends Bs{mount(){this.unmount=vs(R1(this.node,!0),R1(this.node,!1))}unmount(){}}class _4 extends Bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vs(fr(this.node.current,"focus",()=>this.onFocus()),fr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const AA=(t,e)=>e?t===e?!0:AA(t,e.parentElement):!1;function zp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,hf(n))}class w4 extends Bs{constructor(){super(...arguments),this.removeStartListeners=Qe,this.removeEndListeners=Qe,this.removeAccessibleListeners=Qe,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=vr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Pe.update(()=>{!h&&!AA(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=vr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=vs(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||zp("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Pe.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=fr(this.node.current,"keyup",o),zp("down",(a,l)=>{this.startPress(a,l)})},n=fr(this.node.current,"keydown",e),r=()=>{this.isPressing&&zp("cancel",(i,o)=>this.cancelPress(i,o))},s=fr(this.node.current,"blur",r);this.removeAccessibleListeners=vs(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pe.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pe.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=vr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=fr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vs(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const pg=new WeakMap,qp=new WeakMap,x4=t=>{const e=pg.get(t.target);e&&e(t)},T4=t=>{t.forEach(x4)};function E4({root:t,...e}){const n=t||document;qp.has(n)||qp.set(n,{});const r=qp.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(T4,{root:t,...e})),r[s]}function I4(t,e,n){const r=E4(e);return pg.set(t,n),r.observe(t),()=>{pg.delete(t),r.unobserve(t)}}const S4={some:0,all:1};class A4 extends Bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:S4[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(l)};return I4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(b4(e,n))&&this.startObserver()}unmount(){}}function b4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const k4={inView:{Feature:A4},tap:{Feature:w4},focus:{Feature:_4},hover:{Feature:v4}};function bA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function P4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function R4(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ff(t,e,n){const r=t.getProps();return w0(r,e,n!==void 0?n:r.custom,P4(t),R4(t))}let C4=Qe,x0=Qe;const _s=t=>t*1e3,_r=t=>t/1e3,N4={current:!1},kA=t=>Array.isArray(t)&&typeof t[0]=="number";function PA(t){return!!(!t||typeof t=="string"&&RA[t]||kA(t)||Array.isArray(t)&&t.every(PA))}const vl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,RA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vl([0,.65,.55,1]),circOut:vl([.55,0,1,.45]),backIn:vl([.31,.01,.66,-.59]),backOut:vl([.33,1.53,.69,.99])};function CA(t){if(t)return kA(t)?vl(t):Array.isArray(t)?t.map(CA):RA[t]}function D4(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=CA(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function V4(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const NA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,j4=1e-7,M4=12;function O4(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=NA(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>j4&&++a<M4);return o}function Bc(t,e,n,r){if(t===e&&n===r)return Qe;const s=i=>O4(i,0,1,t,n);return i=>i===0||i===1?i:NA(s(i),e,r)}const L4=Bc(.42,0,1,1),F4=Bc(0,0,.58,1),DA=Bc(.42,0,.58,1),U4=t=>Array.isArray(t)&&typeof t[0]!="number",VA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jA=t=>e=>1-t(1-e),T0=t=>1-Math.sin(Math.acos(t)),MA=jA(T0),B4=VA(T0),OA=Bc(.33,1.53,.69,.99),E0=jA(OA),$4=VA(E0),z4=t=>(t*=2)<1?.5*E0(t):.5*(2-Math.pow(2,-10*(t-1))),q4={linear:Qe,easeIn:L4,easeInOut:DA,easeOut:F4,circIn:T0,circInOut:B4,circOut:MA,backIn:E0,backInOut:$4,backOut:OA,anticipate:z4},C1=t=>{if(Array.isArray(t)){x0(t.length===4);const[e,n,r,s]=t;return Bc(e,n,r,s)}else if(typeof t=="string")return q4[t];return t},I0=(t,e)=>n=>!!(Fc(n)&&WV.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),LA=(t,e,n)=>r=>{if(!Fc(r))return r;const[s,i,o,a]=r.match(df);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},W4=t=>bs(0,255,t),Wp={...Ki,transform:t=>Math.round(W4(t))},gi={test:I0("rgb","red"),parse:LA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Wp.transform(t)+", "+Wp.transform(e)+", "+Wp.transform(n)+", "+Dl(Nl.transform(r))+")"};function G4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const mg={test:I0("#"),parse:G4,transform:gi.transform},Co={test:I0("hsl","hue"),parse:LA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Jn.transform(Dl(e))+", "+Jn.transform(Dl(n))+", "+Dl(Nl.transform(r))+")"},$t={test:t=>gi.test(t)||mg.test(t)||Co.test(t),parse:t=>gi.test(t)?gi.parse(t):Co.test(t)?Co.parse(t):mg.parse(t),transform:t=>Fc(t)?t:t.hasOwnProperty("red")?gi.transform(t):Co.transform(t)},ze=(t,e,n)=>-n*t+n*e+t;function Gp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function H4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Gp(l,a,t+1/3),i=Gp(l,a,t),o=Gp(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Hp=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},K4=[mg,gi,Co],Q4=t=>K4.find(e=>e.test(t));function N1(t){const e=Q4(t);let n=e.parse(t);return e===Co&&(n=H4(n)),n}const FA=(t,e)=>{const n=N1(t),r=N1(e),s={...n};return i=>(s.red=Hp(n.red,r.red,i),s.green=Hp(n.green,r.green,i),s.blue=Hp(n.blue,r.blue,i),s.alpha=ze(n.alpha,r.alpha,i),gi.transform(s))};function X4(t){var e,n;return isNaN(t)&&Fc(t)&&(((e=t.match(df))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(dA))===null||n===void 0?void 0:n.length)||0)>0}const UA={regex:zV,countKey:"Vars",token:"${v}",parse:Qe},BA={regex:dA,countKey:"Colors",token:"${c}",parse:$t.parse},$A={regex:df,countKey:"Numbers",token:"${n}",parse:Ki.parse};function Kp(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function hh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Kp(n,UA),Kp(n,BA),Kp(n,$A),n}function zA(t){return hh(t).values}function qA(t){const{values:e,numColors:n,numVars:r,tokenised:s}=hh(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(UA.token,o[l]):l<r+n?a=a.replace(BA.token,$t.transform(o[l])):a=a.replace($A.token,Dl(o[l]));return a}}const J4=t=>typeof t=="number"?0:t;function Y4(t){const e=zA(t);return qA(t)(e.map(J4))}const ks={test:X4,parse:zA,createTransformer:qA,getAnimatableNone:Y4},WA=(t,e)=>n=>`${n>0?e:t}`;function GA(t,e){return typeof t=="number"?n=>ze(t,e,n):$t.test(t)?FA(t,e):t.startsWith("var(")?WA(t,e):KA(t,e)}const HA=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>GA(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},Z4=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=GA(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},KA=(t,e)=>{const n=ks.createTransformer(e),r=hh(t),s=hh(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?vs(HA(r.values,s.values),n):WA(t,e)},mc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},D1=(t,e)=>n=>ze(t,e,n);function ej(t){return typeof t=="number"?D1:typeof t=="string"?$t.test(t)?FA:KA:Array.isArray(t)?HA:typeof t=="object"?Z4:D1}function tj(t,e,n){const r=[],s=n||ej(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qe:e;a=vs(l,a)}r.push(a)}return r}function QA(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(x0(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tj(e,r,s),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const h=mc(t[d],t[d+1],c);return o[d](h)};return n?c=>l(bs(t[0],t[i-1],c)):l}function nj(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=mc(0,e,r);t.push(ze(n,1,s))}}function rj(t){const e=[0];return nj(e,t.length-1),e}function sj(t,e){return t.map(n=>n*e)}function ij(t,e){return t.map(()=>e||DA).splice(0,t.length-1)}function fh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=U4(r)?r.map(C1):C1(r),i={done:!1,value:e[0]},o=sj(n&&n.length===e.length?n:rj(e),t),a=QA(o,e,{ease:Array.isArray(s)?s:ij(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function XA(t,e){return e?t*(1e3/e):0}const oj=5;function JA(t,e,n){const r=Math.max(e-oj,0);return XA(n-t(r),e-r)}const Qp=.001,aj=.01,V1=10,lj=.05,cj=1;function uj({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;C4(t<=_s(V1));let o=1-e;o=bs(lj,cj,o),t=bs(aj,V1,_r(t)),o<1?(s=c=>{const d=c*o,h=d*t,p=d-n,y=gg(c,o),x=Math.exp(-h);return Qp-p/y*x},i=c=>{const h=c*o*t,p=h*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),E=gg(Math.pow(c,2),o);return(-s(c)+Qp>0?-1:1)*((p-y)*x)/E}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-Qp+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=hj(s,i,a);if(t=_s(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const dj=12;function hj(t,e,n){let r=n;for(let s=1;s<dj;s++)r=r-t(r)/e(r);return r}function gg(t,e){return t*Math.sqrt(1-e*e)}const fj=["duration","bounce"],pj=["stiffness","damping","mass"];function j1(t,e){return e.some(n=>t[n]!==void 0)}function mj(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!j1(t,pj)&&j1(t,fj)){const n=uj(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function YA({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:p}=mj({...r,velocity:-_r(r.velocity||0)}),y=h||0,x=l/(2*Math.sqrt(a*c)),E=i-s,T=_r(Math.sqrt(a/c)),w=Math.abs(E)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let v;if(x<1){const _=gg(T,x);v=k=>{const D=Math.exp(-x*T*k);return i-D*((y+x*T*E)/_*Math.sin(_*k)+E*Math.cos(_*k))}}else if(x===1)v=_=>i-Math.exp(-T*_)*(E+(y+T*E)*_);else{const _=T*Math.sqrt(x*x-1);v=k=>{const D=Math.exp(-x*T*k),O=Math.min(_*k,300);return i-D*((y+x*T*E)*Math.sinh(O)+_*E*Math.cosh(O))/_}}return{calculatedDuration:p&&d||null,next:_=>{const k=v(_);if(p)o.done=_>=d;else{let D=y;_!==0&&(x<1?D=JA(v,_,k):D=0);const O=Math.abs(D)<=n,A=Math.abs(i-k)<=e;o.done=O&&A}return o.value=o.done?i:k,o}}}function M1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},y=I=>a!==void 0&&I<a||l!==void 0&&I>l,x=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let E=n*e;const T=h+E,w=o===void 0?T:o(T);w!==T&&(E=w-h);const v=I=>-E*Math.exp(-I/r),_=I=>w+v(I),k=I=>{const b=v(I),P=_(I);p.done=Math.abs(b)<=c,p.value=p.done?w:P};let D,O;const A=I=>{y(p.value)&&(D=I,O=YA({keyframes:[p.value,x(p.value)],velocity:JA(_,I,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return A(0),{calculatedDuration:null,next:I=>{let b=!1;return!O&&D===void 0&&(b=!0,k(I),A(I)),D!==void 0&&I>D?O.next(I-D):(!b&&k(I),p)}}}const gj=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Pe.update(e,!0),stop:()=>Ir(e),now:()=>Dt.isProcessing?Dt.timestamp:performance.now()}},O1=2e4;function L1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<O1;)e+=n,r=t.next(e);return e>=O1?1/0:e}const yj={decay:M1,inertia:M1,tween:fh,keyframes:fh,spring:YA};function ph({autoplay:t=!0,delay:e=0,driver:n=gj,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:h,...p}){let y=1,x=!1,E,T;const w=()=>{T=new Promise(te=>{E=te})};w();let v;const _=yj[s]||fh;let k;_!==fh&&typeof r[0]!="number"&&(k=QA([0,100],r,{clamp:!1}),r=[0,100]);const D=_({...p,keyframes:r});let O;a==="mirror"&&(O=_({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let A="idle",I=null,b=null,P=null;D.calculatedDuration===null&&i&&(D.calculatedDuration=L1(D));const{calculatedDuration:N}=D;let V=1/0,R=1/0;N!==null&&(V=N+o,R=V*(i+1)-o);let _e=0;const St=te=>{if(b===null)return;y>0&&(b=Math.min(b,te)),y<0&&(b=Math.min(te-R/y,b)),I!==null?_e=I:_e=Math.round(te-b)*y;const pe=_e-e*(y>=0?1:-1),be=y>=0?pe<0:pe>R;_e=Math.max(pe,0),A==="finished"&&I===null&&(_e=R);let Kt=_e,Qt=D;if(i){const me=Math.min(_e,R)/V;let oe=Math.floor(me),At=me%1;!At&&me>=1&&(At=1),At===1&&oe--,oe=Math.min(oe,i+1),!!(oe%2)&&(a==="reverse"?(At=1-At,o&&(At-=o/V)):a==="mirror"&&(Qt=O)),Kt=bs(0,1,At)*V}const vt=be?{done:!1,value:r[0]}:Qt.next(Kt);k&&(vt.value=k(vt.value));let{done:$}=vt;!be&&N!==null&&($=y>=0?_e>=R:_e<=0);const Y=I===null&&(A==="finished"||A==="running"&&$);return h&&h(vt.value),Y&&H(),vt},Ce=()=>{v&&v.stop(),v=void 0},tt=()=>{A="idle",Ce(),E(),w(),b=P=null},H=()=>{A="finished",d&&d(),Ce(),E()},Z=()=>{if(x)return;v||(v=n(St));const te=v.now();l&&l(),I!==null?b=te-I:(!b||A==="finished")&&(b=te),A==="finished"&&w(),P=b,I=null,A="running",v.start()};t&&Z();const se={then(te,pe){return T.then(te,pe)},get time(){return _r(_e)},set time(te){te=_s(te),_e=te,I!==null||!v||y===0?I=te:b=v.now()-te/y},get duration(){const te=D.calculatedDuration===null?L1(D):D.calculatedDuration;return _r(te)},get speed(){return y},set speed(te){te===y||!v||(y=te,se.time=_r(_e))},get state(){return A},play:Z,pause:()=>{A="paused",I=_e},stop:()=>{x=!0,A!=="idle"&&(A="idle",c&&c(),tt())},cancel:()=>{P!==null&&St(P),tt()},complete:()=>{A="finished"},sample:te=>(b=0,St(te))};return se}function vj(t){let e;return()=>(e===void 0&&(e=t()),e)}const _j=vj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),wj=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Xu=10,xj=2e4,Tj=(t,e)=>e.type==="spring"||t==="backgroundColor"||!PA(e.ease);function Ej(t,e,{onUpdate:n,onComplete:r,...s}){if(!(_j()&&wj.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(_=>{a=_})};d();let{keyframes:h,duration:p=300,ease:y,times:x}=s;if(Tj(e,s)){const _=ph({...s,repeat:0,delay:0});let k={done:!1,value:h[0]};const D=[];let O=0;for(;!k.done&&O<xj;)k=_.sample(O),D.push(k.value),O+=Xu;x=void 0,h=D,p=O-Xu,y="linear"}const E=D4(t.owner.current,e,h,{...s,duration:p,ease:y,times:x}),T=()=>{c=!1,E.cancel()},w=()=>{c=!0,Pe.update(T),a(),d()};return E.onfinish=()=>{c||(t.set(V4(h,s)),r&&r(),w())},{then(_,k){return l.then(_,k)},attachTimeline(_){return E.timeline=_,E.onfinish=null,Qe},get time(){return _r(E.currentTime||0)},set time(_){E.currentTime=_s(_)},get speed(){return E.playbackRate},set speed(_){E.playbackRate=_},get duration(){return _r(p)},play:()=>{o||(E.play(),Ir(T))},pause:()=>E.pause(),stop:()=>{if(o=!0,E.playState==="idle")return;const{currentTime:_}=E;if(_){const k=ph({...s,autoplay:!1});t.setWithVelocity(k.sample(_-Xu).value,k.sample(_).value,Xu)}w()},complete:()=>{c||E.finish()},cancel:w}}function Ij({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Qe,pause:Qe,stop:Qe,then:i=>(i(),Promise.resolve()),cancel:Qe,complete:Qe});return e?ph({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const Sj={type:"spring",stiffness:500,damping:25,restSpeed:10},Aj=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bj={type:"keyframes",duration:.8},kj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pj=(t,{keyframes:e})=>e.length>2?bj:Hi.has(t)?t.startsWith("scale")?Aj(e[1]):Sj:kj,yg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ks.test(e)||e==="0")&&!e.startsWith("url(")),Rj=new Set(["brightness","contrast","saturate","opacity"]);function Cj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(df)||[];if(!r)return t;const s=n.replace(r,"");let i=Rj.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Nj=/([a-z-]*)\(.*?\)/g,vg={...ks,getAnimatableNone:t=>{const e=t.match(Nj);return e?e.map(Cj).join(" "):t}},Dj={...hA,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:vg,WebkitFilter:vg},S0=t=>Dj[t];function ZA(t,e){let n=S0(t);return n!==vg&&(n=ks),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eb=t=>/^0[^.\s]+$/.test(t);function Vj(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||eb(t)}function jj(t,e,n,r){const s=yg(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),Vj(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];i[d]=ZA(e,a)}return i}function Mj({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function A0(t,e){return t[e]||t.default||t}const Oj={skipAnimations:!1},b0=(t,e,n,r={})=>s=>{const i=A0(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-_s(o);const l=jj(e,t,n,i),c=l[0],d=l[l.length-1],h=yg(t,c),p=yg(t,d);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{e.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Mj(i)||(y={...y,...Pj(t,y)}),y.duration&&(y.duration=_s(y.duration)),y.repeatDelay&&(y.repeatDelay=_s(y.repeatDelay)),!h||!p||N4.current||i.type===!1||Oj.skipAnimations)return Ij(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=Ej(e,t,y);if(x)return x}return ph(y)};function mh(t){return!!(sn(t)&&t.add)}const tb=t=>/^\-?\d*\.?\d+$/.test(t);function k0(t,e){t.indexOf(e)===-1&&t.push(e)}function P0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class R0{constructor(){this.subscriptions=[]}add(e){return k0(this.subscriptions,e),()=>P0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lj=t=>!isNaN(parseFloat(t));class Fj{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Dt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Pe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Pe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Lj(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new R0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?XA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zo(t,e){return new Fj(t,e)}const nb=t=>e=>e.test(t),Uj={test:t=>t==="auto",parse:t=>t},rb=[Ki,ne,Jn,Wr,HV,GV,Uj],al=t=>rb.find(nb(t)),Bj=[...rb,$t,ks],$j=t=>Bj.find(nb(t));function zj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zo(n))}function qj(t,e){const n=ff(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=a4(i[o]);zj(t,o,a)}}function Wj(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),d!=null&&(typeof d=="string"&&(tb(d)||eb(d))?d=parseFloat(d):!$j(d)&&ks.test(c)&&(d=ZA(l,c)),t.addValue(l,Zo(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function Gj(t,e){return e?(e[t]||e.default||e).from:void 0}function Hj(t,e,n){const r={};for(const s in t){const i=Gj(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Kj({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Qj(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function sb(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const p=t.getValue(h),y=a[h];if(!p||y===void 0||d&&Kj(d,h))continue;const x={delay:n,elapsed:0,...A0(i||{},h)};if(window.HandoffAppearAnimations){const w=t.getProps()[iA];if(w){const v=window.HandoffAppearAnimations(w,h,p,Pe);v!==null&&(x.elapsed=v,x.isHandoff=!0)}}let E=!x.isHandoff&&!Qj(p,y);if(x.type==="spring"&&(p.getVelocity()||x.velocity)&&(E=!1),p.animation&&(E=!1),E)continue;p.start(b0(h,p,y,t.shouldReduceMotion&&Hi.has(h)?{type:!1}:x));const T=p.animation;mh(l)&&(l.add(h),T.then(()=>l.remove(h))),c.push(T)}return o&&Promise.all(c).then(()=>{o&&qj(t,o)}),c}function _g(t,e,n={}){const r=ff(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(sb(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return Xj(t,e,c+l,d,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function Xj(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Jj).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(_g(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Jj(t,e){return t.sortNodePosition(e)}function Yj(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>_g(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=_g(t,e,n);else{const s=typeof e=="function"?ff(t,e,n.custom):e;r=Promise.all(sb(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const Zj=[...d0].reverse(),eM=d0.length;function tM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Yj(t,n,r)))}function nM(t){let e=tM(t);const n=sM();let r=!0;const s=(l,c)=>{const d=ff(t,c);if(d){const{transition:h,transitionEnd:p,...y}=d;l={...l,...y,...p}}return l};function i(l){e=l(t)}function o(l,c){const d=t.getProps(),h=t.getVariantContext(!0)||{},p=[],y=new Set;let x={},E=1/0;for(let w=0;w<eM;w++){const v=Zj[w],_=n[v],k=d[v]!==void 0?d[v]:h[v],D=fc(k),O=v===c?_.isActive:null;O===!1&&(E=w);let A=k===h[v]&&k!==d[v]&&D;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...x},!_.isActive&&O===null||!k&&!_.prevProp||cf(k)||typeof k=="boolean")continue;let b=rM(_.prevProp,k)||v===c&&_.isActive&&!A&&D||w>E&&D,P=!1;const N=Array.isArray(k)?k:[k];let V=N.reduce(s,{});O===!1&&(V={});const{prevResolvedValues:R={}}=_,_e={...R,...V},St=Ce=>{b=!0,y.has(Ce)&&(P=!0,y.delete(Ce)),_.needsAnimating[Ce]=!0};for(const Ce in _e){const tt=V[Ce],H=R[Ce];if(x.hasOwnProperty(Ce))continue;let Z=!1;dh(tt)&&dh(H)?Z=!bA(tt,H):Z=tt!==H,Z?tt!==void 0?St(Ce):y.add(Ce):tt!==void 0&&y.has(Ce)?St(Ce):_.protectedKeys[Ce]=!0}_.prevProp=k,_.prevResolvedValues=V,_.isActive&&(x={...x,...V}),r&&t.blockInitialAnimation&&(b=!1),b&&(!A||P)&&p.push(...N.map(Ce=>({animation:Ce,options:{type:v,...l}})))}if(y.size){const w={};y.forEach(v=>{const _=t.getBaseTarget(v);_!==void 0&&(w[v]=_)}),p.push({animation:w})}let T=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(p):Promise.resolve()}function a(l,c,d){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(y=>{var x;return(x=y.animationState)===null||x===void 0?void 0:x.setActive(l,c)}),n[l].isActive=c;const p=o(d,l);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function rM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bA(e,t):!1}function Ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sM(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class iM extends Bs{constructor(e){super(e),e.animationState||(e.animationState=nM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),cf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let oM=0;class aM extends Bs{constructor(){super(...arguments),this.id=oM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const lM={animation:{Feature:iM},exit:{Feature:aM}},F1=(t,e)=>Math.abs(t-e);function cM(t,e){const n=F1(t.x,e.x),r=F1(t.y,e.y);return Math.sqrt(n**2+r**2)}class ib{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Jp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=cM(h.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:x}=h,{timestamp:E}=Dt;this.history.push({...x,timestamp:E});const{onStart:T,onMove:w}=this.handlers;p||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Xp(p,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Jp(h.type==="pointercancel"?this.lastMoveEventInfo:Xp(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,T),x&&x(h,T)},!TA(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=hf(e),a=Xp(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Dt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Jp(a,this.history)),this.removeListeners=vs(vr(this.contextWindow,"pointermove",this.handlePointerMove),vr(this.contextWindow,"pointerup",this.handlePointerUp),vr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function Xp(t,e){return e?{point:e(t.point)}:t}function U1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jp({point:t},e){return{point:t,delta:U1(t,ob(e)),offset:U1(t,uM(e)),velocity:dM(e,.1)}}function uM(t){return t[0]}function ob(t){return t[t.length-1]}function dM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ob(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>_s(e)));)n--;if(!r)return{x:0,y:0};const i=_r(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mn(t){return t.max-t.min}function wg(t,e=0,n=.01){return Math.abs(t-e)<=n}function B1(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=mn(n)/mn(e),(wg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(wg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Vl(t,e,n,r){B1(t.x,e.x,n.x,r?r.originX:void 0),B1(t.y,e.y,n.y,r?r.originY:void 0)}function $1(t,e,n){t.min=n.min+e.min,t.max=t.min+mn(e)}function hM(t,e,n){$1(t.x,e.x,n.x),$1(t.y,e.y,n.y)}function z1(t,e,n){t.min=e.min-n.min,t.max=t.min+mn(e)}function jl(t,e,n){z1(t.x,e.x,n.x),z1(t.y,e.y,n.y)}function fM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function q1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pM(t,{top:e,left:n,bottom:r,right:s}){return{x:q1(t.x,n,s),y:q1(t.y,e,r)}}function W1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function mM(t,e){return{x:W1(t.x,e.x),y:W1(t.y,e.y)}}function gM(t,e){let n=.5;const r=mn(t),s=mn(e);return s>r?n=mc(e.min,e.max-r,t.min):r>s&&(n=mc(t.min,t.max-s,e.min)),bs(0,1,n)}function yM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xg=.35;function vM(t=xg){return t===!1?t=0:t===!0&&(t=xg),{x:G1(t,"left","right"),y:G1(t,"top","bottom")}}function G1(t,e,n){return{min:H1(t,e),max:H1(t,n)}}function H1(t,e){return typeof t=="number"?t:t[e]||0}const K1=()=>({translate:0,scale:1,origin:0,originPoint:0}),No=()=>({x:K1(),y:K1()}),Q1=()=>({min:0,max:0}),rt=()=>({x:Q1(),y:Q1()});function wn(t){return[t("x"),t("y")]}function ab({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _M({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Yp(t){return t===void 0||t===1}function Tg({scale:t,scaleX:e,scaleY:n}){return!Yp(t)||!Yp(e)||!Yp(n)}function ri(t){return Tg(t)||lb(t)||t.z||t.rotate||t.rotateX||t.rotateY}function lb(t){return X1(t.x)||X1(t.y)}function X1(t){return t&&t!=="0%"}function gh(t,e,n){const r=t-n,s=e*r;return n+s}function J1(t,e,n,r,s){return s!==void 0&&(t=gh(t,s,r)),gh(t,n,r)+e}function Eg(t,e=0,n=1,r,s){t.min=J1(t.min,e,n,r,s),t.max=J1(t.max,e,n,r,s)}function cb(t,{x:e,y:n}){Eg(t.x,e.translate,e.scale,e.originPoint),Eg(t.y,n.translate,n.scale,n.originPoint)}function xM(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Do(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cb(t,o)),r&&ri(i.latestValues)&&Do(t,i.latestValues))}e.x=Y1(e.x),e.y=Y1(e.y)}function Y1(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Kr(t,e){t.min=t.min+e,t.max=t.max+e}function Z1(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ze(t.min,t.max,i);Eg(t,e[n],e[r],o,e.scale)}const TM=["x","scaleX","originX"],EM=["y","scaleY","originY"];function Do(t,e){Z1(t.x,e,TM),Z1(t.y,e,EM)}function ub(t,e){return ab(wM(t.getBoundingClientRect(),e))}function IM(t,e,n){const r=ub(t,n),{scroll:s}=e;return s&&(Kr(r.x,s.offset.x),Kr(r.y,s.offset.y)),r}const db=({current:t})=>t?t.ownerDocument.defaultView:null,SM=new WeakMap;class AM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hf(d,"page").point)},i=(d,h)=>{const{drag:p,dragPropagation:y,onDragStart:x}=this.getProps();if(p&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=IA(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wn(T=>{let w=this.getAxisMotionValue(T).get()||0;if(Jn.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[T];_&&(w=mn(_)*(parseFloat(w)/100))}}this.originPoint[T]=w}),x&&Pe.update(()=>x(d,h),!1,!0);const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:x,onDrag:E}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:T}=h;if(y&&this.currentDirection===null){this.currentDirection=bM(T),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),E&&E(d,h)},a=(d,h)=>this.stop(d,h),l=()=>wn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new ib(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:db(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Pe.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ju(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=fM(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Ro(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=pM(s.layoutBox,n):this.constraints=!1,this.elastic=vM(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&wn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=yM(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ro(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=IM(r,s.root,this.visualElement.getTransformPagePoint());let o=mM(s.layout.layoutBox,i);if(n){const a=n(_M(o));this.hasMutatedConstraints=!!a,a&&(o=ab(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=wn(d=>{if(!Ju(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const p=s?200:1e6,y=s?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(b0(e,r,0,n))}stopAnimation(){wn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wn(n=>{const{drag:r}=this.getProps();if(!Ju(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ze(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ro(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=gM({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wn(o=>{if(!Ju(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ze(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;SM.set(this.visualElement,this);const e=this.visualElement.current,n=vr(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ro(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=fr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(wn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=xg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ju(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function bM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kM extends Bs{constructor(e){super(e),this.removeGroupControls=Qe,this.removeListeners=Qe,this.controls=new AM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const ex=t=>(e,n)=>{t&&Pe.update(()=>t(e,n))};class PM extends Bs{constructor(){super(...arguments),this.removePointerDownListener=Qe}onPointerDown(e){this.session=new ib(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:db(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ex(e),onStart:ex(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Pe.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=vr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function RM(){const t=C.useContext(af);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=C.useId();return C.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const wd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ll={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=tx(t,e.target.x),r=tx(t,e.target.y);return`${n}% ${r}%`}},CM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ks.parse(t);if(s.length>5)return r;const i=ks.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ze(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class NM extends Dc.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;FV(DM),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),wd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hb(t){const[e,n]=RM(),r=C.useContext(f0);return Dc.createElement(NM,{...t,layoutGroup:r,switchLayoutGroup:C.useContext(aA),isPresent:e,safeToRemove:n})}const DM={borderRadius:{...ll,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomLeftRadius:ll,borderBottomRightRadius:ll,boxShadow:CM},fb=["TopLeft","TopRight","BottomLeft","BottomRight"],VM=fb.length,nx=t=>typeof t=="string"?parseFloat(t):t,rx=t=>typeof t=="number"||ne.test(t);function jM(t,e,n,r,s,i){s?(t.opacity=ze(0,n.opacity!==void 0?n.opacity:1,MM(r)),t.opacityExit=ze(e.opacity!==void 0?e.opacity:1,0,OM(r))):i&&(t.opacity=ze(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<VM;o++){const a=`border${fb[o]}Radius`;let l=sx(e,a),c=sx(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||rx(l)===rx(c)?(t[a]=Math.max(ze(nx(l),nx(c),r),0),(Jn.test(c)||Jn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function sx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MM=pb(0,.5,MA),OM=pb(.5,.95,Qe);function pb(t,e,n){return r=>r<t?0:r>e?1:n(mc(t,e,r))}function ix(t,e){t.min=e.min,t.max=e.max}function _n(t,e){ix(t.x,e.x),ix(t.y,e.y)}function ox(t,e,n,r,s){return t-=e,t=gh(t,1/n,r),s!==void 0&&(t=gh(t,1/s,r)),t}function LM(t,e=0,n=1,r=.5,s,i=t,o=t){if(Jn.test(e)&&(e=parseFloat(e),e=ze(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ze(i.min,i.max,r);t===i&&(a-=e),t.min=ox(t.min,e,n,a,s),t.max=ox(t.max,e,n,a,s)}function ax(t,e,[n,r,s],i,o){LM(t,e[n],e[r],e[s],e.scale,i,o)}const FM=["x","scaleX","originX"],UM=["y","scaleY","originY"];function lx(t,e,n,r){ax(t.x,e,FM,n?n.x:void 0,r?r.x:void 0),ax(t.y,e,UM,n?n.y:void 0,r?r.y:void 0)}function cx(t){return t.translate===0&&t.scale===1}function mb(t){return cx(t.x)&&cx(t.y)}function BM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function gb(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function ux(t){return mn(t.x)/mn(t.y)}class $M{constructor(){this.members=[]}add(e){k0(this.members,e),e.scheduleRender()}remove(e){if(P0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dx(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const zM=(t,e)=>t.depth-e.depth;class qM{constructor(){this.children=[],this.isDirty=!1}add(e){k0(this.children,e),this.isDirty=!0}remove(e){P0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zM),this.isDirty=!1,this.children.forEach(e)}}function WM(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ir(r),t(i-e))};return Pe.read(r,!0),()=>Ir(r)}function GM(t){window.MotionDebug&&window.MotionDebug.record(t)}function HM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function KM(t,e,n){const r=sn(t)?t:Zo(t);return r.start(b0("",r,e,n)),r.animation}const hx=["","X","Y","Z"],QM={visibility:"hidden"},fx=1e3;let XM=0;const si={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function yb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=XM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,si.totalNodes=si.resolvedTargetDeltas=si.recalculatedProjection=0,this.nodes.forEach(ZM),this.nodes.forEach(sO),this.nodes.forEach(iO),this.nodes.forEach(eO),GM(si)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new R0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=HM(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=WM(p,250),wd.hasAnimatedSinceResize&&(wd.hasAnimatedSinceResize=!1,this.nodes.forEach(mx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||d.getDefaultTransition()||uO,{onLayoutAnimationStart:T,onLayoutAnimationComplete:w}=d.getProps(),v=!this.targetLayout||!gb(this.targetLayout,x)||y,_=!p&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const k={...A0(E,"layout"),onPlay:T,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||mx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oO),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(px);return}this.isUpdating||this.nodes.forEach(nO),this.isUpdating=!1,this.nodes.forEach(rO),this.nodes.forEach(JM),this.nodes.forEach(YM),this.clearAllSnapshots();const a=performance.now();Dt.delta=bs(0,1e3/60,a-Dt.timestamp),Dt.timestamp=a,Dt.isProcessing=!0,$p.update.process(Dt),$p.preRender.process(Dt),$p.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tO),this.sharedNodes.forEach(aO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!mb(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||ri(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),dO(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return rt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Kr(a.x,l.offset.x),Kr(a.y,l.offset.y)),a}removeElementScroll(o){const a=rt();_n(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){_n(a,o);const{scroll:p}=this.root;p&&(Kr(a.x,-p.offset.x),Kr(a.y,-p.offset.y))}Kr(a.x,d.offset.x),Kr(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=rt();_n(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Do(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ri(d.latestValues)&&Do(l,d.latestValues)}return ri(this.latestValues)&&Do(l,this.latestValues),l}removeTransform(o){const a=rt();_n(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ri(c.latestValues))continue;Tg(c.latestValues)&&c.updateSnapshot();const d=rt(),h=c.measurePageBox();_n(d,h),lx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ri(this.latestValues)&&lx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),jl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_n(this.target,this.layout.layoutBox),cb(this.target,this.targetDelta)):_n(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),jl(this.relativeTargetOrigin,this.target,y.target),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}si.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Tg(this.parent.latestValues)||lb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;_n(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;xM(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=No(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=No(),this.projectionDeltaWithTransform=No());const E=this.projectionTransform;Vl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=dx(this.projectionDelta,this.treeScale),(this.projectionTransform!==E||this.treeScale.x!==p||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),si.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=No();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=rt(),y=l?l.source:void 0,x=this.layout?this.layout.source:void 0,E=y!==x,T=this.getStack(),w=!T||T.members.length<=1,v=!!(E&&!w&&this.options.crossfade===!0&&!this.path.some(cO));this.animationProgress=0;let _;this.mixTargetDelta=k=>{const D=k/1e3;gx(h.x,o.x,D),gx(h.y,o.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lO(this.relativeTarget,this.relativeTargetOrigin,p,D),_&&BM(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=rt()),_n(_,this.relativeTarget)),E&&(this.animationValues=d,jM(d,c,this.latestValues,D,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{wd.hasAnimatedSinceResize=!0,this.currentAnimation=KM(0,fx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&vb(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||rt();const h=mn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=mn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}_n(a,l),Do(a,d),Vl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $M),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<hx.length;d++){const h="rotate"+hx[d];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QM;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=_d(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=_d(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ri(this.latestValues)&&(E.transform=d?d({},""):"none",this.hasProjected=!1),E}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=dx(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:y,y:x}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in ch){if(p[E]===void 0)continue;const{correct:T,applyTo:w}=ch[E],v=c.transform==="none"?p[E]:T(p[E],h);if(w){const _=w.length;for(let k=0;k<_;k++)c[w[k]]=v}else c[E]=v}return this.options.layoutId&&(c.pointerEvents=h===this?_d(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(px),this.root.sharedNodes.clear()}}}function JM(t){t.updateLayout()}function YM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?wn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],y=mn(p);p.min=r[h].min,p.max=p.min+y}):vb(i,n.layoutBox,r)&&wn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],y=mn(r[h]);p.max=p.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const a=No();Vl(a,r,n.layoutBox);const l=No();o?Vl(l,t.applyTransform(s,!0),n.measuredBox):Vl(l,r,n.layoutBox);const c=!mb(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:y}=h;if(p&&y){const x=rt();jl(x,n.layoutBox,p.layoutBox);const E=rt();jl(E,r,y.layoutBox),gb(x,E)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function ZM(t){si.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tO(t){t.clearSnapshot()}function px(t){t.clearMeasurements()}function nO(t){t.isLayoutDirty=!1}function rO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function sO(t){t.resolveTargetDelta()}function iO(t){t.calcProjection()}function oO(t){t.resetRotation()}function aO(t){t.removeLeadSnapshot()}function gx(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yx(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function lO(t,e,n,r){yx(t.x,e.x,n.x,r),yx(t.y,e.y,n.y,r)}function cO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uO={duration:.45,ease:[.4,0,.1,1]},vx=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),_x=vx("applewebkit/")&&!vx("chrome/")?Math.round:Qe;function wx(t){t.min=_x(t.min),t.max=_x(t.max)}function dO(t){wx(t.x),wx(t.y)}function vb(t,e,n){return t==="position"||t==="preserve-aspect"&&!wg(ux(e),ux(n),.2)}const hO=yb({attachResizeListener:(t,e)=>fr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zp={current:void 0},_b=yb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zp.current){const t=new hO({});t.mount(window),t.setOptions({layoutScroll:!0}),Zp.current=t}return Zp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),fO={pan:{Feature:PM},drag:{Feature:kM,ProjectionNode:_b,MeasureLayout:hb}},pO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function mO(t){const e=pO.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Ig(t,e,n=1){const[r,s]=mO(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return tb(o)?parseFloat(o):o}else return fg(s)?Ig(s,e,n+1):s}function gO(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!fg(i))return;const o=Ig(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!fg(i))continue;const o=Ig(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const yO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),wb=t=>yO.has(t),vO=t=>Object.keys(t).some(wb),xx=t=>t===Ki||t===ne,Tx=(t,e)=>parseFloat(t.split(", ")[e]),Ex=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Tx(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Tx(i[1],t):0}},_O=new Set(["x","y","z"]),wO=Lc.filter(t=>!_O.has(t));function xO(t){const e=[];return wO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ea={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ex(4,13),y:Ex(5,14)};ea.translateX=ea.x;ea.translateY=ea.y;const TO=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=ea[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=ea[c](l,i)}),t},EO=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(wb);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=al(d);const p=e[l];let y;if(dh(p)){const x=p.length,E=p[0]===null?1:0;d=p[E],h=al(d);for(let T=E;T<x&&p[T]!==null;T++)y?x0(al(p[T])===y):y=al(p[T])}else y=al(p);if(h!==y)if(xx(h)&&xx(y)){const x=c.get();typeof x=="string"&&c.set(parseFloat(x)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&y===ne&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(y!=null&&y.transform)&&(d===0||p===0)?d===0?c.set(y.transform(d)):e[l]=h.transform(p):(o||(i=xO(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=TO(e,t,a);return i.length&&i.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),lf&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function IO(t,e,n,r){return vO(e)?EO(t,e,n,r):{target:e,transitionEnd:r}}const SO=(t,e,n,r)=>{const s=gO(t,e,r);return e=s.target,r=s.transitionEnd,IO(t,e,n,r)},Sg={current:null},xb={current:!1};function AO(){if(xb.current=!0,!!lf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sg.current=t.matches;t.addListener(e),e()}else Sg.current=!1}function bO(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(sn(i))t.addValue(s,i),mh(r)&&r.add(s);else if(sn(o))t.addValue(s,Zo(i,{owner:t})),mh(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Zo(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Ix=new WeakMap,Tb=Object.keys(pc),kO=Tb.length,Sx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],PO=h0.length;class RO{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pe.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=uf(n),this.isVariantNode=oA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const p=d[h];a[h]!==void 0&&sn(p)&&(p.set(a[h],!1),mh(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Ix.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xb.current||AO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ix.delete(this.current),this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Hi.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<kO;l++){const c=Tb[l],{isEnabled:d,Feature:h,ProjectionNode:p,MeasureLayout:y}=pc[c];p&&(o=p),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:h,layoutScroll:p,layoutRoot:y}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||h&&Ro(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Sx.length;r++){const s=Sx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=bO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<PO;r++){const s=h0[r],i=this.props[s];(fc(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zo(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=w0(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!sn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new R0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Eb extends RO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Hj(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){Wj(this,r,o);const a=SO(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function CO(t){return window.getComputedStyle(t)}class NO extends Eb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Hi.has(n)){const r=S0(n);return r&&r.default||0}else{const r=CO(e),s=(uA(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ub(e,n)}build(e,n,r,s){m0(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return _0(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){gA(e,n,r,s)}}class DO extends Eb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Hi.has(n)){const r=S0(n);return r&&r.default||0}return n=yA.has(n)?n:u0(n),e.getAttribute(n)}measureInstanceViewportBox(){return rt()}scrapeMotionValuesFromProps(e,n){return _A(e,n)}build(e,n,r,s){y0(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){vA(e,n,r,s)}mount(e){this.isSVGTag=v0(e.tagName),super.mount(e)}}const VO=(t,e)=>p0(t)?new DO(e,{enableHardwareAcceleration:!1}):new NO(e,{enableHardwareAcceleration:!0}),jO={layout:{ProjectionNode:_b,MeasureLayout:hb}},MO={...lM,...k4,...fO,...jO},Ee=OV((t,e)=>m4(t,e,MO,VO));function Ib(){const t=C.useRef(!1);return c0(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function OO(){const t=Ib(),[e,n]=C.useState(0),r=C.useCallback(()=>{t.current&&n(e+1)},[e]);return[C.useCallback(()=>Pe.postRender(r),[r]),e]}class LO extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FO({children:t,isPresent:e}){const n=C.useId(),r=C.useRef(null),s=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),C.createElement(LO,{isPresent:e,childRef:r,sizeRef:s},C.cloneElement(t,{ref:r}))}const em=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=wA(UO),l=C.useId(),c=C.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[n]);return C.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),C.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=C.createElement(FO,{isPresent:n},t)),C.createElement(af.Provider,{value:c},t)};function UO(){return new Map}function BO(t){return C.useEffect(()=>()=>t(),[])}const ii=t=>t.key||"";function $O(t,e){t.forEach(n=>{const r=ii(n);e.set(r,n)})}function zO(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const qO=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=C.useContext(f0).forceRender||OO()[0],l=Ib(),c=zO(t);let d=c;const h=C.useRef(new Map).current,p=C.useRef(d),y=C.useRef(new Map).current,x=C.useRef(!0);if(c0(()=>{x.current=!1,$O(c,y),p.current=d}),BO(()=>{x.current=!0,y.clear(),h.clear()}),x.current)return C.createElement(C.Fragment,null,d.map(v=>C.createElement(em,{key:ii(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));d=[...d];const E=p.current.map(ii),T=c.map(ii),w=E.length;for(let v=0;v<w;v++){const _=E[v];T.indexOf(_)===-1&&!h.has(_)&&h.set(_,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((v,_)=>{if(T.indexOf(_)!==-1)return;const k=y.get(_);if(!k)return;const D=E.indexOf(_);let O=v;if(!O){const A=()=>{h.delete(_);const I=Array.from(y.keys()).filter(b=>!T.includes(b));if(I.forEach(b=>y.delete(b)),p.current=c.filter(b=>{const P=ii(b);return P===_||I.includes(P)}),!h.size){if(l.current===!1)return;a(),r&&r()}};O=C.createElement(em,{key:ii(k),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:i,mode:o},k),h.set(_,O)}d.splice(D,0,O)}),d=d.map(v=>{const _=v.key;return h.has(_)?v:C.createElement(em,{key:ii(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),C.createElement(C.Fragment,null,h.size?d:d.map(v=>C.cloneElement(v)))};var WO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ie=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>C.createElement("svg",{ref:c,...WO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${GO(t)}`,...l},[...e.map(([d,h])=>C.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},yi=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),HO=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ml=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ag=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ax=ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Sb=ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),KO=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ri=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),$c=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),zc=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),QO=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),XO=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ol=ie("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),JO=ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),YO=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ps=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ab=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ZO=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),eL=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),tL=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),bx=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),nL=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),rL=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),sL=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),iL=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),oL=ie("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),aL=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),lL=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),cL=ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),kx=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),bg=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),uL=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),bb=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),dL=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),hL=ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),kg=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),fL=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),pL=ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),mL=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Zs=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),cr=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),kb=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Pb=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rb=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Px={"2025-01-06":{placement:{total_last_tue_fri:2628,total_prev_tue_fri:2233,total_last_year_tue_fri:2885,wow_pct:17.69,yoy_pct:-8.91},onlinePlatform:{last_week_revenue_jpy:3772444054,two_weeks_ago_revenue_jpy:3913828382,last_year_last_week_revenue_jpy:2451234374,wow_pct:-3.6,yoy_pct:53.9}},"2025-01-13":{placement:{total_last_tue_fri:2851,total_prev_tue_fri:2628,total_last_year_tue_fri:3012,wow_pct:8.48,yoy_pct:-5.34},onlinePlatform:{last_week_revenue_jpy:3845622187,two_weeks_ago_revenue_jpy:3772444054,last_year_last_week_revenue_jpy:2398765432,wow_pct:1.9,yoy_pct:60.3}},"2025-06-30":{placement:{total_last_tue_fri:2759,total_prev_tue_fri:2637,total_last_year_tue_fri:3045,wow_pct:4.6,yoy_pct:-9.4},onlinePlatform:{last_week_revenue_jpy:3329185872,two_weeks_ago_revenue_jpy:3772444054,last_year_last_week_revenue_jpy:2542508931,wow_pct:-11.7,yoy_pct:30.9}},"2025-07-07":{placement:{total_last_tue_fri:2296,total_prev_tue_fri:2810,total_last_year_tue_fri:2184,wow_pct:-18.29,yoy_pct:5.13},onlinePlatform:{last_week_revenue_jpy:3323543838,two_weeks_ago_revenue_jpy:3733520952,last_year_last_week_revenue_jpy:2319913134,wow_pct:-11,yoy_pct:43.3}},"2025-07-14":{placement:{total_last_tue_fri:2468,total_prev_tue_fri:2333,total_last_year_tue_fri:3280,wow_pct:5.79,yoy_pct:-24.76},onlinePlatform:{last_week_revenue_jpy:3813879742,two_weeks_ago_revenue_jpy:3323543838,last_year_last_week_revenue_jpy:2508542528,wow_pct:14.8,yoy_pct:52}},"2025-07-28":{placement:{total_last_tue_fri:2226,total_prev_tue_fri:2205,total_last_year_tue_fri:2305,wow_pct:.95,yoy_pct:-3.43},onlinePlatform:{last_week_revenue_jpy:3326052263,two_weeks_ago_revenue_jpy:3427002173,last_year_last_week_revenue_jpy:2511351321,wow_pct:-2.9,yoy_pct:32.4}},"2025-08-04":{placement:{total_last_tue_fri:2713,total_prev_tue_fri:2286,total_last_year_tue_fri:2838,wow_pct:18.68,yoy_pct:-4.4},onlinePlatform:{last_week_revenue_jpy:3079100882,two_weeks_ago_revenue_jpy:3326052263,last_year_last_week_revenue_jpy:2554357376,wow_pct:-7.4,yoy_pct:20.5}},"2025-08-11":{placement:{total_last_tue_fri:36,total_prev_tue_fri:3265,total_last_year_tue_fri:59,wow_pct:-98.9,yoy_pct:-39},onlinePlatform:{last_week_revenue_jpy:295609e4,two_weeks_ago_revenue_jpy:3692177722,last_year_last_week_revenue_jpy:2401536015,wow_pct:-19.9,yoy_pct:23.1}}},gL=async t=>{const n=Px[t||"2025-08-11"]||Px["2025-08-11"],r=n.placement,s=n.onlinePlatform;return{placement:{current:r.total_last_tue_fri,previous:r.total_prev_tue_fri,lastYear:r.total_last_year_tue_fri,wowPercent:r.wow_pct,yoyPercent:r.yoy_pct},onlinePlatform:{current:s.last_week_revenue_jpy,previous:s.two_weeks_ago_revenue_jpy,lastYear:s.last_year_last_week_revenue_jpy,wowPercent:s.wow_pct,yoyPercent:s.yoy_pct}}},yL=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(n[d],n[h],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new _L;const p=i<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),h!==64){const x=c<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wL=function(t){const e=Cb(t);return Nb.encodeByteArray(e,!0)},yh=function(t){return wL(t).replace(/\./g,"")},Db=function(t){try{return Nb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=()=>Vb().__FIREBASE_DEFAULTS__,TL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Db(t[1]);return e&&JSON.parse(e)},pf=()=>{try{return yL()||xL()||TL()||EL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jb=t=>{var e,n;return(n=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IL=t=>{const e=jb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mb=()=>{var t;return(t=pf())===null||t===void 0?void 0:t.config},Ob=t=>{var e;return(e=pf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[yh(JSON.stringify(n)),yh(JSON.stringify(o)),a].join(".")}const Ll={};function bL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?t.emulator.push(e):t.prod.push(e);return t}function kL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rx=!1;function Lb(t,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Ll[t]===e||Ll[t]||Rx)return;Ll[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=bL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Rx=!0,o()},p}function d(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=kL(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),T=document.getElementById(E)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;a(_),d(T,E);const k=c();l(v,w),_.append(v,x,T,k),document.body.appendChild(_)}i?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function Fb(){var t;const e=(t=pf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DL(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ub(){return!Fb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bb(){return!Fb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function $b(){try{return typeof indexedDB=="object"}catch{return!1}}function VL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jL,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ML(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Nr(s,a,r)}}function ML(t,e){return t.replace(OL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OL=/\{\$([^}]+)}/g;function LL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Un(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Cx(i)&&Cx(o)){if(!Un(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FL(t,e){const n=new UL(t,e);return n.subscribe.bind(n)}class UL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=tm),s.error===void 0&&(s.error=tm),s.complete===void 0&&(s.complete=tm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class Ci{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qL(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zL(t){return t===oi?void 0:t}function qL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const GL={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},HL=he.INFO,KL={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},QL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class N0{constructor(e){this.name=e,this._logLevel=HL,this._logHandler=QL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const XL=(t,e)=>e.some(n=>t instanceof n);let Nx,Dx;function JL(){return Nx||(Nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YL(){return Dx||(Dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zb=new WeakMap,Pg=new WeakMap,qb=new WeakMap,nm=new WeakMap,D0=new WeakMap;function ZL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zb.set(n,t)}).catch(()=>{}),D0.set(e,t),e}function e5(t){if(Pg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Pg.set(t,e)}let Rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t5(t){Rg=t(Rg)}function n5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rm(this),e,...n);return qb.set(r,e.sort?e.sort():[e]),ws(r)}:YL().includes(t)?function(...e){return t.apply(rm(this),e),ws(zb.get(this))}:function(...e){return ws(t.apply(rm(this),e))}}function r5(t){return typeof t=="function"?n5(t):(t instanceof IDBTransaction&&e5(t),XL(t,JL())?new Proxy(t,Rg):t)}function ws(t){if(t instanceof IDBRequest)return ZL(t);if(nm.has(t))return nm.get(t);const e=r5(t);return e!==t&&(nm.set(t,e),D0.set(e,t)),e}const rm=t=>D0.get(t);function s5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ws(o.result),l.oldVersion,l.newVersion,ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const i5=["get","getKey","getAll","getAllKeys","count"],o5=["put","add","delete","clear"],sm=new Map;function Vx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=o5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return sm.set(e,i),i}t5(t=>({...t,get:(e,n,r)=>Vx(e,n)||t.get(e,n,r),has:(e,n)=>!!Vx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cg="@firebase/app",jx="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new N0("@firebase/app"),c5="@firebase/app-compat",u5="@firebase/analytics-compat",d5="@firebase/analytics",h5="@firebase/app-check-compat",f5="@firebase/app-check",p5="@firebase/auth",m5="@firebase/auth-compat",g5="@firebase/database",y5="@firebase/data-connect",v5="@firebase/database-compat",_5="@firebase/functions",w5="@firebase/functions-compat",x5="@firebase/installations",T5="@firebase/installations-compat",E5="@firebase/messaging",I5="@firebase/messaging-compat",S5="@firebase/performance",A5="@firebase/performance-compat",b5="@firebase/remote-config",k5="@firebase/remote-config-compat",P5="@firebase/storage",R5="@firebase/storage-compat",C5="@firebase/firestore",N5="@firebase/ai",D5="@firebase/firestore-compat",V5="firebase",j5="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",M5={[Cg]:"fire-core",[c5]:"fire-core-compat",[d5]:"fire-analytics",[u5]:"fire-analytics-compat",[f5]:"fire-app-check",[h5]:"fire-app-check-compat",[p5]:"fire-auth",[m5]:"fire-auth-compat",[g5]:"fire-rtdb",[y5]:"fire-data-connect",[v5]:"fire-rtdb-compat",[_5]:"fire-fn",[w5]:"fire-fn-compat",[x5]:"fire-iid",[T5]:"fire-iid-compat",[E5]:"fire-fcm",[I5]:"fire-fcm-compat",[S5]:"fire-perf",[A5]:"fire-perf-compat",[b5]:"fire-rc",[k5]:"fire-rc-compat",[P5]:"fire-gcs",[R5]:"fire-gcs-compat",[C5]:"fire-fst",[D5]:"fire-fst-compat",[N5]:"fire-vertex","fire-js":"fire-js",[V5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,O5=new Map,Ng=new Map;function Mx(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ta(t){const e=t.name;if(Ng.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,t);for(const n of _h.values())Mx(n,t);for(const n of O5.values())Mx(n,t);return!0}function Gc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L5(t,e,n=vh){Gc(t,e).clearInstance(n)}function Gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new qc("app","Firebase",F5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=j5;function Wb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(n||(n=Mb()),!n)throw xs.create("no-options");const i=_h.get(s);if(i){if(Un(n,i.options)&&Un(r,i.config))return i;throw xs.create("duplicate-app",{appName:s})}const o=new WL(s);for(const l of Ng.values())o.addComponent(l);const a=new U5(n,r,o);return _h.set(s,a),a}function Gb(t=vh){const e=_h.get(t);if(!e&&t===vh&&Mb())return Wb();if(!e)throw xs.create("no-app",{appName:t});return e}function Ts(t,e,n){var r;let s=(r=M5[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}ta(new Ci(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5="firebase-heartbeat-database",$5=1,gc="firebase-heartbeat-store";let im=null;function Hb(){return im||(im=s5(B5,$5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),im}async function z5(t){try{const n=(await Hb()).transaction(gc),r=await n.objectStore(gc).get(Kb(t));return await n.done,r}catch(e){if(e instanceof Nr)Sr.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function Ox(t,e){try{const r=(await Hb()).transaction(gc,"readwrite");await r.objectStore(gc).put(e,Kb(t)),await r.done}catch(n){if(n instanceof Nr)Sr.warn(n.message);else{const r=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(r.message)}}}function Kb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=1024,W5=30;class G5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>W5){const o=Q5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lx(),{heartbeatsToSend:r,unsentEntries:s}=H5(this._heartbeatsCache.heartbeats),i=yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Sr.warn(n),""}}}function Lx(){return new Date().toISOString().substring(0,10)}function H5(t,e=q5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Fx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $b()?VL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ox(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ox(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fx(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}function Q5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t){ta(new Ci("platform-logger",e=>new a5(e),"PRIVATE")),ta(new Ci("heartbeat",e=>new G5(e),"PRIVATE")),Ts(Cg,jx,t),Ts(Cg,jx,"esm2017"),Ts("fire-js","")}X5("");var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Qb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function b(){}b.prototype=I.prototype,A.D=I.prototype,A.prototype=new b,A.prototype.constructor=A,A.C=function(P,N,V){for(var R=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)R[_e-2]=arguments[_e];return I.prototype[N].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,I,b){b||(b=0);var P=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)P[N]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(N=0;16>N;++N)P[N]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=A.g[0],b=A.g[1],N=A.g[2];var V=A.g[3],R=I+(V^b&(N^V))+P[0]+3614090360&4294967295;I=b+(R<<7&4294967295|R>>>25),R=V+(N^I&(b^N))+P[1]+3905402710&4294967295,V=I+(R<<12&4294967295|R>>>20),R=N+(b^V&(I^b))+P[2]+606105819&4294967295,N=V+(R<<17&4294967295|R>>>15),R=b+(I^N&(V^I))+P[3]+3250441966&4294967295,b=N+(R<<22&4294967295|R>>>10),R=I+(V^b&(N^V))+P[4]+4118548399&4294967295,I=b+(R<<7&4294967295|R>>>25),R=V+(N^I&(b^N))+P[5]+1200080426&4294967295,V=I+(R<<12&4294967295|R>>>20),R=N+(b^V&(I^b))+P[6]+2821735955&4294967295,N=V+(R<<17&4294967295|R>>>15),R=b+(I^N&(V^I))+P[7]+4249261313&4294967295,b=N+(R<<22&4294967295|R>>>10),R=I+(V^b&(N^V))+P[8]+1770035416&4294967295,I=b+(R<<7&4294967295|R>>>25),R=V+(N^I&(b^N))+P[9]+2336552879&4294967295,V=I+(R<<12&4294967295|R>>>20),R=N+(b^V&(I^b))+P[10]+4294925233&4294967295,N=V+(R<<17&4294967295|R>>>15),R=b+(I^N&(V^I))+P[11]+2304563134&4294967295,b=N+(R<<22&4294967295|R>>>10),R=I+(V^b&(N^V))+P[12]+1804603682&4294967295,I=b+(R<<7&4294967295|R>>>25),R=V+(N^I&(b^N))+P[13]+4254626195&4294967295,V=I+(R<<12&4294967295|R>>>20),R=N+(b^V&(I^b))+P[14]+2792965006&4294967295,N=V+(R<<17&4294967295|R>>>15),R=b+(I^N&(V^I))+P[15]+1236535329&4294967295,b=N+(R<<22&4294967295|R>>>10),R=I+(N^V&(b^N))+P[1]+4129170786&4294967295,I=b+(R<<5&4294967295|R>>>27),R=V+(b^N&(I^b))+P[6]+3225465664&4294967295,V=I+(R<<9&4294967295|R>>>23),R=N+(I^b&(V^I))+P[11]+643717713&4294967295,N=V+(R<<14&4294967295|R>>>18),R=b+(V^I&(N^V))+P[0]+3921069994&4294967295,b=N+(R<<20&4294967295|R>>>12),R=I+(N^V&(b^N))+P[5]+3593408605&4294967295,I=b+(R<<5&4294967295|R>>>27),R=V+(b^N&(I^b))+P[10]+38016083&4294967295,V=I+(R<<9&4294967295|R>>>23),R=N+(I^b&(V^I))+P[15]+3634488961&4294967295,N=V+(R<<14&4294967295|R>>>18),R=b+(V^I&(N^V))+P[4]+3889429448&4294967295,b=N+(R<<20&4294967295|R>>>12),R=I+(N^V&(b^N))+P[9]+568446438&4294967295,I=b+(R<<5&4294967295|R>>>27),R=V+(b^N&(I^b))+P[14]+3275163606&4294967295,V=I+(R<<9&4294967295|R>>>23),R=N+(I^b&(V^I))+P[3]+4107603335&4294967295,N=V+(R<<14&4294967295|R>>>18),R=b+(V^I&(N^V))+P[8]+1163531501&4294967295,b=N+(R<<20&4294967295|R>>>12),R=I+(N^V&(b^N))+P[13]+2850285829&4294967295,I=b+(R<<5&4294967295|R>>>27),R=V+(b^N&(I^b))+P[2]+4243563512&4294967295,V=I+(R<<9&4294967295|R>>>23),R=N+(I^b&(V^I))+P[7]+1735328473&4294967295,N=V+(R<<14&4294967295|R>>>18),R=b+(V^I&(N^V))+P[12]+2368359562&4294967295,b=N+(R<<20&4294967295|R>>>12),R=I+(b^N^V)+P[5]+4294588738&4294967295,I=b+(R<<4&4294967295|R>>>28),R=V+(I^b^N)+P[8]+2272392833&4294967295,V=I+(R<<11&4294967295|R>>>21),R=N+(V^I^b)+P[11]+1839030562&4294967295,N=V+(R<<16&4294967295|R>>>16),R=b+(N^V^I)+P[14]+4259657740&4294967295,b=N+(R<<23&4294967295|R>>>9),R=I+(b^N^V)+P[1]+2763975236&4294967295,I=b+(R<<4&4294967295|R>>>28),R=V+(I^b^N)+P[4]+1272893353&4294967295,V=I+(R<<11&4294967295|R>>>21),R=N+(V^I^b)+P[7]+4139469664&4294967295,N=V+(R<<16&4294967295|R>>>16),R=b+(N^V^I)+P[10]+3200236656&4294967295,b=N+(R<<23&4294967295|R>>>9),R=I+(b^N^V)+P[13]+681279174&4294967295,I=b+(R<<4&4294967295|R>>>28),R=V+(I^b^N)+P[0]+3936430074&4294967295,V=I+(R<<11&4294967295|R>>>21),R=N+(V^I^b)+P[3]+3572445317&4294967295,N=V+(R<<16&4294967295|R>>>16),R=b+(N^V^I)+P[6]+76029189&4294967295,b=N+(R<<23&4294967295|R>>>9),R=I+(b^N^V)+P[9]+3654602809&4294967295,I=b+(R<<4&4294967295|R>>>28),R=V+(I^b^N)+P[12]+3873151461&4294967295,V=I+(R<<11&4294967295|R>>>21),R=N+(V^I^b)+P[15]+530742520&4294967295,N=V+(R<<16&4294967295|R>>>16),R=b+(N^V^I)+P[2]+3299628645&4294967295,b=N+(R<<23&4294967295|R>>>9),R=I+(N^(b|~V))+P[0]+4096336452&4294967295,I=b+(R<<6&4294967295|R>>>26),R=V+(b^(I|~N))+P[7]+1126891415&4294967295,V=I+(R<<10&4294967295|R>>>22),R=N+(I^(V|~b))+P[14]+2878612391&4294967295,N=V+(R<<15&4294967295|R>>>17),R=b+(V^(N|~I))+P[5]+4237533241&4294967295,b=N+(R<<21&4294967295|R>>>11),R=I+(N^(b|~V))+P[12]+1700485571&4294967295,I=b+(R<<6&4294967295|R>>>26),R=V+(b^(I|~N))+P[3]+2399980690&4294967295,V=I+(R<<10&4294967295|R>>>22),R=N+(I^(V|~b))+P[10]+4293915773&4294967295,N=V+(R<<15&4294967295|R>>>17),R=b+(V^(N|~I))+P[1]+2240044497&4294967295,b=N+(R<<21&4294967295|R>>>11),R=I+(N^(b|~V))+P[8]+1873313359&4294967295,I=b+(R<<6&4294967295|R>>>26),R=V+(b^(I|~N))+P[15]+4264355552&4294967295,V=I+(R<<10&4294967295|R>>>22),R=N+(I^(V|~b))+P[6]+2734768916&4294967295,N=V+(R<<15&4294967295|R>>>17),R=b+(V^(N|~I))+P[13]+1309151649&4294967295,b=N+(R<<21&4294967295|R>>>11),R=I+(N^(b|~V))+P[4]+4149444226&4294967295,I=b+(R<<6&4294967295|R>>>26),R=V+(b^(I|~N))+P[11]+3174756917&4294967295,V=I+(R<<10&4294967295|R>>>22),R=N+(I^(V|~b))+P[2]+718787259&4294967295,N=V+(R<<15&4294967295|R>>>17),R=b+(V^(N|~I))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+V&4294967295}r.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var b=I-this.blockSize,P=this.B,N=this.h,V=0;V<I;){if(N==0)for(;V<=b;)s(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<I;)if(P[N++]=A.charCodeAt(V++),N==this.blockSize){s(this,P),N=0;break}}else for(;V<I;)if(P[N++]=A[V++],N==this.blockSize){s(this,P),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var b=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=b&255,b/=256;for(this.u(A),A=Array(16),I=b=0;4>I;++I)for(var P=0;32>P;P+=8)A[b++]=this.g[I]>>>P&255;return A};function i(A,I){var b=a;return Object.prototype.hasOwnProperty.call(b,A)?b[A]:b[A]=I(A)}function o(A,I){this.h=I;for(var b=[],P=!0,N=A.length-1;0<=N;N--){var V=A[N]|0;P&&V==I||(b[N]=V,P=!1)}this.g=b}var a={};function l(A){return-128<=A&&128>A?i(A,function(I){return new o([I|0],0>I?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return T(c(-A));for(var I=[],b=1,P=0;A>=b;P++)I[P]=A/b|0,b*=4294967296;return new o(I,0)}function d(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return T(d(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(I,8)),P=h,N=0;N<A.length;N+=8){var V=Math.min(8,A.length-N),R=parseInt(A.substring(N,N+V),I);8>V?(V=c(Math.pow(I,V)),P=P.j(V).add(c(R))):(P=P.j(b),P=P.add(c(R)))}return P}var h=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var A=0,I=1,b=0;b<this.g.length;b++){var P=this.i(b);A+=(0<=P?P:4294967296+P)*I,I*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x(this))return"0";if(E(this))return"-"+T(this).toString(A);for(var I=c(Math.pow(A,6)),b=this,P="";;){var N=k(b,I).g;b=w(b,N.j(I));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(A);if(b=N,x(b))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function x(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=w(this,A),E(A)?-1:x(A)?0:1};function T(A){for(var I=A.g.length,b=[],P=0;P<I;P++)b[P]=~A.g[P];return new o(b,~A.h).add(p)}t.abs=function(){return E(this)?T(this):this},t.add=function(A){for(var I=Math.max(this.g.length,A.g.length),b=[],P=0,N=0;N<=I;N++){var V=P+(this.i(N)&65535)+(A.i(N)&65535),R=(V>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);P=R>>>16,V&=65535,R&=65535,b[N]=R<<16|V}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(A,I){return A.add(T(I))}t.j=function(A){if(x(this)||x(A))return h;if(E(this))return E(A)?T(this).j(T(A)):T(T(this).j(A));if(E(A))return T(this.j(T(A)));if(0>this.l(y)&&0>A.l(y))return c(this.m()*A.m());for(var I=this.g.length+A.g.length,b=[],P=0;P<2*I;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<A.g.length;N++){var V=this.i(P)>>>16,R=this.i(P)&65535,_e=A.i(N)>>>16,St=A.i(N)&65535;b[2*P+2*N]+=R*St,v(b,2*P+2*N),b[2*P+2*N+1]+=V*St,v(b,2*P+2*N+1),b[2*P+2*N+1]+=R*_e,v(b,2*P+2*N+1),b[2*P+2*N+2]+=V*_e,v(b,2*P+2*N+2)}for(P=0;P<I;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=I;P<2*I;P++)b[P]=0;return new o(b,0)};function v(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function _(A,I){this.g=A,this.h=I}function k(A,I){if(x(I))throw Error("division by zero");if(x(A))return new _(h,h);if(E(A))return I=k(T(A),I),new _(T(I.g),T(I.h));if(E(I))return I=k(A,T(I)),new _(T(I.g),I.h);if(30<A.g.length){if(E(A)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var b=p,P=I;0>=P.l(A);)b=D(b),P=D(P);var N=O(b,1),V=O(P,1);for(P=O(P,2),b=O(b,2);!x(P);){var R=V.add(P);0>=R.l(A)&&(N=N.add(b),V=R),P=O(P,1),b=O(b,1)}return I=w(A,N.j(I)),new _(N,I)}for(N=h;0<=A.l(I);){for(b=Math.max(1,Math.floor(A.m()/I.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=c(b),R=V.j(I);E(R)||0<R.l(A);)b-=P,V=c(b),R=V.j(I);x(V)&&(V=p),N=N.add(V),A=w(A,R)}return new _(N,A)}t.A=function(A){return k(this,A).h},t.and=function(A){for(var I=Math.max(this.g.length,A.g.length),b=[],P=0;P<I;P++)b[P]=this.i(P)&A.i(P);return new o(b,this.h&A.h)},t.or=function(A){for(var I=Math.max(this.g.length,A.g.length),b=[],P=0;P<I;P++)b[P]=this.i(P)|A.i(P);return new o(b,this.h|A.h)},t.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),b=[],P=0;P<I;P++)b[P]=this.i(P)^A.i(P);return new o(b,this.h^A.h)};function D(A){for(var I=A.g.length+1,b=[],P=0;P<I;P++)b[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(b,A.h)}function O(A,I){var b=I>>5;I%=32;for(var P=A.g.length-b,N=[],V=0;V<P;V++)N[V]=0<I?A.i(V+b)>>>I|A.i(V+b+1)<<32-I:A.i(V+b);return new o(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Es=o}).apply(typeof Ux<"u"?Ux:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xb,_l,Jb,xd,Dg,Yb,Zb,e2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,g){return u==Array.prototype||u==Object.prototype||(u[m]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var j=u[S];if(!(j in g))break e;g=g[j]}u=u[u.length-1],S=g[u],m=m(S),m!=S&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}function i(u,m){u instanceof String&&(u+="");var g=0,S=!1,j={next:function(){if(!S&&g<u.length){var F=g++;return{value:m(F,u[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(u){return u||function(){return i(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function c(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,g){return u.call.apply(u.bind,arguments)}function h(u,m,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,S),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function p(u,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function y(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function x(u,m){function g(){}g.prototype=m.prototype,u.aa=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,j,F){for(var G=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)G[Se-2]=arguments[Se];return m.prototype[j].apply(S,G)}}function E(u){const m=u.length;if(0<m){const g=Array(m);for(let S=0;S<m;S++)g[S]=u[S];return g}return[]}function T(u,m){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const j=u.length||0,F=S.length||0;u.length=j+F;for(let G=0;G<F;G++)u[j+G]=S[G]}else u.push(S)}}class w{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var D=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function O(u,m,g){for(const S in u)m.call(g,u[S],S,u)}function A(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function I(u){const m={};for(const g in u)m[g]=u[g];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let g,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(g in S)u[g]=S[g];for(let F=0;F<b.length;F++)g=b[F],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function N(u){var m=1;u=u.split(":");const g=[];for(;0<m&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function V(u){a.setTimeout(()=>{throw u},0)}function R(){var u=Z;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class _e{constructor(){this.h=this.g=null}add(m,g){const S=St.get();S.set(m,g),this.h?this.h.next=S:this.g=S,this.h=S}}var St=new w(()=>new Ce,u=>u.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,H=!1,Z=new _e,se=()=>{const u=a.Promise.resolve(void 0);tt=()=>{u.then(te)}};var te=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(g){V(g)}var m=St;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}H=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return u}();function Qt(u,m){if(be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(D){e:{try{k(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Qt.aa.h.call(this)}}x(Qt,be);var vt={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),Y=0;function me(u,m,g,S,j){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!S,this.ha=j,this.key=++Y,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function At(u){this.src=u,this.g={},this.h=0}At.prototype.add=function(u,m,g,S,j){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var G=Gf(u,m,S,j);return-1<G?(m=u[G],g||(m.fa=!1)):(m=new me(m,this.src,F,!!S,j),m.fa=g,u.push(m)),m};function kn(u,m){var g=m.type;if(g in u.g){var S=u.g[g],j=Array.prototype.indexOf.call(S,m,void 0),F;(F=0<=j)&&Array.prototype.splice.call(S,j,1),F&&(oe(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Gf(u,m,g,S){for(var j=0;j<u.length;++j){var F=u[j];if(!F.da&&F.listener==m&&F.capture==!!g&&F.ha==S)return j}return-1}var Hf="closure_lm_"+(1e6*Math.random()|0),Kf={};function r_(u,m,g,S,j){if(S&&S.once)return i_(u,m,g,S,j);if(Array.isArray(m)){for(var F=0;F<m.length;F++)r_(u,m[F],g,S,j);return null}return g=Yf(g),u&&u[$]?u.K(m,g,c(S)?!!S.capture:!!S,j):s_(u,m,g,!1,S,j)}function s_(u,m,g,S,j,F){if(!m)throw Error("Invalid event type");var G=c(j)?!!j.capture:!!j,Se=Xf(u);if(Se||(u[Hf]=Se=new At(u)),g=Se.add(m,g,S,G,F),g.proxy)return g;if(S=SR(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)Kt||(j=G),j===void 0&&(j=!1),u.addEventListener(m.toString(),S,j);else if(u.attachEvent)u.attachEvent(a_(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function SR(){function u(g){return m.call(u.src,u.listener,g)}const m=AR;return u}function i_(u,m,g,S,j){if(Array.isArray(m)){for(var F=0;F<m.length;F++)i_(u,m[F],g,S,j);return null}return g=Yf(g),u&&u[$]?u.L(m,g,c(S)?!!S.capture:!!S,j):s_(u,m,g,!0,S,j)}function o_(u,m,g,S,j){if(Array.isArray(m))for(var F=0;F<m.length;F++)o_(u,m[F],g,S,j);else S=c(S)?!!S.capture:!!S,g=Yf(g),u&&u[$]?(u=u.i,m=String(m).toString(),m in u.g&&(F=u.g[m],g=Gf(F,g,S,j),-1<g&&(oe(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xf(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Gf(m,g,S,j)),(g=-1<u?m[u]:null)&&Qf(g))}function Qf(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[$])kn(m.i,u);else{var g=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(g,S,u.capture):m.detachEvent?m.detachEvent(a_(g),S):m.addListener&&m.removeListener&&m.removeListener(S),(g=Xf(m))?(kn(g,u),g.h==0&&(g.src=null,m[Hf]=null)):oe(u)}}}function a_(u){return u in Kf?Kf[u]:Kf[u]="on"+u}function AR(u,m){if(u.da)u=!0;else{m=new Qt(m,this);var g=u.listener,S=u.ha||u.src;u.fa&&Qf(u),u=g.call(S,m)}return u}function Xf(u){return u=u[Hf],u instanceof At?u:null}var Jf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yf(u){return typeof u=="function"?u:(u[Jf]||(u[Jf]=function(m){return u.handleEvent(m)}),u[Jf])}function bt(){pe.call(this),this.i=new At(this),this.M=this,this.F=null}x(bt,pe),bt.prototype[$]=!0,bt.prototype.removeEventListener=function(u,m,g,S){o_(this,u,m,g,S)};function Ut(u,m){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new be(m,u);else if(m instanceof be)m.target=m.target||u;else{var j=m;m=new be(S,u),P(m,j)}if(j=!0,g)for(var F=g.length-1;0<=F;F--){var G=m.g=g[F];j=mu(G,S,!0,m)&&j}if(G=m.g=u,j=mu(G,S,!0,m)&&j,j=mu(G,S,!1,m)&&j,g)for(F=0;F<g.length;F++)G=m.g=g[F],j=mu(G,S,!1,m)&&j}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var g=u.g[m],S=0;S<g.length;S++)oe(g[S]);delete u.g[m],u.h--}}this.F=null},bt.prototype.K=function(u,m,g,S){return this.i.add(String(u),m,!1,g,S)},bt.prototype.L=function(u,m,g,S){return this.i.add(String(u),m,!0,g,S)};function mu(u,m,g,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,F=0;F<m.length;++F){var G=m[F];if(G&&!G.da&&G.capture==g){var Se=G.listener,_t=G.ha||G.src;G.fa&&kn(u.i,G),j=Se.call(_t,S)!==!1&&j}}return j&&!S.defaultPrevented}function l_(u,m,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function c_(u){u.g=l_(()=>{u.g=null,u.i&&(u.i=!1,c_(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bR extends pe{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:c_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ua(u){pe.call(this),this.h=u,this.g={}}x(Ua,pe);var u_=[];function d_(u){O(u.g,function(m,g){this.g.hasOwnProperty(g)&&Qf(m)},u),u.g={}}Ua.prototype.N=function(){Ua.aa.N.call(this),d_(this)},Ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zf=a.JSON.stringify,kR=a.JSON.parse,PR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ep(){}ep.prototype.h=null;function h_(u){return u.h||(u.h=u.i())}function f_(){}var Ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tp(){be.call(this,"d")}x(tp,be);function np(){be.call(this,"c")}x(np,be);var Ks={},p_=null;function gu(){return p_=p_||new bt}Ks.La="serverreachability";function m_(u){be.call(this,Ks.La,u)}x(m_,be);function $a(u){const m=gu();Ut(m,new m_(m))}Ks.STAT_EVENT="statevent";function g_(u,m){be.call(this,Ks.STAT_EVENT,u),this.stat=m}x(g_,be);function Bt(u){const m=gu();Ut(m,new g_(m,u))}Ks.Ma="timingevent";function y_(u,m){be.call(this,Ks.Ma,u),this.size=m}x(y_,be);function za(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function qa(){this.g=!0}qa.prototype.xa=function(){this.g=!1};function RR(u,m,g,S,j,F){u.info(function(){if(u.g)if(F)for(var G="",Se=F.split("&"),_t=0;_t<Se.length;_t++){var ve=Se[_t].split("=");if(1<ve.length){var kt=ve[0];ve=ve[1];var Pt=kt.split("_");G=2<=Pt.length&&Pt[1]=="type"?G+(kt+"="+ve+"&"):G+(kt+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+m+`
`+g+`
`+G})}function CR(u,m,g,S,j,F,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+m+`
`+g+`
`+F+" "+G})}function no(u,m,g,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+DR(u,g)+(S?" "+S:"")})}function NR(u,m){u.info(function(){return"TIMEOUT: "+m})}qa.prototype.info=function(){};function DR(u,m){if(!u.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var j=S[1];if(Array.isArray(j)&&!(1>j.length)){var F=j[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<j.length;G++)j[G]=""}}}}return Zf(g)}catch{return m}}var yu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rp;function vu(){}x(vu,ep),vu.prototype.g=function(){return new XMLHttpRequest},vu.prototype.i=function(){return{}},rp=new vu;function Or(u,m,g,S){this.j=u,this.i=m,this.l=g,this.R=S||1,this.U=new Ua(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new __}function __(){this.i=null,this.g="",this.h=!1}var w_={},sp={};function ip(u,m,g){u.L=1,u.v=Tu(ir(m)),u.m=g,u.P=!0,x_(u,null)}function x_(u,m){u.F=Date.now(),_u(u),u.A=ir(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),j_(g.i,"t",S),u.C=0,g=u.j.J,u.h=new __,u.g=Z_(u.j,g?m:null,!u.m),0<u.O&&(u.M=new bR(p(u.Y,u,u.g),u.O)),m=u.U,g=u.g,S=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(u_[0]=j.toString()),j=u_);for(var F=0;F<j.length;F++){var G=r_(g,j[F],S||m.handleEvent,!1,m.h||m);if(!G)break;m.g[G.key]=G}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$a(),RR(u.i,u.u,u.A,u.l,u.R,u.m)}Or.prototype.ca=function(u){u=u.target;const m=this.M;m&&or(u)==3?m.j():this.Y(u)},Or.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=or(this.g);var m=this.g.Ba();const io=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||$_(this.g)))){this.J||Pt!=4||m==7||(m==8||0>=io?$a(3):$a(2)),op(this);var g=this.g.Z();this.X=g;t:if(T_(this)){var S=$_(this.g);u="";var j=S.length,F=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qs(this),Wa(this);var G="";break t}this.h.i=new a.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(S[m],{stream:!(F&&m==j-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,CR(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,_t=this.g;if((Se=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Se)){var ve=Se;break t}}ve=null}if(g=ve)no(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ap(this,g);else{this.o=!1,this.s=3,Bt(12),Qs(this),Wa(this);break e}}if(this.P){g=!0;let Pn;for(;!this.J&&this.C<G.length;)if(Pn=VR(this,G),Pn==sp){Pt==4&&(this.s=4,Bt(14),g=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==w_){this.s=4,Bt(15),no(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else no(this.i,this.l,Pn,null),ap(this,Pn);if(T_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||G.length!=0||this.h.h||(this.s=1,Bt(16),g=!1),this.o=this.o&&g,!g)no(this.i,this.l,G,"[Invalid Chunked Response]"),Qs(this),Wa(this);else if(0<G.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),fp(kt),kt.M=!0,Bt(11))}}else no(this.i,this.l,G,null),ap(this,G);Pt==4&&Qs(this),this.o&&!this.J&&(Pt==4?Q_(this.j,this):(this.o=!1,_u(this)))}else JR(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Qs(this),Wa(this)}}}catch{}finally{}};function T_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function VR(u,m){var g=u.C,S=m.indexOf(`
`,g);return S==-1?sp:(g=Number(m.substring(g,S)),isNaN(g)?w_:(S+=1,S+g>m.length?sp:(m=m.slice(S,S+g),u.C=S+g,m)))}Or.prototype.cancel=function(){this.J=!0,Qs(this)};function _u(u){u.S=Date.now()+u.I,E_(u,u.I)}function E_(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=za(p(u.ba,u),m)}function op(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Or.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(NR(this.i,this.A),this.L!=2&&($a(),Bt(17)),Qs(this),this.s=2,Wa(this)):E_(this,this.S-u)};function Wa(u){u.j.G==0||u.J||Q_(u.j,u)}function Qs(u){op(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,d_(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ap(u,m){try{var g=u.j;if(g.G!=0&&(g.g==u||lp(g.h,u))){if(!u.K&&lp(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)ku(g),Au(g);else break e;hp(g),Bt(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=za(p(g.Za,g),6e3));if(1>=A_(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Js(g,11)}else if((u.K||g.g==u)&&ku(g),!v(m))for(j=g.Da.g.parse(m),m=0;m<j.length;m++){let ve=j[m];if(g.T=ve[0],ve=ve[1],g.G==2)if(ve[0]=="c"){g.K=ve[1],g.ia=ve[2];const kt=ve[3];kt!=null&&(g.la=kt,g.j.info("VER="+g.la));const Pt=ve[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const io=ve[5];io!=null&&typeof io=="number"&&0<io&&(S=1.5*io,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Pn=u.g;if(Pn){const Ru=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var F=S.h;F.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(cp(F,F.h),F.h=null))}if(S.D){const pp=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;pp&&(S.ya=pp,Ne(S.I,S.D,pp))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var G=u;if(S.qa=Y_(S,S.J?S.ia:null,S.W),G.K){b_(S.h,G);var Se=G,_t=S.L;_t&&(Se.I=_t),Se.B&&(op(Se),_u(Se)),S.g=G}else H_(S);0<g.i.length&&bu(g)}else ve[0]!="stop"&&ve[0]!="close"||Js(g,7);else g.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Js(g,7):dp(g):ve[0]!="noop"&&g.l&&g.l.ta(ve),g.v=0)}}$a(4)}catch{}}var jR=class{constructor(u,m){this.g=u,this.map=m}};function I_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function S_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function A_(u){return u.h?1:u.g?u.g.size:0}function lp(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function cp(u,m){u.g?u.g.add(m):u.h=m}function b_(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}I_.prototype.cancel=function(){if(this.i=k_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function k_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.D);return m}return E(u.i)}function MR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],g=u.length,S=0;S<g;S++)m.push(u[S]);return m}m=[],g=0;for(S in u)m[g++]=u[S];return m}function OR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var g=0;g<u;g++)m.push(g);return m}m=[],g=0;for(const S in u)m[g++]=S;return m}}}function P_(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var g=OR(u),S=MR(u),j=S.length,F=0;F<j;F++)m.call(void 0,S[F],g&&g[F],u)}var R_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LR(u,m){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),j=null;if(0<=S){var F=u[g].substring(0,S);j=u[g].substring(S+1)}else F=u[g];m(F,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Xs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xs){this.h=u.h,wu(this,u.j),this.o=u.o,this.g=u.g,xu(this,u.s),this.l=u.l;var m=u.i,g=new Ka;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),C_(this,g),this.m=u.m}else u&&(m=String(u).match(R_))?(this.h=!1,wu(this,m[1]||"",!0),this.o=Ga(m[2]||""),this.g=Ga(m[3]||"",!0),xu(this,m[4]),this.l=Ga(m[5]||"",!0),C_(this,m[6]||"",!0),this.m=Ga(m[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}Xs.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ha(m,N_,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ha(m,N_,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ha(g,g.charAt(0)=="/"?BR:UR,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ha(g,zR)),u.join("")};function ir(u){return new Xs(u)}function wu(u,m,g){u.j=g?Ga(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function xu(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function C_(u,m,g){m instanceof Ka?(u.i=m,qR(u.i,u.h)):(g||(m=Ha(m,$R)),u.i=new Ka(m,u.h))}function Ne(u,m,g){u.i.set(m,g)}function Tu(u){return Ne(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ga(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ha(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,FR),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function FR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var N_=/[#\/\?@]/g,UR=/[#\?:]/g,BR=/[#\?]/g,$R=/[#\?@]/g,zR=/#/g;function Ka(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Lr(u){u.g||(u.g=new Map,u.h=0,u.i&&LR(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Ka.prototype,t.add=function(u,m){Lr(this),this.i=null,u=ro(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function D_(u,m){Lr(u),m=ro(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function V_(u,m){return Lr(u),m=ro(u,m),u.g.has(m)}t.forEach=function(u,m){Lr(this),this.g.forEach(function(g,S){g.forEach(function(j){u.call(m,j,S,this)},this)},this)},t.na=function(){Lr(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let S=0;S<m.length;S++){const j=u[S];for(let F=0;F<j.length;F++)g.push(m[S])}return g},t.V=function(u){Lr(this);let m=[];if(typeof u=="string")V_(this,u)&&(m=m.concat(this.g.get(ro(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)m=m.concat(u[g])}return m},t.set=function(u,m){return Lr(this),this.i=null,u=ro(this,u),V_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function j_(u,m,g){D_(u,m),0<g.length&&(u.i=null,u.g.set(ro(u,m),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var S=m[g];const F=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var j=F;G[S]!==""&&(j+="="+encodeURIComponent(String(G[S]))),u.push(j)}}return this.i=u.join("&")};function ro(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qR(u,m){m&&!u.j&&(Lr(u),u.i=null,u.g.forEach(function(g,S){var j=S.toLowerCase();S!=j&&(D_(this,S),j_(this,j,g))},u)),u.j=m}function WR(u,m){const g=new qa;if(a.Image){const S=new Image;S.onload=y(Fr,g,"TestLoadImage: loaded",!0,m,S),S.onerror=y(Fr,g,"TestLoadImage: error",!1,m,S),S.onabort=y(Fr,g,"TestLoadImage: abort",!1,m,S),S.ontimeout=y(Fr,g,"TestLoadImage: timeout",!1,m,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function GR(u,m){const g=new qa,S=new AbortController,j=setTimeout(()=>{S.abort(),Fr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(F=>{clearTimeout(j),F.ok?Fr(g,"TestPingServer: ok",!0,m):Fr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Fr(g,"TestPingServer: error",!1,m)})}function Fr(u,m,g,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(g)}catch{}}function HR(){this.g=new PR}function KR(u,m,g){const S=g||"";try{P_(u,function(j,F){let G=j;c(j)&&(G=Zf(j)),m.push(S+F+"="+encodeURIComponent(G))})}catch(j){throw m.push(S+"type="+encodeURIComponent("_badmap")),j}}function Eu(u){this.l=u.Ub||null,this.j=u.eb||!1}x(Eu,ep),Eu.prototype.g=function(){return new Iu(this.l,this.j)},Eu.prototype.i=function(u){return function(){return u}}({});function Iu(u,m){bt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Iu,bt),t=Iu.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Xa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;M_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function M_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Qa(this):Xa(this),this.readyState==3&&M_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Qa(this))},t.Qa=function(u){this.g&&(this.response=u,Qa(this))},t.ga=function(){this.g&&Qa(this)};function Qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xa(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function Xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function O_(u){let m="";return O(u,function(g,S){m+=S,m+=":",m+=g,m+=`\r
`}),m}function up(u,m,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=O_(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ne(u,m,g))}function He(u){bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(He,bt);var QR=/^https?$/i,XR=["POST","PUT"];t=He.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rp.g(),this.v=this.o?h_(this.o):h_(rp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){L_(this,F);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)g.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())g.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(XR,m,void 0))||S||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of g)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{B_(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){L_(this,F)}};function L_(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,F_(u),Su(u)}function F_(u){u.A||(u.A=!0,Ut(u,"complete"),Ut(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ut(this,"complete"),Ut(this,"abort"),Su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?U_(this):this.bb())},t.bb=function(){U_(this)};function U_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||or(u)!=4||u.Z()!=2)){if(u.u&&or(u)==4)l_(u.Ea,0,u);else if(Ut(u,"readystatechange"),or(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var S;if(S=G===0){var j=String(u.D).match(R_)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),S=!QR.test(j?j.toLowerCase():"")}g=S}if(g)Ut(u,"complete"),Ut(u,"success");else{u.m=6;try{var F=2<or(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",F_(u)}}finally{Su(u)}}}}function Su(u,m){if(u.g){B_(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ut(u,"ready");try{g.onreadystatechange=S}catch{}}}function B_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function or(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),kR(m)}};function $_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function JR(u){const m={};u=(u.g&&2<=or(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(v(u[S]))continue;var g=N(u[S]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=m[j]||[];m[j]=F,F.push(g)}A(m,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ja(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function z_(u){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ja("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ja("baseRetryDelayMs",5e3,u),this.cb=Ja("retryDelaySeedMs",1e4,u),this.Wa=Ja("forwardChannelMaxRetries",2,u),this.wa=Ja("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new I_(u&&u.concurrentRequestLimit),this.Da=new HR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z_.prototype,t.la=8,t.G=1,t.connect=function(u,m,g,S){Bt(0),this.W=u,this.H=m||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Y_(this,null,this.W),bu(this)};function dp(u){if(q_(u),u.G==3){var m=u.U++,g=ir(u.I);if(Ne(g,"SID",u.K),Ne(g,"RID",m),Ne(g,"TYPE","terminate"),Ya(u,g),m=new Or(u,u.j,m),m.L=2,m.v=Tu(ir(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=Z_(m.j,null),m.g.ea(m.v)),m.F=Date.now(),_u(m)}J_(u)}function Au(u){u.g&&(fp(u),u.g.cancel(),u.g=null)}function q_(u){Au(u),u.u&&(a.clearTimeout(u.u),u.u=null),ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bu(u){if(!S_(u.h)&&!u.s){u.s=!0;var m=u.Ga;tt||se(),H||(tt(),H=!0),Z.add(m,u),u.B=0}}function YR(u,m){return A_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=za(p(u.Ga,u,m),X_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Or(this,this.j,u);let F=this.o;if(this.S&&(F?(F=I(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(j.H=F,F=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=G_(this,j,m),g=ir(this.I),Ne(g,"RID",u),Ne(g,"CVER",22),this.D&&Ne(g,"X-HTTP-Session-Id",this.D),Ya(this,g),F&&(this.O?m="headers="+encodeURIComponent(String(O_(F)))+"&"+m:this.m&&up(g,this.m,F)),cp(this.h,j),this.Ua&&Ne(g,"TYPE","init"),this.P?(Ne(g,"$req",m),Ne(g,"SID","null"),j.T=!0,ip(j,g,null)):ip(j,g,m),this.G=2}}else this.G==3&&(u?W_(this,u):this.i.length==0||S_(this.h)||W_(this))};function W_(u,m){var g;m?g=m.l:g=u.U++;const S=ir(u.I);Ne(S,"SID",u.K),Ne(S,"RID",g),Ne(S,"AID",u.T),Ya(u,S),u.m&&u.o&&up(S,u.m,u.o),g=new Or(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),m&&(u.i=m.D.concat(u.i)),m=G_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cp(u.h,g),ip(g,S,m)}function Ya(u,m){u.H&&O(u.H,function(g,S){Ne(m,S,g)}),u.l&&P_({},function(g,S){Ne(m,S,g)})}function G_(u,m,g){g=Math.min(u.i.length,g);var S=u.l?p(u.l.Na,u.l,u):null;e:{var j=u.i;let F=-1;for(;;){const G=["count="+g];F==-1?0<g?(F=j[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let Se=!0;for(let _t=0;_t<g;_t++){let ve=j[_t].g;const kt=j[_t].map;if(ve-=F,0>ve)F=Math.max(0,j[_t].g-100),Se=!1;else try{KR(kt,G,"req"+ve+"_")}catch{S&&S(kt)}}if(Se){S=G.join("&");break e}}}return u=u.i.splice(0,g),m.D=u,S}function H_(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;tt||se(),H||(tt(),H=!0),Z.add(m,u),u.v=0}}function hp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=za(p(u.Fa,u),X_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,K_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=za(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Au(this),K_(this))};function fp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function K_(u){u.g=new Or(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=ir(u.qa);Ne(m,"RID","rpc"),Ne(m,"SID",u.K),Ne(m,"AID",u.T),Ne(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ne(m,"TO",u.ja),Ne(m,"TYPE","xmlhttp"),Ya(u,m),u.m&&u.o&&up(m,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Tu(ir(m)),g.m=null,g.P=!0,x_(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Au(this),hp(this),Bt(19))};function ku(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Q_(u,m){var g=null;if(u.g==m){ku(u),fp(u),u.g=null;var S=2}else if(lp(u.h,m))g=m.D,b_(u.h,m),S=1;else return;if(u.G!=0){if(m.o)if(S==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;S=gu(),Ut(S,new y_(S,g)),bu(u)}else H_(u);else if(j=m.s,j==3||j==0&&0<m.X||!(S==1&&YR(u,m)||S==2&&hp(u)))switch(g&&0<g.length&&(m=u.h,m.i=m.i.concat(g)),j){case 1:Js(u,5);break;case 4:Js(u,10);break;case 3:Js(u,6);break;default:Js(u,2)}}}function X_(u,m){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*m}function Js(u,m){if(u.j.info("Error code "+m),m==2){var g=p(u.fb,u),S=u.Xa;const j=!S;S=new Xs(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wu(S,"https"),Tu(S),j?WR(S.toString(),g):GR(S.toString(),g)}else Bt(2);u.G=0,u.l&&u.l.sa(m),J_(u),q_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function J_(u){if(u.G=0,u.ka=[],u.l){const m=k_(u.h);(m.length!=0||u.i.length!=0)&&(T(u.ka,m),T(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Y_(u,m,g){var S=g instanceof Xs?ir(g):new Xs(g);if(S.g!="")m&&(S.g=m+"."+S.g),xu(S,S.s);else{var j=a.location;S=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var F=new Xs(null);S&&wu(F,S),m&&(F.g=m),j&&xu(F,j),g&&(F.l=g),S=F}return g=u.D,m=u.ya,g&&m&&Ne(S,g,m),Ne(S,"VER",u.la),Ya(u,S),S}function Z_(u,m,g){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new He(new Eu({eb:g})):new He(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ew(){}t=ew.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pu(){}Pu.prototype.g=function(u,m){return new on(u,m)};function on(u,m){bt.call(this),this.g=new z_(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!v(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new so(this)}x(on,bt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){dp(this.g)},on.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Zf(u),u=g);m.i.push(new jR(m.Ya++,u)),m.G==3&&bu(m)},on.prototype.N=function(){this.g.l=null,delete this.j,dp(this.g),delete this.g,on.aa.N.call(this)};function tw(u){tp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}x(tw,tp);function nw(){np.call(this),this.status=1}x(nw,np);function so(u){this.g=u}x(so,ew),so.prototype.ua=function(){Ut(this.g,"a")},so.prototype.ta=function(u){Ut(this.g,new tw(u))},so.prototype.sa=function(u){Ut(this.g,new nw)},so.prototype.ra=function(){Ut(this.g,"b")},Pu.prototype.createWebChannel=Pu.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,e2=function(){return new Pu},Zb=function(){return gu()},Yb=Ks,Dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yu.NO_ERROR=0,yu.TIMEOUT=8,yu.HTTP_ERROR=6,xd=yu,v_.COMPLETE="complete",Jb=v_,f_.EventType=Ba,Ba.OPEN="a",Ba.CLOSE="b",Ba.ERROR="c",Ba.MESSAGE="d",bt.prototype.listen=bt.prototype.K,_l=f_,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Xb=He}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const Bx="@firebase/firestore",$x="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new N0("@firebase/firestore");function po(){return Rs.logLevel}function K8(t){Rs.setLogLevel(t)}function B(t,...e){if(Rs.logLevel<=he.DEBUG){const n=e.map(V0);Rs.debug(`Firestore (${Pa}): ${t}`,...n)}}function Ye(t,...e){if(Rs.logLevel<=he.ERROR){const n=e.map(V0);Rs.error(`Firestore (${Pa}): ${t}`,...n)}}function Wt(t,...e){if(Rs.logLevel<=he.WARN){const n=e.map(V0);Rs.warn(`Firestore (${Pa}): ${t}`,...n)}}function V0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t2(t,r,n)}function t2(t,e,n){let r=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ye(r),new Error(r)}function X(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||t2(e,s,r)}function Q8(t,e){t||K(57014,e)}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class Y5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z5{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){X(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string",31837,{l:r}),new n2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class eF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){X(this.o===void 0,3512);const r=i=>{i.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class X8{getToken(){return Promise.resolve(new Vg(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function jg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ee(r,s);{const i=j0(),o=sF(i.encode(zx(t,n)),i.encode(zx(e,n)));return o!==0?o:ee(r,s)}}n+=r>65535?2:1}return ee(t.length,e.length)}function zx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function sF(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function na(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function r2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="__name__";class zn{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=zn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ee(e.length,n.length)}static compareSegments(e,n){const r=zn.isNumericId(e),s=zn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?zn.extractNumericId(e).compare(zn.extractNumericId(n)):jg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class le extends zn{construct(e,n,r){return new le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new U(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new le(n)}static emptyPath(){return new le([])}}const iF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends zn{construct(e,n,r){return new Fe(e,n,r)}static isValidIdentifier(e){return iF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mg}static keyField(){return new Fe([Mg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new U(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new U(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new U(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(le.fromString(e))}static fromName(e){return new q(le.fromString(e).popFirst(5))}static empty(){return new q(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t,e,n){if(!n)throw new U(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oF(t,e,n,r){if(e===!0&&r===!0)throw new U(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qx(t){if(!q.isDocumentKey(t))throw new U(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wx(t){if(q.isDocumentKey(t))throw new U(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function s2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function ue(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mf(t);throw new U(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function i2(t,e){if(e<=0)throw new U(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xi(t,e){if(!s2(t))throw new U(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new U(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=-62135596800,Hx=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(e){return ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Hx);return new ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gx)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hx}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xi(e,ce._jsonSchema))return new ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ce._jsonSchemaVersion="firestore/timestamp/1.0",ce._jsonSchema={type:it("string",ce._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new ce(0,0))}static max(){return new J(new ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;class sa{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Og(t){return t.fields.find(e=>e.kind===2)}function ai(t){return t.fields.filter(e=>e.kind!==2)}function aF(t,e){let n=ee(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=lF(t.fields[r],e.fields[r]),n!==0)return n;return ee(t.fields.length,e.fields.length)}sa.UNKNOWN_ID=-1;class xi{constructor(e,n){this.fieldPath=e,this.kind=n}}function lF(t,e){const n=Fe.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ee(t.kind,e.kind)}class ia{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ia(0,gn.min())}}function o2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new ce(n+1,0):new ce(n,r));return new gn(s,q.empty(),e)}function a2(t){return new gn(t.readTime,t.key,ra)}class gn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gn(J.min(),q.empty(),ra)}static max(){return new gn(J.max(),q.empty(),ra)}}function L0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==l2)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="SimpleDb";class gf{static open(e,n,r,s){try{return new gf(n,e.transaction(s,r))}catch(i){throw new Fl(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new gt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Fl(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=F0(r.target.error);this.S.reject(new Fl(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(ln,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new uF(n)}}class Yn{static delete(e){return B(ln,"Removing database:",e),ci(Vb().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!$b())return!1;if(Yn.F())return!0;const e=lt(),n=Yn.M(e),r=0<n&&n<10,s=u2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.B=r,this.L=null,Yn.M(lt())===12.2&&Ye("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(B(ln,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Fl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new U(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fl(e,o))},s.onupgradeneeded=i=>{B(ln,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,s.transaction,i.oldVersion,this.version).next(()=>{B(ln,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const r=n.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",n=>{var r;n.newVersion===null&&(Wt('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=gf.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.v(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(B(ln,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function u2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class cF{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ci(this.$.delete())}}class Fl extends U{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zs(t){return t.name==="IndexedDbTransactionError"}class uF{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(B(ln,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(B(ln,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ci(r)}add(e){return B(ln,"ADD",this.store.name,e,e),ci(this.store.add(e))}get(e){return ci(this.store.get(e)).next(n=>(n===void 0&&(n=null),B(ln,"GET",this.store.name,e,n),n))}delete(e){return B(ln,"DELETE",this.store.name,e),ci(this.store.delete(e))}count(){return B(ln,"COUNT",this.store.name),ci(this.store.count())}j(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.J(i,(a,l)=>{o.push(l)}).next(()=>o)}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,n){B(ln,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const s=this.cursor(r);return this.J(s,(i,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}ee(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=F0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}J(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new cF(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.W===null?a.continue():a.continue(l.W)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ci(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=F0(r.target.error);n(s)}})}let Kx=!1;function F0(t){const e=Yn.M(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kx||(Kx=!0,setTimeout(()=>{throw r},0)),r}}return t}const Ul="IndexBackfiller";class dF{constructor(e,n){this.asyncQueue=e,this.te=n,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){B(Ul,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.te.re();B(Ul,`Documents written: ${n}`)}catch(n){zs(n)?B(Ul,"Ignoring IndexedDB error during index backfill: ",n):await $s(n)}await this.ne(6e4)})}}class hF{constructor(e,n){this.localStore=e,this.persistence=n}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ie(n,e))}ie(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return B(Ul,`Processing collection: ${o}`),this.se(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}se(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.oe(s,i)).next(a=>(B(Ul,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}oe(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=a2(i);L0(o,r)>0&&(r=o)}),new gn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Yt.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=-1;function Hc(t){return t==null}function yc(t){return t===0&&1/t==-1/0}function d2(t){return typeof t=="number"&&Number.isInteger(t)&&!yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="";function Mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qx(e)),e=fF(t.get(n),e);return Qx(e)}function fF(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case wh:n+="";break;default:n+=i}}return n}function Qx(t){return t+wh+""}function Hn(t){const e=t.length;if(X(e>=2,64408,{path:t}),e===2)return X(t.charAt(0)===wh&&t.charAt(1)==="",56145,{path:t}),le.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(wh,i);switch((o<0||o>n)&&K(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:K(61167,{path:t})}i=o+2}return new le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="remoteDocuments",Kc="owner",ao="owner",vc="mutationQueues",pF="userId",Dn="mutations",Xx="batchId",vi="userMutationsIndex",Jx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t,e){return[t,Mt(e)]}function h2(t,e,n){return[t,Mt(e),n]}const mF={},oa="documentMutations",xh="remoteDocumentsV14",gF=["prefixPath","collectionGroup","readTime","documentId"],Ed="documentKeyIndex",yF=["prefixPath","collectionGroup","documentId"],f2="collectionGroupIndex",vF=["collectionGroup","readTime","prefixPath","documentId"],_c="remoteDocumentGlobal",Lg="remoteDocumentGlobalKey",aa="targets",p2="queryTargetsIndex",_F=["canonicalId","targetId"],la="targetDocuments",wF=["targetId","path"],U0="documentTargetsIndex",xF=["path","targetId"],Th="targetGlobalKey",Ti="targetGlobal",wc="collectionParents",TF=["collectionId","parent"],ca="clientMetadata",EF="clientId",yf="bundles",IF="bundleId",vf="namedQueries",SF="name",B0="indexConfiguration",AF="indexId",Fg="collectionGroupIndex",bF="collectionGroup",Bl="indexState",kF=["indexId","uid"],m2="sequenceNumberIndex",PF=["uid","sequenceNumber"],$l="indexEntries",RF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g2="documentKeyIndex",CF=["indexId","uid","orderedDocumentKey"],_f="documentOverlays",NF=["userId","collectionPath","documentId"],Ug="collectionPathOverlayIndex",DF=["userId","collectionPath","largestBatchId"],y2="collectionGroupOverlayIndex",VF=["userId","collectionGroup","largestBatchId"],$0="globals",jF="name",v2=[vc,Dn,oa,li,aa,Kc,Ti,la,ca,_c,wc,yf,vf],MF=[...v2,_f],_2=[vc,Dn,oa,xh,aa,Kc,Ti,la,ca,_c,wc,yf,vf,_f],w2=_2,z0=[...w2,B0,Bl,$l],OF=z0,x2=[...z0,$0],LF=x2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends c2{constructor(e,n){super(),this.ce=e,this.currentSequenceNumber=n}}function ct(t,e){const n=W(t);return Yn.N(n.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function T2(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function E2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=i??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(e){return new Zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Te(this.comparator);return n.data=e,n}}class Zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new Te(Fe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new I2("Invalid base64 string: "+i):i}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const FF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(X(!!t,39018),typeof t=="string"){let e=0;const n=FF.exec(t);if(X(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="server_timestamp",A2="__type__",b2="__previous_value__",k2="__local_write_time__";function wf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[A2])===null||n===void 0?void 0:n.stringValue)===S2}function xf(t){const e=t.mapValue.fields[b2];return wf(e)?xf(e):e}function xc(t){const e=Ar(t.mapValue.fields[k2].timestampValue);return new ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Tc="(default)";class Ni{constructor(e,n){this.projectId=e,this.database=n||Tc}static empty(){return new Ni("","")}get isDefaultDatabase(){return this.database===Tc}isEqual(e){return e instanceof Ni&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="__type__",P2="__max__",os={mapValue:{fields:{__type__:{stringValue:P2}}}},W0="__vector__",ua="value",Id={nullValue:"NULL_VALUE"};function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wf(t)?4:R2(t)?9007199254740991:Tf(t)?10:11:K(28295,{value:t})}function sr(t,e){if(t===e)return!0;const n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xc(t).isEqual(xc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ar(s.timestampValue),a=Ar(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return br(s.bytesValue).isEqual(br(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),a=Oe(i.doubleValue);return o===a?yc(o)===yc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Yx(o)!==Yx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function Ec(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Ns(t,e){if(t===e)return 0;const n=Cs(t),r=Cs(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Oe(i.integerValue||i.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return eT(t.timestampValue,e.timestampValue);case 4:return eT(xc(t),xc(e));case 5:return jg(t.stringValue,e.stringValue);case 6:return function(i,o){const a=br(i),l=br(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ee(a[c],l[c]);if(d!==0)return d}return ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ee(Oe(i.latitude),Oe(o.latitude));return a!==0?a:ee(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tT(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},p=o.fields||{},y=(a=h[ua])===null||a===void 0?void 0:a.arrayValue,x=(l=p[ua])===null||l===void 0?void 0:l.arrayValue,E=ee(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:tT(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===os.mapValue&&o===os.mapValue)return 0;if(i===os.mapValue)return 1;if(o===os.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=jg(l[h],d[h]);if(p!==0)return p;const y=Ns(a[l[h]],c[d[h]]);if(y!==0)return y}return ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function eT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Ar(t),r=Ar(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function tT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ns(n[s],r[s]);if(i)return i}return ee(n.length,r.length)}function da(t){return $g(t)}function $g(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$g(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$g(n.fields[o])}`;return s+"}"}(t.mapValue):K(61005,{value:t})}function Sd(t){switch(Cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(t);return e?16+Sd(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Sd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return qs(r.fields,(i,o)=>{s+=i.length+Sd(o)}),s}(t.mapValue);default:throw K(13486,{value:t})}}function Di(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zg(t){return!!t&&"integerValue"in t}function Ic(t){return!!t&&"arrayValue"in t}function nT(t){return!!t&&"nullValue"in t}function rT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ad(t){return!!t&&"mapValue"in t}function Tf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[q0])===null||n===void 0?void 0:n.stringValue)===W0}function zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function R2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===P2}const C2={mapValue:{fields:{[q0]:{stringValue:W0},[ua]:{arrayValue:{}}}}};function BF(t){return"nullValue"in t?Id:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Di(Ni.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tf(t)?C2:{mapValue:{}}:K(35942,{value:t})}function $F(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Di(Ni.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?C2:"mapValue"in t?Tf(t)?{mapValue:{}}:os:K(61959,{value:t})}function sT(t,e){const n=Ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function iT(t,e){const n=Ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ad(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(n)}setAll(e){let n=Fe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=zl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ad(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ad(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tt(zl(this.value))}}function N2(t){const e=[];return qs(t.fields,(n,r)=>{const s=new Fe([n]);if(Ad(r)){const i=N2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ve(e,0,J.min(),J.min(),J.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ve(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new Ve(e,2,n,J.min(),J.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new Ve(e,3,n,J.min(),J.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ve&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ve(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.position=e,this.inclusive=n}}function oT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Ns(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function aT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{}class fe extends D2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qF(e,n,r):n==="array-contains"?new HF(e,r):n==="in"?new F2(e,r):n==="not-in"?new KF(e,r):n==="array-contains-any"?new QF(e,r):new fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WF(e,r):new GF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ns(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class we extends D2{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new we(e,n)}matches(e){return ha(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ha(t){return t.op==="and"}function qg(t){return t.op==="or"}function G0(t){return V2(t)&&ha(t)}function V2(t){for(const e of t.filters)if(e instanceof we)return!1;return!0}function Wg(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+da(t.value);if(G0(t))return t.filters.map(e=>Wg(e)).join(",");{const e=t.filters.map(n=>Wg(n)).join(",");return`${t.op}(${e})`}}function j2(t,e){return t instanceof fe?function(r,s){return s instanceof fe&&r.op===s.op&&r.field.isEqual(s.field)&&sr(r.value,s.value)}(t,e):t instanceof we?function(r,s){return s instanceof we&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&j2(o,s.filters[a]),!0):!1}(t,e):void K(19439)}function M2(t,e){const n=t.filters.concat(e);return we.create(n,t.op)}function O2(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${da(n.value)}`}(t):t instanceof we?function(n){return n.op.toString()+" {"+n.getFilters().map(O2).join(" ,")+"}"}(t):"Filter"}class qF extends fe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class WF extends fe{constructor(e,n){super(e,"in",n),this.keys=L2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GF extends fe{constructor(e,n){super(e,"not-in",n),this.keys=L2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function L2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class HF extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ic(n)&&Ec(n.arrayValue,this.value)}}class F2 extends fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}}class KF extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ec(this.value.arrayValue,n)}}class QF extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ic(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function Gg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new XF(t,e,n,r,s,i,o)}function Vi(t){const e=W(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>da(r)).join(",")),e.Pe=n}return e.Pe}function Qc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aT(t.startAt,e.startAt)&&aT(t.endAt,e.endAt)}function Eh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ih(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function lT(t,e,n){let r=Id,s=!0;for(const i of Ih(t,e)){let o=Id,a=!0;switch(i.op){case"<":case"<=":o=BF(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Id}sT({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];sT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function cT(t,e,n){let r=os,s=!0;for(const i of Ih(t,e)){let o=os,a=!0;switch(i.op){case">=":case">":o=$F(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=os}iT({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];iT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function U2(t,e,n,r,s,i,o,a){return new Dr(t,e,n,r,s,i,o,a)}function Ra(t){return new Dr(t)}function uT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H0(t){return t.collectionGroup!==null}function Bo(t){const e=W(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Te(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Sc(i,r))}),n.has(Fe.keyField().canonicalString())||e.Te.push(new Sc(Fe.keyField(),r))}return e.Te}function Ot(t){const e=W(t);return e.Ie||(e.Ie=$2(e,Bo(t))),e.Ie}function B2(t){const e=W(t);return e.de||(e.de=$2(e,t.explicitOrderBy)),e.de}function $2(t,e){if(t.limitType==="F")return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Sc(s.field,i)});const n=t.endAt?new Ds(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ds(t.startAt.position,t.startAt.inclusive):null;return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hg(t,e){const n=t.filters.concat([e]);return new Dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return Qc(Ot(t),Ot(e))&&t.limitType===e.limitType}function z2(t){return`${Vi(Ot(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>O2(s)).join(", ")}]`),Hc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>da(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>da(s)).join(",")),`Target(${r})`}(Ot(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=oT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bo(r),s)||r.endAt&&!function(o,a,l){const c=oT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bo(r),s))}(t,e)}function q2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W2(t){return(e,n)=>{let r=!1;for(const s of Bo(t)){const i=JF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JF(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ns(l,c):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return E2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=new Re(q.comparator);function en(){return YF}const G2=new Re(q.comparator);function wl(...t){let e=G2;for(const n of t)e=e.insert(n.key,n);return e}function H2(t){let e=G2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kn(){return ql()}function K2(){return ql()}function ql(){return new Vr(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZF=new Re(q.comparator),e3=new Te(q.comparator);function ae(...t){let e=e3;for(const n of t)e=e.add(n);return e}const t3=new Te(ee);function K0(){return t3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yc(e)?"-0":e}}function Q2(t){return{integerValue:""+t}}function X2(t,e){return d2(e)?Q2(e):Q0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function n3(t,e,n){return t instanceof fa?function(s,i){const o={fields:{[A2]:{stringValue:S2},[k2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wf(i)&&(i=xf(i)),i&&(o.fields[b2]=i),{mapValue:o}}(n,e):t instanceof ji?Y2(t,e):t instanceof Mi?Z2(t,e):function(s,i){const o=J2(s,i),a=dT(o)+dT(s.Ee);return zg(o)&&zg(s.Ee)?Q2(a):Q0(s.serializer,a)}(t,e)}function r3(t,e,n){return t instanceof ji?Y2(t,e):t instanceof Mi?Z2(t,e):n}function J2(t,e){return t instanceof pa?function(r){return zg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fa extends Ef{}class ji extends Ef{constructor(e){super(),this.elements=e}}function Y2(t,e){const n=ek(e);for(const r of t.elements)n.some(s=>sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Mi extends Ef{constructor(e){super(),this.elements=e}}function Z2(t,e){let n=ek(e);for(const r of t.elements)n=n.filter(s=>!sr(s,r));return{arrayValue:{values:n}}}class pa extends Ef{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function dT(t){return Oe(t.integerValue||t.doubleValue)}function ek(t){return Ic(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.field=e,this.transform=n}}function s3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ji&&s instanceof ji||r instanceof Mi&&s instanceof Mi?na(r.elements,s.elements,sr):r instanceof pa&&s instanceof pa?sr(r.Ee,s.Ee):r instanceof fa&&s instanceof fa}(t.transform,e.transform)}class i3{constructor(e,n){this.version=e,this.transformResults=n}}class Ue{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function tk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Na(t.key,Ue.none()):new Ca(t.key,t.data,Ue.none());{const n=t.data,r=Tt.empty();let s=new Te(Fe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new jr(t.key,r,new Zt(s.toArray()),Ue.none())}}function o3(t,e,n){t instanceof Ca?function(s,i,o){const a=s.value.clone(),l=fT(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof jr?function(s,i,o){if(!bd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=fT(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(nk(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wl(t,e,n,r){return t instanceof Ca?function(i,o,a,l){if(!bd(i.precondition,o))return a;const c=i.value.clone(),d=pT(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof jr?function(i,o,a,l){if(!bd(i.precondition,o))return a;const c=pT(i.fieldTransforms,l,o),d=o.data;return d.setAll(nk(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return bd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=J2(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function hT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&na(r,s,(i,o)=>s3(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends If{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class jr extends If{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fT(t,e,n){const r=new Map;X(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,r3(o,a,n[s]))}return r}function pT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,n3(i,o,e))}return r}class Na extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X0 extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&o3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=tk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,r)=>hT(n,r))&&na(this.baseMutations,e.baseMutations,(n,r)=>hT(n,r))}}class Y0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){X(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return ZF}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Y0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ge;function sk(t){switch(t){case L.OK:return K(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function ik(t){if(t===void 0)return Ye("GRPC error has no .code"),L.UNKNOWN;switch(t){case nt.OK:return L.OK;case nt.CANCELLED:return L.CANCELLED;case nt.UNKNOWN:return L.UNKNOWN;case nt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case nt.INTERNAL:return L.INTERNAL;case nt.UNAVAILABLE:return L.UNAVAILABLE;case nt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case nt.NOT_FOUND:return L.NOT_FOUND;case nt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case nt.ABORTED:return L.ABORTED;case nt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case nt.DATA_LOSS:return L.DATA_LOSS;default:return K(39323,{code:t})}}(ge=nt||(nt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new Es([4294967295,4294967295],0);function mT(t){const e=j0().encode(t),n=new Qb;return n.update(e),new Uint8Array(n.digest())}function gT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Es([n,r],0),new Es([s,i],0)]}class ev{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xl(`Invalid padding: ${n}`);if(r<0)throw new xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Es.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Es.fromNumber(r)));return s.compare(c3)===1&&(s=new Es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=mT(e),[r,s]=gT(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ev(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=mT(e),[r,s]=gT(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zc(J.min(),s,new Re(ee),en(),ae())}}class eu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eu(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class ok{constructor(e,n){this.targetId=e,this.De=n}}class ak{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class yT{constructor(){this.ve=0,this.Ce=vT(),this.Fe=Xe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K(38017,{changeType:i})}}),new eu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=vT()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class u3{constructor(e){this.We=e,this.Ge=new Map,this.ze=en(),this.je=ed(),this.Je=ed(),this.He=new Re(ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Eh(i))if(r===0){const o=new q(i.path);this.Xe(n,o,Ve.newNoDocument(o,J.min()))}else X(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}Ah==null||Ah.ct(function(d,h,p,y,x){var E,T,w,v,_,k;const D={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},O=h.unchangedNames;return O&&(D.bloomFilter={applied:x===0,hashCount:(E=O==null?void 0:O.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(v=(w=(T=O==null?void 0:O.bits)===null||T===void 0?void 0:T.bitmap)===null||w===void 0?void 0:w.length)!==null&&v!==void 0?v:0,padding:(k=(_=O==null?void 0:O.bits)===null||_===void 0?void 0:_.padding)!==null&&k!==void 0?k:0,mightContain:A=>{var I;return(I=y==null?void 0:y.mightContain(A))!==null&&I!==void 0&&I}}),D}(o,e.De,this.We.lt(),a,l))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=br(r).toUint8Array()}catch(l){if(l instanceof I2)return Wt("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ev(o,s,i)}catch(l){return Wt(l instanceof xl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&Eh(a.target)){const l=new q(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Ve.newNoDocument(l,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ae();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Zc(e,n,this.He,this.ze,r);return this.ze=en(),this.je=ed(),this.Je=ed(),this.He=new Re(ee),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new yT,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Te(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Te(ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new yT),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ed(){return new Re(q.comparator)}function vT(){return new Re(q.comparator)}const d3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),h3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),f3=(()=>({and:"AND",or:"OR"}))();class p3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kg(t,e){return t.useProto3Json||Hc(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m3(t,e){return ma(t,e.toTimestamp())}function et(t){return X(!!t,49232),J.fromTimestamp(function(n){const r=Ar(n);return new ce(r.seconds,r.nanos)}(t))}function tv(t,e){return Qg(t,e).canonicalString()}function Qg(t,e){const n=function(s){return new le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ck(t){const e=le.fromString(t);return X(vk(e),10190,{key:e.toString()}),e}function Ac(t,e){return tv(t.databaseId,e.path)}function Zn(t,e){const n=ck(e);if(n.get(1)!==t.databaseId.projectId)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(hk(n))}function uk(t,e){return tv(t.databaseId,e)}function dk(t){const e=ck(t);return e.length===4?le.emptyPath():hk(e)}function Xg(t){return new le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hk(t){return X(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _T(t,e,n){return{name:Ac(t,e),fields:n.value.mapValue.fields}}function Sf(t,e,n){const r=Zn(t,e.name),s=et(e.updateTime),i=e.createTime?et(e.createTime):J.min(),o=new Tt({mapValue:{fields:e.fields}}),a=Ve.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function g3(t,e){return"found"in e?function(r,s){X(!!s.found,43571),s.found.name,s.found.updateTime;const i=Zn(r,s.found.name),o=et(s.found.updateTime),a=s.found.createTime?et(s.found.createTime):J.min(),l=new Tt({mapValue:{fields:s.found.fields}});return Ve.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){X(!!s.missing,3894),X(!!s.readTime,22933);const i=Zn(r,s.missing),o=et(s.readTime);return Ve.newNoDocument(i,o)}(t,e):K(7234,{result:e})}function y3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:K(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(X(d===void 0||typeof d=="string",58123),Xe.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Xe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:ik(c.code);return new U(d,c.message||"")}(o);n=new ak(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zn(t,r.document.name),i=et(r.document.updateTime),o=r.document.createTime?et(r.document.createTime):J.min(),a=new Tt({mapValue:{fields:r.document.fields}}),l=Ve.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new kd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zn(t,r.document),i=r.readTime?et(r.readTime):J.min(),o=Ve.newNoDocument(s,i),a=r.removedTargetIds||[];n=new kd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zn(t,r.document),i=r.removedTargetIds||[];n=new kd([],i,s,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new l3(s,i),a=r.targetId;n=new ok(a,o)}}return n}function bc(t,e){let n;if(e instanceof Ca)n={update:_T(t,e.key,e.value)};else if(e instanceof Na)n={delete:Ac(t,e.key)};else if(e instanceof jr)n={update:_T(t,e.key,e.data),updateMask:E3(e.fieldMask)};else{if(!(e instanceof X0))return K(16599,{Rt:e.type});n={verify:Ac(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ji)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pa)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:m3(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K(27497)}(t,e.precondition)),n}function Jg(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ue.updateTime(et(i.updateTime)):i.exists!==void 0?Ue.exists(i.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new fa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ji(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Mi(d)}else"increment"in a?l=new pa(o,a.increment):K(16584,{proto:a});const c=Fe.fromServerFormat(a.fieldPath);return new Yc(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Zn(t,e.update.name),i=new Tt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Zt(c.map(d=>Fe.fromServerFormat(d)))}(e.updateMask);return new jr(s,i,o,n,r)}return new Ca(s,i,n,r)}if(e.delete){const s=Zn(t,e.delete);return new Na(s,n)}if(e.verify){const s=Zn(t,e.verify);return new X0(s,n)}return K(1463,{proto:e})}function v3(t,e){return t&&t.length>0?(X(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?et(s.updateTime):et(i);return o.isEqual(J.min())&&(o=et(i)),new i3(o,s.transformResults||[])}(n,e))):[]}function fk(t,e){return{documents:[uk(t,e.path)]}}function Af(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uk(t,s);const i=function(c){if(c.length!==0)return yk(we.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Jr(p.field),direction:w3(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Kg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:s}}function pk(t,e,n,r){const{Vt:s,parent:i}=Af(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Jr(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Jr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ft:o,parent:i}}function mk(t){let e=dk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){X(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=gk(h);return p instanceof we&&G0(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(x){return new Sc(go(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Hc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,y=h.values||[];return new Ds(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,y=h.values||[];return new Ds(y,p)}(n.endAt)),U2(e,s,o,i,a,"F",l,c)}function _3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=go(n.unaryFilter.field);return fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=go(n.unaryFilter.field);return fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=go(n.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return fe.create(go(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return we.create(n.compositeFilter.filters.map(r=>gk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function w3(t){return d3[t]}function x3(t){return h3[t]}function T3(t){return f3[t]}function Jr(t){return{fieldPath:t.canonicalString()}}function go(t){return Fe.fromServerFormat(t.fieldPath)}function yk(t){return t instanceof fe?function(n){if(n.op==="=="){if(rT(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NAN"}};if(nT(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rT(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NAN"}};if(nT(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(n.field),op:x3(n.op),value:n.value}}}(t):t instanceof we?function(n){const r=n.getFilters().map(s=>yk(s));return r.length===1?r[0]:{compositeFilter:{op:T3(n.op),filters:r}}}(t):K(54877,{filter:t})}function E3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r,s,i=J.min(),o=J.min(),a=Xe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.gt=e}}function I3(t,e){let n;if(e.document)n=Sf(t.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),s=Li(e.noDocument.readTime);n=Ve.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K(56709);{const r=q.fromSegments(e.unknownDocument.path),s=Li(e.unknownDocument.version);n=Ve.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ce(s[0],s[1]);return J.fromTimestamp(i)}(e.readTime)),n}function wT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ac(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ma(i,o.version.toTimestamp()),createTime:ma(i,o.createTime.toTimestamp())}}(t.gt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Oi(e.version)};else{if(!e.isUnknownDocument())return K(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Oi(e.version)}}return r}function bh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Oi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Li(t){const e=new ce(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function ui(t,e){const n=(e.baseMutations||[]).map(i=>Jg(t.gt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Jg(t.gt,i)),s=ce.fromMillis(e.localWriteTimeMs);return new J0(e.batchId,s,n,r)}function Tl(t){const e=Li(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Li(t.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return X(o===1,1966,{count:o}),Ot(Ra(dk(i.documents[0])))}(t.query):function(i){return Ot(mk(i))}(t.query),new pr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function wk(t,e){const n=Oi(e.snapshotVersion),r=Oi(e.lastLimboFreeSnapshotVersion);let s;s=Eh(e.target)?fk(t.gt,e.target):Af(t.gt,e.target).Vt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function bf(t){const e=mk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}function om(t,e){return new Z0(e.largestBatchId,Jg(t.gt,e.overlayMutation))}function xT(t,e){const n=e.path.lastSegment();return[t,Mt(e.path.popLast()),n]}function TT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Oi(r.readTime),documentKey:Mt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{getBundleMetadata(e,n){return ET(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Li(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return ET(e).put(function(s){return{bundleId:s.id,createTime:Oi(et(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return IT(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:bf(i.bundledQuery),readTime:Li(i.readTime)}}(r)})}saveNamedQuery(e,n){return IT(e).put(function(s){return{name:s.name,readTime:Oi(et(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function ET(t){return ct(t,yf)}function IT(t){return ct(t,vf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.serializer=e,this.userId=n}static yt(e,n){const r=n.uid||"";return new kf(e,r)}getOverlay(e,n){return cl(e).get(xT(this.userId,n)).next(r=>r?om(this.serializer,r):null)}getOverlays(e,n){const r=Kn();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Z0(n,o);s.push(this.wt(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Mt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(cl(e).Y(Ug,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Kn(),i=Mt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return cl(e).j(Ug,o).next(a=>{for(const l of a){const c=om(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Kn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return cl(e).X({index:y2,range:a},(l,c,d)=>{const h=om(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}wt(e,n){return cl(e).put(function(s,i,o){const[a,l,c]=xT(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:bc(s.gt,o.mutation)}}(this.serializer,this.userId,n))}}function cl(t){return ct(t,_f)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{St(e){return ct(e,$0)}getSessionToken(e){return this.St(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Oe(e.integerValue));else if("doubleValue"in e){const r=Oe(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),yc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ar(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(br(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?R2(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Tf(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const s of Object.keys(r))this.xt(s,n),this.Dt(r[s],n)}Lt(e,n){var r,s;const i=e.fields||{};this.Ct(n,53);const o=ua,a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Ct(n,15),n.Ft(Oe(a)),this.xt(o,n),this.Dt(i[o],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const s of r)this.Dt(s,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}di.Ut=new di;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=255;function b3(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ST(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=b3(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class k3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Wt(r.value),r=n.next();this.Gt()}zt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.jt(r.value),r=n.next();this.Jt()}Ht(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const s=n.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const s=n.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const n=this.Xt(e),r=ST(n);this.en(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}tn(e){const n=this.Xt(e),r=ST(n);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}nn(){this.rn(co),this.rn(255)}sn(){this._n(co),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Wt(e){const n=255&e;n===0?(this.rn(0),this.rn(255)):n===co?(this.rn(co),this.rn(0)):this.rn(n)}jt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===co?(this._n(co),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class P3{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class R3{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class ul{constructor(){this.un=new k3,this.cn=new P3(this.un),this.ln=new R3(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r,s){this.Pn=e,this.Tn=n,this.In=r,this.dn=s}En(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new hi(this.Pn,this.Tn,this.In,r)}An(e,n,r){return{indexId:this.Pn,uid:e,arrayValue:Pd(this.In),directionalValue:Pd(this.dn),orderedDocumentKey:Pd(n),documentKey:r.path.toArray()}}Rn(e,n,r){const s=this.An(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Br(t,e){let n=t.Pn-e.Pn;return n!==0?n:(n=AT(t.In,e.In),n!==0?n:(n=AT(t.dn,e.dn),n!==0?n:q.comparator(t.Tn,e.Tn)))}function AT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Pd(t){return Bb()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function bT(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class kT{constructor(e){this.Vn=new Te((n,r)=>Fe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(X(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const n=Og(e);if(n!==void 0&&!this.yn(n))return!1;const r=ai(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.yn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.wn(a,l)||!this.Sn(this.mn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.mn.length||!this.Sn(this.mn[o++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new Te(Fe.comparator);const n=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new xi(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new xi(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new xi(r.field,r.dir==="asc"?0:1)));return new sa(sa.UNKNOWN_ID,this.collectionId,n,ia.empty())}yn(e){for(const n of this.fn)if(this.wn(n,e))return!0;return!1}wn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){var e,n;if(X(t instanceof fe||t instanceof we,20012),t instanceof fe){if(t instanceof F2){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>fe.create(t.field,"==",i)))||[];return we.create(s,"or")}return t}const r=t.filters.map(s=>xk(s));return we.create(r,t.op)}function C3(t){if(t.getFilters().length===0)return[];const e=ey(xk(t));return X(Tk(e),7391),Yg(e)||Zg(e)?[e]:e.getFilters()}function Yg(t){return t instanceof fe}function Zg(t){return t instanceof we&&G0(t)}function Tk(t){return Yg(t)||Zg(t)||function(n){if(n instanceof we&&qg(n)){for(const r of n.getFilters())if(!Yg(r)&&!Zg(r))return!1;return!0}return!1}(t)}function ey(t){if(X(t instanceof fe||t instanceof we,34018),t instanceof fe)return t;if(t.filters.length===1)return ey(t.filters[0]);const e=t.filters.map(r=>ey(r));let n=we.create(e,t.op);return n=kh(n),Tk(n)?n:(X(n instanceof we,64498),X(ha(n),40251),X(n.filters.length>1,57927),n.filters.reduce((r,s)=>nv(r,s)))}function nv(t,e){let n;return X(t instanceof fe||t instanceof we,38388),X(e instanceof fe||e instanceof we,25473),n=t instanceof fe?e instanceof fe?function(s,i){return we.create([s,i],"and")}(t,e):PT(t,e):e instanceof fe?PT(e,t):function(s,i){if(X(s.filters.length>0&&i.filters.length>0,48005),ha(s)&&ha(i))return M2(s,i.getFilters());const o=qg(s)?s:i,a=qg(s)?i:s,l=o.filters.map(c=>nv(c,a));return we.create(l,"or")}(t,e),kh(n)}function PT(t,e){if(ha(e))return M2(e,t.getFilters());{const n=e.filters.map(r=>nv(t,r));return we.create(n,"or")}}function kh(t){if(X(t instanceof fe||t instanceof we,11850),t instanceof fe)return t;const e=t.getFilters();if(e.length===1)return kh(e[0]);if(V2(t))return t;const n=e.map(s=>kh(s)),r=[];return n.forEach(s=>{s instanceof fe?r.push(s):s instanceof we&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:we.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.Dn=new rv}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(gn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class rv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Te(le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Te(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="IndexedDbIndexManager",td=new Uint8Array(0);class D3{constructor(e,n){this.databaseId=n,this.vn=new rv,this.Cn=new Vr(r=>Vi(r),(r,s)=>Qc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Mt(s)};return CT(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[r2(n),""],!1,!0);return CT(e).j(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Hn(o.parent))}return r})}addFieldIndex(e,n){const r=dl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ho(e);return i.next(a=>{o.put(TT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=dl(e),s=ho(e),i=uo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=dl(e),r=uo(e),s=ho(e);return n.Y().next(()=>r.Y()).next(()=>s.Y())}createTargetIndexes(e,n){return M.forEach(this.Fn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new kT(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=uo(e);let s=!0;const i=new Map;return M.forEach(this.Fn(n),o=>this.Mn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ae();const a=[];return M.forEach(i,(l,c)=>{B(RT,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Vi(n)}`);const d=function(_,k){const D=Og(k);if(D===void 0)return null;for(const O of Ih(_,D.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),h=function(_,k){const D=new Map;for(const O of ai(k))for(const A of Ih(_,O.fieldPath))switch(A.op){case"==":case"in":D.set(O.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return D.set(O.fieldPath.canonicalString(),A.value),Array.from(D.values())}return null}(c,l),p=function(_,k){const D=[];let O=!0;for(const A of ai(k)){const I=A.kind===0?lT(_,A.fieldPath,_.startAt):cT(_,A.fieldPath,_.startAt);D.push(I.value),O&&(O=I.inclusive)}return new Ds(D,O)}(c,l),y=function(_,k){const D=[];let O=!0;for(const A of ai(k)){const I=A.kind===0?cT(_,A.fieldPath,_.endAt):lT(_,A.fieldPath,_.endAt);D.push(I.value),O&&(O=I.inclusive)}return new Ds(D,O)}(c,l),x=this.xn(l,c,p),E=this.xn(l,c,y),T=this.On(l,c,h),w=this.Nn(l.indexId,d,x,p.inclusive,E,y.inclusive,T);return M.forEach(w,v=>r.H(v,n.limit).next(_=>{_.forEach(k=>{const D=q.fromSegments(k.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return M.resolve(null)})}Fn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=C3(we.create(e.filters,"and")).map(r=>Gg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,n),n)}Nn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Bn(n[h/c]):td,y=this.Ln(e,p,r[h%c],s),x=this.kn(e,p,i[h%c],o),E=a.map(T=>this.Ln(e,p,T,!0));d.push(...this.createRange(y,x,E))}return d}Ln(e,n,r,s){const i=new hi(e,q.empty(),n,r);return s?i:i.En()}kn(e,n,r,s){const i=new hi(e,q.empty(),n,r);return s?i.En():i}Mn(e,n){const r=new kT(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.pn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Fn(n);return M.forEach(s,i=>this.Mn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Te(Fe.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}qn(e,n){const r=new ul;for(const s of ai(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.hn(s.kind);di.Ut.bt(i,o)}return r.an()}Bn(e){const n=new ul;return di.Ut.bt(e,n.hn(0)),n.an()}Qn(e,n){const r=new ul;return di.Ut.bt(Di(this.databaseId,n),r.hn(function(i){const o=ai(i);return o.length===0?0:o[o.length-1].kind}(e))),r.an()}On(e,n,r){if(r===null)return[];let s=[];s.push(new ul);let i=0;for(const o of ai(e)){const a=r[i++];for(const l of s)if(this.$n(n,o.fieldPath)&&Ic(a))s=this.Un(s,o,a);else{const c=l.hn(o.kind);di.Ut.bt(a,c)}}return this.Kn(s)}xn(e,n,r){return this.On(e,n,r.position)}Kn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].an();return n}Un(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new ul;l.seed(a.an()),di.Ut.bt(o,l.hn(n.kind)),i.push(l)}return i}$n(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=dl(e),s=ho(e);return(n?r.j(Fg,IDBKeyRange.bound(n,n)):r.j()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new ia(h.sequenceNumber,new gn(Li(h.readTime),new q(Hn(h.documentKey)),h.largestBatchId)):ia.empty(),y=d.fields.map(([x,E])=>new xi(Fe.fromServerFormat(x),E));return new sa(d.indexId,d.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ee(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=dl(e),i=ho(e);return this.Wn(e).next(o=>s.j(Fg,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(TT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.Gn(e,s,l).next(c=>{const d=this.zn(i,l);return c.isEqual(d)?M.resolve():this.jn(e,i,l,c,d)}))))})}Jn(e,n,r,s){return uo(e).put(s.An(this.uid,this.Qn(r,n.key),n.key))}Hn(e,n,r,s){return uo(e).delete(s.Rn(this.uid,this.Qn(r,n.key),n.key))}Gn(e,n,r){const s=uo(e);let i=new Te(Br);return s.X({index:g2,range:IDBKeyRange.only([r.indexId,this.uid,Pd(this.Qn(r,n))])},(o,a)=>{i=i.add(new hi(r.indexId,n,bT(a.arrayValue),bT(a.directionalValue)))}).next(()=>i)}zn(e,n){let r=new Te(Br);const s=this.qn(n,e);if(s==null)return r;const i=Og(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ic(o))for(const a of o.arrayValue.values||[])r=r.add(new hi(n.indexId,e.key,this.Bn(a),s))}else r=r.add(new hi(n.indexId,e.key,td,s));return r}jn(e,n,r,s,i){B(RT,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const y=l.getIterator(),x=c.getIterator();let E=lo(y),T=lo(x);for(;E||T;){let w=!1,v=!1;if(E&&T){const _=d(E,T);_<0?v=!0:_>0&&(w=!0)}else E!=null?v=!0:w=!0;w?(h(T),T=lo(x)):v?(p(E),E=lo(y)):(E=lo(y),T=lo(x))}}(s,i,Br,a=>{o.push(this.Jn(e,n,r,a))},a=>{o.push(this.Hn(e,n,r,a))}),M.waitFor(o)}Wn(e){let n=1;return ho(e).X({index:m2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Br(o,a)).filter((o,a,l)=>!a||Br(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Br(o,e),l=Br(o,n);if(a===0)s[0]=e.En();else if(a>0&&l<0)s.push(o),s.push(o.En());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Yn(s[o],s[o+1]))return[];const a=s[o].Rn(this.uid,td,q.empty()),l=s[o+1].Rn(this.uid,td,q.empty());i.push(IDBKeyRange.bound(a,l))}return i}Yn(e,n){return Br(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(NT)}getMinOffset(e,n){return M.mapArray(this.Fn(n),r=>this.Mn(e,r).next(s=>s||K(44426))).next(NT)}}function CT(t){return ct(t,wc)}function uo(t){return ct(t,$l)}function dl(t){return ct(t,B0)}function ho(t){return ct(t,Bl)}function NT(t){X(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;L0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new gn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ek=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e,n){const r=t.store(Dn),s=t.store(oa),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{X(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=h2(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function Ph(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(Ek,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);class Pf{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static yt(e,n,r,s){X(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Pf(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).X({index:vi,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=yo(e),o=$r(e);return o.add({}).next(a=>{X(typeof a=="number",49019);const l=new J0(a,n,r,s),c=function(y,x,E){const T=E.baseMutations.map(v=>bc(y.gt,v)),w=E.mutations.map(v=>bc(y.gt,v));return{userId:x,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:T,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Te((p,y)=>ee(p.canonicalString(),y.canonicalString()));for(const p of s){const y=h2(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(y,mF))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Zn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return $r(e).get(n).next(r=>r?(X(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ui(this.serializer,r)):null)}Xn(e,n){return this.Zn[n]?M.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Zn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return $r(e).X({index:vi,range:s},(o,a,l)=>{a.userId===this.userId&&(X(a.batchId>=r,47524,{er:r}),i=ui(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Is;return $r(e).X({index:vi,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Is],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).j(vi,n).next(r=>r.map(s=>ui(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Td(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return yo(e).X({range:s},(o,a,l)=>{const[c,d,h]=o,p=Hn(d);if(c===this.userId&&n.path.isEqual(p))return $r(e).get(h).next(y=>{if(!y)throw K(61480,{tr:o,batchId:h});X(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),i.push(ui(this.serializer,y))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(ee);const s=[];return n.forEach(i=>{const o=Td(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=yo(e).X({range:a},(c,d,h)=>{const[p,y,x]=c,E=Hn(y);p===this.userId&&i.path.isEqual(E)?r=r.add(x):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Td(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Te(ee);return yo(e).X({range:o},(l,c,d)=>{const[h,p,y]=l,x=Hn(p);h===this.userId&&r.isPrefixOf(x)?x.length===s&&(a=a.add(y)):d.done()}).next(()=>this.nr(e,a))}nr(e,n){const r=[],s=[];return n.forEach(i=>{s.push($r(e).get(i).next(o=>{if(o===null)throw K(35274,{batchId:i});X(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(ui(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Ik(e.ce,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.rr(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return yo(e).X({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Hn(i[1]);s.push(l)}else a.done()}).next(()=>{X(s.length===0,56720,{ir:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return Sk(e,this.userId,n)}sr(e){return Ak(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Is,lastStreamToken:""})}}function Sk(t,e,n){const r=Td(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return yo(t).X({range:i,Z:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function $r(t){return ct(t,Dn)}function yo(t){return ct(t,oa)}function Ak(t){return ct(t,vc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fi(0)}static ur(){return new Fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.cr(e).next(n=>{const r=new Fi(n.highestTargetId);return n.highestTargetId=r.next(),this.lr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(n=>J.fromTimestamp(new ce(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.cr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.lr(e,s)))}addTargetData(e,n){return this.hr(e,n).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(n,r),this.lr(e,r))))}updateTargetData(e,n){return this.hr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fo(e).delete(n.targetId)).next(()=>this.cr(e)).next(r=>(X(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return fo(e).X((o,a)=>{const l=Tl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return fo(e).X((r,s)=>{const i=Tl(s);n(i)})}cr(e){return VT(e).get(Th).next(n=>(X(n!==null,2888),n))}lr(e,n){return VT(e).put(Th,n)}hr(e,n){return fo(e).put(wk(this.serializer,n))}Pr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Vi(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return fo(e).X({range:s,index:p2},(o,a,l)=>{const c=Tl(a);Qc(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Yr(e);return n.forEach(o=>{const a=Mt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Yr(e);return M.forEach(n,i=>{const o=Mt(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Yr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Yr(e);let i=ae();return s.X({range:r,Z:!0},(o,a,l)=>{const c=Hn(o[1]),d=new q(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Mt(n.path),s=IDBKeyRange.bound([r],[r2(r)],!1,!0);let i=0;return Yr(e).X({index:U0,Z:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}Et(e,n){return fo(e).get(n).next(r=>r?Tl(r):null)}}function fo(t){return ct(t,aa)}function VT(t){return ct(t,Ti)}function Yr(t){return ct(t,la)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LruGarbageCollector",bk=1048576;function MT([t,e],[n,r]){const s=ee(t,n);return s===0?ee(e,r):s}class j3{constructor(e){this.Tr=e,this.buffer=new Te(MT),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();MT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(jT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?B(jT,"Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Rr(3e5)})}}class M3{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Yt.ue);const r=new j3(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(DT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DT):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),po()<=he.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function Pk(t,e){return new M3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n){this.db=e,this.garbageCollector=Pk(this,n)}mr(e){const n=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}gr(e,n){return this.wr(e,(r,s)=>n(s))}addReference(e,n,r){return nd(e,r)}removeReference(e,n,r){return nd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return nd(e,n)}Sr(e,n){return function(s,i){let o=!1;return Ak(s).ee(a=>Sk(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.wr(e,(o,a)=>{if(a<=n){const l=this.Sr(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),Yr(e).delete(function(h){return[0,Mt(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return nd(e,n)}wr(e,n){const r=Yr(e);let s,i=Yt.ue;return r.X({index:U0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Yt.ue&&n(new q(Hn(s)),i),i=c,s=l):i=Yt.ue}).next(()=>{i!==Yt.ue&&n(new q(Hn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nd(t,e){return Yr(t).put(function(r,s){return{targetId:0,path:Mt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.changes=new Vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ve.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ei(e).put(r)}removeEntry(e,n,r){return ei(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.br(e,r)))}getEntry(e,n){let r=Ve.newInvalidDocument(n);return ei(e).X({index:Ed,range:IDBKeyRange.only(hl(n))},(s,i)=>{r=this.Dr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:Ve.newInvalidDocument(n)};return ei(e).X({index:Ed,range:IDBKeyRange.only(hl(n))},(s,i)=>{r={document:this.Dr(n,i),size:Ph(i)}}).next(()=>r)}getEntries(e,n){let r=en();return this.Cr(e,n,(s,i)=>{const o=this.Dr(s,i);r=r.insert(s,o)}).next(()=>r)}Fr(e,n){let r=en(),s=new Re(q.comparator);return this.Cr(e,n,(i,o)=>{const a=this.Dr(i,o);r=r.insert(i,a),s=s.insert(i,Ph(o))}).next(()=>({documents:r,Mr:s}))}Cr(e,n,r){if(n.isEmpty())return M.resolve();let s=new Te(FT);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(hl(s.first()),hl(s.last())),o=s.getIterator();let a=o.getNext();return ei(e).X({index:Ed,range:i},(l,c,d)=>{const h=q.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&FT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.G(hl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ei(e).j(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=en();for(const h of c){const p=this.Dr(q.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Jc(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=en();const o=LT(n,r),a=LT(n,gn.max());return ei(e).X({index:f2,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Dr(q.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new F3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return OT(e).get(Lg).next(n=>(X(!!n,20021),n))}br(e,n){return OT(e).put(Lg,n)}Dr(e,n){if(n){const r=I3(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Ve.newInvalidDocument(e)}}function Ck(t){return new L3(t)}class F3 extends Rk{constructor(e,n){super(),this.Or=e,this.trackRemovals=n,this.Nr=new Vr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Te((i,o)=>ee(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Nr.get(i);if(n.push(this.Or.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=wT(this.Or.serializer,o);s=s.add(i.path.popLast());const c=Ph(l);r+=c-a.size,n.push(this.Or.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=wT(this.Or.serializer,o.convertToNoDocument(J.min()));n.push(this.Or.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Or.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Or.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Or.vr(e,n).next(r=>(this.Nr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Or.Fr(e,n).next(({documents:r,Mr:s})=>(s.forEach((i,o)=>{this.Nr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function OT(t){return ct(t,_c)}function ei(t){return ct(t,xh)}function hl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LT(t,e){const n=e.documentKey.path.toArray();return[t,bh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FT(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ee(n[i],r[i]),s)return s;return s=ee(n.length,r.length),s||(s=ee(n[n.length-2],r[r.length-2]),s||ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wl(r.mutation,s,Zt.empty(),ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Kn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=en();const o=ql(),a=function(){return ql()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof jr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Wl(d.mutation,c,d.mutation.getFieldMask(),ce.now())):o.set(c.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new U3(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ql();let s=new Re((o,a)=>o-a),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Zt.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||ae()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=K2();d.forEach(p=>{if(!i.has(p)){const y=tk(n.get(p),r.get(p));y!==null&&h.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Kn());let a=ra,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ae())).next(d=>({batchId:a,changes:H2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=wl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wl();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,p){return new Dr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ve.newInvalidDocument(d)))});let a=wl();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Wl(d.mutation,c,Zt.empty(),ce.now()),Jc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:et(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:bf(s.bundledQuery),readTime:et(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.overlays=new Re(q.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kn();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Kn(),i=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Kn(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Kn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z0(n,r));let i=this.kr.get(n);i===void 0&&(i=ae(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.qr=new Te(dt.Qr),this.$r=new Te(dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new dt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new le([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new le([])),r=new dt(n,e),s=new dt(n,e+1);let i=ae();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Te(dt.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Is:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(ee);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new dt(new q(i),0);let a=new Te(ee);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),M.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){X(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new dt(n,0),s=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.ni=e,this.docs=function(){return new Re(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Ve.newInvalidDocument(n))}getEntries(e,n){let r=en();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ve.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=en();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||L0(a2(d),r)<=0||(s.has(d.key)||Jc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G3(this)}getSize(e){return M.resolve(this.size)}}class G3 extends Rk{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.persistence=e,this.ii=new Vr(n=>Vi(n),Qc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new sv,this.targetCount=0,this._i=Fi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Fi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n){this.ai={},this.overlays={},this.ui=new Yt(0),this.ci=!1,this.ci=!0,this.li=new z3,this.referenceDelegate=e(this),this.hi=new H3(this),this.indexManager=new N3,this.remoteDocumentCache=function(s){return new W3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new _k(n),this.Ti=new B3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new q3(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const s=new K3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class K3 extends c2{constructor(e){super(),this.currentSequenceNumber=e}}class Rf{constructor(e){this.persistence=e,this.Ai=new sv,this.Ri=null}static Vi(e){return new Rf(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const s=q.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.gi=new Vr(r=>Mt(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Pk(this,n)}static Vi(e,n){return new Rh(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sd(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.serializer=e}q(e,n,r,s){const i=new gf("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Kc)}(e),function(l){l.createObjectStore(vc,{keyPath:pF}),l.createObjectStore(Dn,{keyPath:Xx,autoIncrement:!0}).createIndex(vi,Jx,{unique:!0}),l.createObjectStore(oa)}(e),UT(e),function(l){l.createObjectStore(li)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(la),l.deleteObjectStore(aa),l.deleteObjectStore(Ti)}(e),UT(e)),o=o.next(()=>function(l){const c=l.store(Ti),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return c.put(Th,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Dn).j().next(h=>{l.deleteObjectStore(Dn),l.createObjectStore(Dn,{keyPath:Xx,autoIncrement:!0}).createIndex(vi,Jx,{unique:!0});const p=c.store(Dn),y=h.map(x=>p.put(x));return M.waitFor(y)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(ca,{keyPath:EF})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.pi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(_c)}(e),this.yi(i)))),r<7&&s>=7&&(o=o.next(()=>this.wi(i))),r<8&&s>=8&&(o=o.next(()=>this.Si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.bi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(yf,{keyPath:IF})})(e),function(l){l.createObjectStore(vf,{keyPath:SF})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(_f,{keyPath:NF});c.createIndex(Ug,DF,{unique:!1}),c.createIndex(y2,VF,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(xh,{keyPath:gF});c.createIndex(Ed,yF),c.createIndex(f2,vF)}(e)).next(()=>this.Di(e,i)).next(()=>e.deleteObjectStore(li))),r<14&&s>=14&&(o=o.next(()=>this.Ci(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(B0,{keyPath:AF,autoIncrement:!0}).createIndex(Fg,bF,{unique:!1}),l.createObjectStore(Bl,{keyPath:kF}).createIndex(m2,PF,{unique:!1}),l.createObjectStore($l,{keyPath:RF}).createIndex(g2,CF,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Bl).clear()}).next(()=>{n.objectStore($l).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore($0,{keyPath:jF})})(e)})),r<18&&s>=18&&Bb()&&(o=o.next(()=>{n.objectStore(Bl).clear()}).next(()=>{n.objectStore($l).clear()})),o}yi(e){let n=0;return e.store(li).X((r,s)=>{n+=Ph(s)}).next(()=>{const r={byteSize:n};return e.store(_c).put(Lg,r)})}pi(e){const n=e.store(vc),r=e.store(Dn);return n.j().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Is],[i.userId,i.lastAcknowledgedBatchId]);return r.j(vi,o).next(a=>M.forEach(a,l=>{X(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=ui(this.serializer,l);return Ik(e,i.userId,c).next(()=>{})}))}))}wi(e){const n=e.store(la),r=e.store(li);return e.store(Ti).get(Th).next(s=>{const i=[];return r.X((o,a)=>{const l=new le(o),c=function(h){return[0,Mt(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Mt(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}Si(e,n){e.createObjectStore(wc,{keyPath:TF});const r=n.store(wc),s=new rv,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Mt(l)})}};return n.store(li).X({Z:!0},(o,a)=>{const l=new le(o);return i(l.popLast())}).next(()=>n.store(oa).X({Z:!0},([o,a,l],c)=>{const d=Hn(a);return i(d.popLast())}))}bi(e){const n=e.store(aa);return n.X((r,s)=>{const i=Tl(s),o=wk(this.serializer,i);return n.put(o)})}Di(e,n){const r=n.store(li),s=[];return r.X((i,o)=>{const a=n.store(xh),l=function(h){return h.document?new q(le.fromString(h.document.name).popFirst(5)):h.noDocument?q.fromSegments(h.noDocument.path):h.unknownDocument?q.fromSegments(h.unknownDocument.path):K(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Ci(e,n){const r=n.store(Dn),s=Ck(this.serializer),i=new iv(Rf.Vi,this.serializer.gt);return r.j().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:ae();ui(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),M.forEach(a,(l,c)=>{const d=new ft(c),h=kf.yt(this.serializer,d),p=i.getIndexManager(d),y=Pf.yt(d,this.serializer,p,i.referenceDelegate);return new Nk(s,y,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Bg(n,Yt.ue),l).next()})})}}function UT(t){t.createObjectStore(la,{keyPath:wF}).createIndex(U0,xF,{unique:!0}),t.createObjectStore(aa,{keyPath:"targetId"}).createIndex(p2,_F,{unique:!0}),t.createObjectStore(Ti)}const zr="IndexedDbPersistence",am=18e5,lm=5e3,cm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dk="main";class ov{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fi=i,this.window=o,this.document=a,this.Mi=c,this.xi=d,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=p=>Promise.resolve(),!ov.C())throw new U(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new O3(this,s),this.Qi=n+Dk,this.serializer=new _k(l),this.$i=new Yn(this.Qi,this.Oi,new Q3(this.serializer)),this.li=new A3,this.hi=new V3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ck(this.serializer),this.Ti=new S3,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&Ye(zr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(L.FAILED_PRECONDITION,cm);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Yt(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(n=>{n||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(n=>this.isPrimary&&!n?this.Yi(e).next(()=>!1):!!n&&this.Zi(e).next(()=>!0))).catch(e=>{if(zs(e))return B(zr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(zr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return fl(e).get(ao).next(n=>M.resolve(this.Xi(n)))}es(e){return rd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,am)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ct(n,ca);return r.j().next(s=>{const i=this.rs(s,am),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ui)for(const n of e)this.Ui.removeItem(this.ss(n.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?M.resolve(!0):fl(e).get(ao).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,lm)&&!this._s(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new U(L.FAILED_PRECONDITION,cm);return!1}}return!(!this.networkEnabled||!this.inForeground)||rd(e).j().next(r=>this.rs(r,lm).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B(zr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Kc,ca],e=>{const n=new Bg(e,Yt.ue);return this.Yi(n).next(()=>this.es(n))}),this.$i.close(),this.hs()}rs(e,n){return e.filter(r=>this.ns(r.updateTimeMs,n)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>rd(e).j().next(n=>this.rs(n,am).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,n){return Pf.yt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new D3(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return kf.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,n,r){B(zr,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?LF:l===17?x2:l===16?OF:l===15?z0:l===14?w2:l===13?_2:l===12?MF:l===11?v2:void K(60245)}(this.Oi);let o;return this.$i.runTransaction(e,s,i,a=>(o=new Bg(a,this.ui?this.ui.next():Yt.ue),n==="readwrite-primary"?this.Ji(o).next(l=>!!l||this.Hi(o)).next(l=>{if(!l)throw Ye(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new U(L.FAILED_PRECONDITION,l2);return r(o)}).next(l=>this.Zi(o).next(()=>l)):this.Ts(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ts(e){return fl(e).get(ao).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,lm)&&!this._s(n.ownerId)&&!this.Xi(n)&&!(this.xi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new U(L.FAILED_PRECONDITION,cm)})}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fl(e).put(ao,n)}static C(){return Yn.C()}Yi(e){const n=fl(e);return n.get(ao).next(r=>this.Xi(r)?(B(zr,"Releasing primary lease."),n.delete(ao)):M.resolve())}ns(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ye(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const n=/(?:Version|Mobile)\/1[456]/;Ub()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var n;try{const r=((n=this.Ui)===null||n===void 0?void 0:n.getItem(this.ss(e)))!==null;return B(zr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ye(zr,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Ye("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fl(t){return ct(t,Kc)}function rd(t){return ct(t,ca)}function av(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Ub()?8:u2(lt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new X3;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(po()<=he.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(po()<=he.DEBUG&&B("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(po()<=he.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ot(n))):M.resolve())}ps(e,n){if(uT(n))return M.resolve(null);let r=Ot(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sh(n,null,"F"),r=Ot(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,Sh(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,s){return uT(n)||s.isEqual(J.min())?M.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?M.resolve(null):(po()<=he.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,o,n,o2(s,ra)).next(a=>a))})}bs(e,n){let r=new Te(W2(e));return n.forEach((s,i)=>{Jc(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return po()<=he.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",mo(n)),this.gs.getDocumentsMatchingQuery(e,n,gn.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LocalStore",J3=3e8;class Y3{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Re(ee),this.Ms=new Vr(i=>Vi(i),Qc),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function jk(t,e,n,r){return new Y3(t,e,n,r)}async function Mk(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ae();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z3(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let y=M.resolve();return p.forEach(x=>{y=y.next(()=>d.getEntry(l,x)).next(E=>{const T=c.docVersions.get(x);X(T!==null,48541),E.version.compareTo(T)<0&&(h.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),d.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ok(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function e6(t,e){const n=W(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,h)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(Xe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(h,y),function(E,T,w){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=J3?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,d)&&a.push(n.hi.updateTargetData(i,y))});let l=en(),c=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(Lk(i,o,e.documentUpdates).next(d=>{l=d.Ls,c=d.ks})),!r.isEqual(J.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(h=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Fs=s,i))}function Lk(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=en();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B(cv,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:s}})}function t6(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Is),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ga(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ya(t,e,n){const r=W(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zs(o))throw o;B(cv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Ch(t,e,n){const r=W(t);let s=J.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=W(l),p=h.Ms.get(d);return p!==void 0?M.resolve(h.Fs.get(p)):h.hi.getTargetData(c,d)}(r,o,Ot(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ae())).next(a=>(Bk(r,q2(e),a),{documents:a,qs:i})))}function Fk(t,e){const n=W(t),r=W(n.hi),s=n.Fs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.Et(i,e).next(o=>o?o.target:null))}function Uk(t,e){const n=W(t),r=n.xs.get(e)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Os.getAllFromCollectionGroup(s,e,o2(r,ra),Number.MAX_SAFE_INTEGER)).then(s=>(Bk(n,e,s),s))}function Bk(t,e,n){let r=t.xs.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}async function n6(t,e,n,r){const s=W(t);let i=ae(),o=en();for(const c of n){const d=e.Qs(c.metadata.name);c.document&&(i=i.add(d));const h=e.$s(c);h.setReadTime(e.Us(c.metadata.readTime)),o=o.insert(d,h)}const a=s.Os.newChangeBuffer({trackRemovals:!0}),l=await ga(s,function(d){return Ot(Ra(le.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>Lk(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.hi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.hi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ls,d.ks)).next(()=>d.Ls)))}async function r6(t,e,n=ae()){const r=await ga(t,Ot(bf(e.bundledQuery))),s=W(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=et(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ti.saveNamedQuery(i,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return s.Fs=s.Fs.insert(a.targetId,a),s.hi.updateTargetData(i,a).next(()=>s.hi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.hi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ti.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firestore_clients";function BT(t,e){return`${$k}_${t}_${e}`}const zk="firestore_mutations";function $T(t,e,n){let r=`${zk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const qk="firestore_targets";function um(t,e){return`${qk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SharedClientState";class Nh{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ks(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new U(s.error.code,s.error.message))),o?new Nh(e,n,s.state,i):(Ye(qn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ks(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new U(r.error.code,r.error.message))),i?new Gl(e,r.state,s):(Ye(qn,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ks(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=K0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=d2(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Dh(e,i):(Ye(qn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class uv{constructor(e,n){this.clientId=e,this.onlineState=n}static Ks(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new uv(n.clientId,n.onlineState):(Ye(qn,`Failed to parse online state: ${e}`),null)}}class ty{constructor(){this.activeTargetIds=K0()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dm{constructor(e,n,r,s,i){this.window=e,this.Fi=n,this.persistenceKey=r,this.js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Re(ee),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=BT(this.persistenceKey,this.js),this.eo=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new ty),this.no=new RegExp(`^${$k}_${o}_([^_]*)$`),this.ro=new RegExp(`^${zk}_${o}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${qk}_${o}_(\\d+)$`),this.so=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.oo=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const s=this.getItem(BT(this.persistenceKey,r));if(s){const i=Dh.Ks(r,s);i&&(this.Ys=this.Ys.insert(i.clientId,i))}}this._o();const n=this.storage.getItem(this.so);if(n){const r=this.ao(n);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let n=!1;return this.Ys.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,n,r){this.lo(e,n,r),this.ho(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(um(this.persistenceKey,e));if(s){const i=Gl.Ks(e,s);i&&(r=i.state)}}return n&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(um(this.persistenceKey,e))}updateQueryState(e,n,r){this.To(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.ho(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B(qn,"READ",e,n),n}setItem(e,n){B(qn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){B(qn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(B(qn,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Ye("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.no.test(n.key)){if(n.newValue==null){const r=this.Ao(n.key);return this.Ro(r,null)}{const r=this.Vo(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.mo(n.key,n.newValue);if(r)return this.fo(r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.po(n.key,n.newValue);if(r)return this.yo(r)}}else if(n.key===this.so){if(n.newValue!==null){const r=this.ao(n.newValue);if(r)return this.uo(r)}}else if(n.key===this.eo){const r=function(i){let o=Yt.ue;if(i!=null)try{const a=JSON.parse(i);X(typeof a=="number",30636,{wo:i}),o=a}catch(a){Ye(qn,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Yt.ue&&this.sequenceNumberHandler(r)}else if(n.key===this.oo){const r=this.So(n.newValue);await Promise.all(r.map(s=>this.syncEngine.bo(s)))}}}else this.Zs.push(n)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,n,r){const s=new Nh(this.currentUser,e,n,r),i=$T(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}ho(e){const n=$T(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Io(e){const n={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(n))}To(e,n,r){const s=um(this.persistenceKey,e),i=new Gl(e,n,r);this.setItem(s,i.Ws())}Eo(e){const n=JSON.stringify(Array.from(e));this.setItem(this.oo,n)}Ao(e){const n=this.no.exec(e);return n?n[1]:null}Vo(e,n){const r=this.Ao(e);return Dh.Ks(r,n)}mo(e,n){const r=this.ro.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Nh.Ks(new ft(i),s,n)}po(e,n){const r=this.io.exec(e),s=Number(r[1]);return Gl.Ks(s,n)}ao(e){return uv.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);B(qn,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Ys.insert(e,n):this.Ys.remove(e),s=this.co(this.Ys),i=this.co(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Co(o,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let n=K0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class Wk{constructor(){this.Fo=new ty,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ty,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="ConnectivityMonitor";class qT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(zT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){B(zT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function ny(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",i6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Tc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=ny(),a=this.Go(e,n.toUriEncodedString());B(hm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,i);const{host:c}=new URL(a),d=Qi(c);return this.jo(e,a,l,r,d).then(h=>(B(hm,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Wt(hm,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=i6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class l6 extends o6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=ny();return new Promise((a,l)=>{const c=new Xb;c.setWithCredentials(!0),c.listenOnce(Jb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xd.NO_ERROR:const h=c.getResponseJson();B(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case xd.TIMEOUT:B(Nt,`RPC '${e}' ${o} timed out`),l(new U(L.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const p=c.getStatus();if(B(Nt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const E=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(x.status);l(new U(E,x.message))}else l(new U(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new U(L.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{B(Nt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);B(Nt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}P_(e,n,r){const s=ny(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e2(),a=Zb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");B(Nt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.T_(h);let p=!1,y=!1;const x=new a6({Ho:T=>{y?B(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(B(Nt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),B(Nt,`RPC '${e}' stream ${s} sending:`,T),h.send(T))},Yo:()=>h.close()}),E=(T,w,v)=>{T.listen(w,_=>{try{v(_)}catch(k){setTimeout(()=>{throw k},0)}})};return E(h,_l.EventType.OPEN,()=>{y||(B(Nt,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),E(h,_l.EventType.CLOSE,()=>{y||(y=!0,B(Nt,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(h))}),E(h,_l.EventType.ERROR,T=>{y||(y=!0,Wt(Nt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),x.__(new U(L.UNAVAILABLE,"The operation could not be completed")))}),E(h,_l.EventType.MESSAGE,T=>{var w;if(!y){const v=T.data[0];X(!!v,16349);const _=v,k=(_==null?void 0:_.error)||((w=_[0])===null||w===void 0?void 0:w.error);if(k){B(Nt,`RPC '${e}' stream ${s} received error:`,k);const D=k.status;let O=function(b){const P=nt[b];if(P!==void 0)return ik(P)}(D),A=k.message;O===void 0&&(O=L.INTERNAL,A="Unknown error status: "+D+" with message "+k.message),y=!0,x.__(new U(O,A)),h.close()}else B(Nt,`RPC '${e}' stream ${s} received:`,v),x.a_(v)}}),E(a,Yb.STAT_EVENT,T=>{T.stat===Dg.PROXY?B(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Dg.NOPROXY&&B(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return typeof window<"u"?window:null}function Rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){return new p3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&B("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="PersistentStream";class Hk{constructor(e,n,r,s,i,o,a,l){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new dv(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Ye(n.toString()),Ye("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new U(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return B(WT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(B(WT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c6 extends Hk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=y3(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?et(o.readTime):J.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Xg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Eh(l)?{documents:fk(i,l)}:{query:Af(i,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lk(i,o.resumeToken);const c=Kg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=ma(i,o.snapshotVersion.toTimestamp());const c=Kg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Xg(this.serializer),n.removeTarget=e,this.k_(n)}}class u6 extends Hk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=v3(e.writeResults,e.commitTime),r=et(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Xg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bc(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{}class h6 extends d6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Qg(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new U(L.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Qg(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(L.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class f6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ye(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class p6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(B(Ui,"Restarting streams for network reachability change."),await async function(l){const c=W(l);c.Ia.add(4),await Da(c),c.Aa.set("Unknown"),c.Ia.delete(4),await tu(c)}(this))})}),this.Aa=new f6(r,s)}}async function tu(t){if(Ws(t))for(const e of t.da)await e(!0)}async function Da(t){for(const e of t.da)await e(!1)}function Cf(t,e){const n=W(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),pv(n)?fv(n):ja(n).x_()&&hv(n,e))}function va(t,e){const n=W(t),r=ja(n);n.Ta.delete(e),r.x_()&&Kk(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ws(n)&&n.Aa.set("Unknown"))}function hv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).H_(e)}function Kk(t,e){t.Ra.$e(e),ja(t).Y_(e)}function fv(t){t.Ra=new u3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.Aa.aa()}function pv(t){return Ws(t)&&!ja(t).M_()&&t.Ta.size>0}function Ws(t){return W(t).Ia.size===0}function Qk(t){t.Ra=void 0}async function m6(t){t.Aa.set("Online")}async function g6(t){t.Ta.forEach((e,n)=>{hv(t,e)})}async function y6(t,e){Qk(t),pv(t)?(t.Aa.la(e),fv(t)):t.Aa.set("Unknown")}async function v6(t,e,n){if(t.Aa.set("Online"),e instanceof ak&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){B(Ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(t,r)}else if(e instanceof kd?t.Ra.Ye(e):e instanceof ok?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{const r=await Ok(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ta.get(c);d&&i.Ta.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ta.get(l);if(!d)return;i.Ta.set(l,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),Kk(i,l);const h=new pr(d.target,l,c,d.sequenceNumber);hv(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){B(Ui,"Failed to raise snapshot:",r),await Vh(t,r)}}async function Vh(t,e,n){if(!zs(e))throw e;t.Ia.add(1),await Da(t),t.Aa.set("Offline"),n||(n=()=>Ok(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(Ui,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await tu(t)})}function Xk(t,e){return e().catch(n=>Vh(t,n,e))}async function Va(t){const e=W(t),n=Vs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Is;for(;_6(e);)try{const s=await t6(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,w6(e,s)}catch(s){await Vh(e,s)}Jk(e)&&Yk(e)}function _6(t){return Ws(t)&&t.Pa.length<10}function w6(t,e){t.Pa.push(e);const n=Vs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Jk(t){return Ws(t)&&!Vs(t).M_()&&t.Pa.length>0}function Yk(t){Vs(t).start()}async function x6(t){Vs(t).na()}async function T6(t){const e=Vs(t);for(const n of t.Pa)e.X_(n.mutations)}async function E6(t,e,n){const r=t.Pa.shift(),s=Y0.from(r,e,n);await Xk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Va(t)}async function I6(t,e){e&&Vs(t).Z_&&await async function(r,s){if(function(o){return sk(o)&&o!==L.ABORTED}(s.code)){const i=r.Pa.shift();Vs(r).N_(),await Xk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Va(r)}}(t,e),Jk(t)&&Yk(t)}async function GT(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),B(Ui,"RemoteStore received new credentials");const r=Ws(n);n.Ia.add(3),await Da(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await tu(n)}async function ry(t,e){const n=W(t);e?(n.Ia.delete(2),await tu(n)):e||(n.Ia.add(2),await Da(n),n.Aa.set("Unknown"))}function ja(t){return t.Va||(t.Va=function(n,r,s){const i=W(n);return i.ia(),new c6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:m6.bind(null,t),e_:g6.bind(null,t),n_:y6.bind(null,t),J_:v6.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),pv(t)?fv(t):t.Aa.set("Unknown")):(await t.Va.stop(),Qk(t))})),t.Va}function Vs(t){return t.ma||(t.ma=function(n,r,s){const i=W(n);return i.ia(),new u6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:x6.bind(null,t),n_:I6.bind(null,t),ea:T6.bind(null,t),ta:E6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Va(t)):(await t.ma.stop(),t.Pa.length>0&&(B(Ui,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new mv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ma(t,e){if(Ye("AsyncQueue",`${e}: ${t}`),zs(t))return new U(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static emptySet(e){return new Ei(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.fa=new Re(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bi{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bi(e,n,Ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class A6{constructor(){this.queries=KT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=W(n),i=s.queries;s.queries=KT(),i.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new U(L.ABORTED,"Firestore shutting down"))}}function KT(){return new Vr(t=>z2(t),Xc)}async function gv(t,e){const n=W(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new S6,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ma(o,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&vv(n)}async function yv(t,e){const n=W(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function b6(t,e){const n=W(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&vv(n)}function k6(t,e,n){const r=W(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function vv(t){t.Da.forEach(e=>{e.next()})}var sy,QT;(QT=sy||(sy={})).Fa="default",QT.Cache="cache";class _v{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==sy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.qa=e,this.byteLength=n}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.serializer=e}Qs(e){return Zn(this.serializer,e)}$s(e){return e.metadata.exists?Sf(this.serializer,e.document,!1):Ve.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return et(e)}}class wv{constructor(e,n){this.$a=e,this.serializer=n,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=eP(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=le.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ga(e){const n=new Map,r=new XT(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Qs(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||ae()).add(i);n.set(o,a)}}return n}async za(e){const n=await n6(e,new XT(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const s of this.Ua)await r6(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:n}}}function eP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.key=e}}class nP{constructor(e){this.key=e}}class rP{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=W2(e),this.eu=new Ei(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new HT,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),y=Jc(this.query,h)?h:null,x=!!p&&this.mutatedKeys.has(p.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;p&&y?p.data.isEqual(y.data)?x!==E&&(r.track({type:3,doc:y}),T=!0):this.iu(p,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Xa(y,l)>0||c&&this.Xa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),T=!0):p&&!y&&(r.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(y,x){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:T})}};return E(y)-E(x)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Bi(this.query,e.eu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new HT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new nP(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new tP(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Bi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gs="SyncEngine";class P6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R6{constructor(e){this.key=e,this.lu=!1}}class C6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Vr(a=>z2(a),Xc),this.Tu=new Map,this.Iu=new Set,this.du=new Re(q.comparator),this.Eu=new Map,this.Au=new sv,this.Ru={},this.Vu=new Map,this.mu=Fi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function N6(t,e,n=!0){const r=Nf(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await sP(r,e,n,!0),s}async function D6(t,e){const n=Nf(t);await sP(n,e,!0,!1)}async function sP(t,e,n,r){const s=await ga(t.localStore,Ot(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await xv(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Cf(t.remoteStore,s),a}async function xv(t,e,n,r,s){t.gu=(h,p,y)=>async function(E,T,w,v){let _=T.view.nu(w);_.Ds&&(_=await Ch(E.localStore,T.query,!1).then(({documents:A})=>T.view.nu(A,_)));const k=v&&v.targetChanges.get(T.targetId),D=v&&v.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(_,E.isPrimaryClient,k,D);return iy(E,T.targetId,O._u),O.snapshot}(t,h,p,y);const i=await Ch(t.localStore,e,!0),o=new rP(e,i.qs),a=o.nu(i.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);iy(t,n,c._u);const d=new P6(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function V6(t,e,n){const r=W(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Xc(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ya(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&va(r.remoteStore,s.targetId),_a(r,s.targetId)}).catch($s)):(_a(r,s.targetId),await ya(r.localStore,s.targetId,!0))}async function j6(t,e){const n=W(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),va(n.remoteStore,r.targetId))}async function M6(t,e,n){const r=Sv(t);try{const s=await function(o,a){const l=W(o),c=ce.now(),d=a.reduce((y,x)=>y.add(x.key),ae());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=en(),E=ae();return l.Os.getEntries(y,d).next(T=>{x=T,x.forEach((w,v)=>{v.isValidDocument()||(E=E.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(T=>{h=T;const w=[];for(const v of a){const _=a3(v,h.get(v.key).overlayedDocument);_!=null&&w.push(new jr(v.key,_,N2(_.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,w,a)}).next(T=>{p=T;const w=T.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(y,T.batchId,w)})}).then(()=>({batchId:p.batchId,changes:H2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Re(ee)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,s.batchId,n),await Mr(r,s.changes),await Va(r.remoteStore)}catch(s){const i=Ma(s,"Failed to persist write");n.reject(i)}}async function iP(t,e){const n=W(t);try{const r=await e6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(X(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?X(o.lu,14607):s.removedDocuments.size>0&&(X(o.lu,42227),o.lu=!1))}),await Mr(n,r,e)}catch(r){await $s(r)}}function JT(t,e,n){const r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=W(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.wa)p.va(a)&&(c=!0)}),c&&vv(l)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O6(t,e,n){const r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Re(q.comparator);o=o.insert(i,Ve.newNoDocument(i,J.min()));const a=ae().add(i),l=new Zc(J.min(),new Map,new Re(ee),o,a);await iP(r,l),r.du=r.du.remove(i),r.Eu.delete(e),Iv(r)}else await ya(r.localStore,e,!1).then(()=>_a(r,e,n)).catch($s)}async function L6(t,e){const n=W(t),r=e.batch.batchId;try{const s=await Z3(n.localStore,e);Ev(n,r,null),Tv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mr(n,s)}catch(s){await $s(s)}}async function F6(t,e,n){const r=W(t);try{const s=await function(o,a){const l=W(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(X(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Ev(r,e,n),Tv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mr(r,s)}catch(s){await $s(s)}}async function U6(t,e){const n=W(t);Ws(n.remoteStore)||B(Gs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=W(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===Is)return void e.resolve();const s=n.Vu.get(r)||[];s.push(e),n.Vu.set(r,s)}catch(r){const s=Ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Tv(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Ev(t,e,n){const r=W(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function _a(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||oP(t,r)})}function oP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(va(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Iv(t))}function iy(t,e,n){for(const r of n)r instanceof tP?(t.Au.addReference(r.key,e),B6(t,r)):r instanceof nP?(B(Gs,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||oP(t,r.key)):K(19791,{yu:r})}function B6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(B(Gs,"New document in limbo: "+n),t.Iu.add(r),Iv(t))}function Iv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(le.fromString(e)),r=t.mu.next();t.Eu.set(r,new R6(n)),t.du=t.du.insert(n,r),Cf(t.remoteStore,new pr(Ot(Ra(n.path)),r,"TargetPurposeLimboResolution",Yt.ue))}}async function Mr(t,e,n){const r=W(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=lv.Es(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.hu.J_(s),await async function(l,c){const d=W(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,p=>M.forEach(p.Is,y=>d.persistence.referenceDelegate.addReference(h,p.targetId,y)).next(()=>M.forEach(p.ds,y=>d.persistence.referenceDelegate.removeReference(h,p.targetId,y)))))}catch(h){if(!zs(h))throw h;B(cv,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const y=d.Fs.get(p),x=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(x);d.Fs=d.Fs.insert(p,E)}}}(r.localStore,i))}async function $6(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){B(Gs,"User change. New user:",e.toKey());const r=await Mk(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(l=>{l.reject(new U(L.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mr(n,r.Bs)}}function z6(t,e){const n=W(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let s=ae();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}async function q6(t,e){const n=W(t),r=await Ch(n.localStore,e.query,!0),s=e.view.uu(r);return n.isPrimaryClient&&iy(n,e.targetId,s._u),s}async function W6(t,e){const n=W(t);return Uk(n.localStore,e).then(r=>Mr(n,r))}async function G6(t,e,n,r){const s=W(t),i=await function(a,l){const c=W(a),d=W(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Xn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Va(s.remoteStore):n==="acknowledged"||n==="rejected"?(Ev(s,e,r||null),Tv(s,e),function(a,l){W(W(a).mutationQueue).rr(l)}(s.localStore,e)):K(6720,"Unknown batchState",{wu:n}),await Mr(s,i)):B(Gs,"Cannot apply mutation batch with id: "+e)}async function H6(t,e){const n=W(t);if(Nf(n),Sv(n),e===!0&&n.fu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await YT(n,r.toArray());n.fu=!0,await ry(n.remoteStore,!0);for(const i of s)Cf(n.remoteStore,i)}else if(e===!1&&n.fu!==!1){const r=[];let s=Promise.resolve();n.Tu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(_a(n,o),ya(n.localStore,o,!0))),va(n.remoteStore,o)}),await s,await YT(n,r),function(o){const a=W(o);a.Eu.forEach((l,c)=>{va(a.remoteStore,c)}),a.Au.jr(),a.Eu=new Map,a.du=new Re(q.comparator)}(n),n.fu=!1,await ry(n.remoteStore,!1)}}async function YT(t,e,n){const r=W(t),s=[],i=[];for(const o of e){let a;const l=r.Tu.get(o);if(l&&l.length!==0){a=await ga(r.localStore,Ot(l[0]));for(const c of l){const d=r.Pu.get(c),h=await q6(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await Fk(r.localStore,o);a=await ga(r.localStore,c),await xv(r,aP(c),o,!1,a.resumeToken)}s.push(a)}return r.hu.J_(i),s}function aP(t){return U2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function K6(t){return function(n){return W(W(n).persistence).Ps()}(W(t).localStore)}async function Q6(t,e,n,r){const s=W(t);if(s.fu)return void B(Gs,"Ignoring unexpected query state notification.");const i=s.Tu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Uk(s.localStore,q2(i[0])),a=Zc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);await Mr(s,o,a);break}case"rejected":await ya(s.localStore,e,!0),_a(s,e,r);break;default:K(64155,n)}}async function X6(t,e,n){const r=Nf(t);if(r.fu){for(const s of e){if(r.Tu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){B(Gs,"Adding an already active target "+s);continue}const i=await Fk(r.localStore,s),o=await ga(r.localStore,i);await xv(r,aP(i),o.targetId,!1,o.resumeToken),Cf(r.remoteStore,o)}for(const s of n)r.Tu.has(s)&&await ya(r.localStore,s,!1).then(()=>{va(r.remoteStore,s),_a(r,s)}).catch($s)}}function Nf(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O6.bind(null,e),e.hu.J_=b6.bind(null,e.eventManager),e.hu.pu=k6.bind(null,e.eventManager),e}function Sv(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F6.bind(null,e),e}function J6(t,e,n){const r=W(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(y,x){const E=W(y),T=et(x.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",w=>E.Ti.getBundleMetadata(w,x.id)).then(w=>!!w&&w.createTime.compareTo(T)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(eP(l));const c=new wv(l,o.serializer);let d=await o.Su();for(;d;){const p=await c.Wa(d);p&&a._updateProgress(p),d=await o.Su()}const h=await c.za(i.localStore);return await Mr(i,h.Ja,void 0),await function(y,x){const E=W(y);return E.persistence.runTransaction("Save bundle","readwrite",T=>E.Ti.saveBundleMetadata(T,x))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(l){return Wt(Gs,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class wa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ji(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jk(this.persistence,new Vk,e.initialUser,this.serializer)}Du(e){return new iv(Rf.Vi,this.serializer)}bu(e){return new Wk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wa.provider={build:()=>new wa};class Av extends wa{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){X(this.persistence.referenceDelegate instanceof Rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kk(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new iv(r=>Rh.Vi(r,n),this.serializer)}}class bv extends wa{constructor(e,n,r){super(),this.Mu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await Sv(this.Mu.syncEngine),await Va(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return jk(this.persistence,new Vk,e.initialUser,this.serializer)}Cu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new kk(r,e.asyncQueue,n)}Fu(e,n){const r=new hF(n,this.persistence);return new dF(e.asyncQueue,r)}Du(e){const n=av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new ov(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Gk(),Rd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Wk}}class lP extends bv{constructor(e,n){super(e,n,!1),this.Mu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Mu.syncEngine;this.sharedClientState instanceof dm&&(this.sharedClientState.syncEngine={Do:G6.bind(null,n),vo:Q6.bind(null,n),Co:X6.bind(null,n),Ps:K6.bind(null,n),bo:W6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ji(async r=>{await H6(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}bu(e){const n=Gk();if(!dm.C(n))throw new U(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class js{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$6.bind(null,this.syncEngine),await ry(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A6}()}createDatastore(e){const n=Ji(e.databaseInfo.databaseId),r=function(i){return new l6(i)}(e.databaseInfo);return function(i,o,a,l){return new h6(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new p6(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JT(this.syncEngine,n,0),function(){return qT.C()?new qT:new s6}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new C6(s,i,o,a,l,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=W(s);B(Ui,"RemoteStore shutting down."),i.Ia.add(5),await Da(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}js.provider={build:()=>new js};function ZT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ye("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n){this.Nu=e,this.serializer=n,this.metadata=new gt,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const n=this.Bu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const s=await this.Qu(r);return new Zk(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),n=this.Qu(e);return new Zk(JSON.parse(n),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new U(L.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=W(s),a={documents:i.map(h=>Ac(o.serializer,h))},l=await o.Jo("BatchGetDocuments",o.serializer.databaseId,le.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const p=g3(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return i.forEach(h=>{const p=c.get(h.toString());X(!!p,55234,{key:h}),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Na(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=q.fromPath(r);this.mutations.push(new X0(s,this.precondition(s)))}),await async function(r,s){const i=W(r),o={writes:s.map(a=>bc(i.serializer,a))};await i.Wo("Commit",i.serializer.databaseId,le.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K(50498,{Wu:e.constructor.name});n=J.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new U(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new U(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.Gu=r.maxAttempts,this.F_=new dv(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new e9(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Hu(s)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Hc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class n9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=M0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{B(Ms,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(B(Ms,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ma(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fm(t,e){t.asyncQueue.verifyOperationInProgress(),B(Ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Mk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Wt("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Wt("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function eE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kv(t);B(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>GT(e.remoteStore,s)),t._onlineComponents=e}async function kv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Ms,"Using user provided OfflineComponentProvider");try{await fm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wt("Error using user provided cache. Falling back to memory cache: "+n),await fm(t,new wa)}}else B(Ms,"Using default OfflineComponentProvider"),await fm(t,new Av(void 0));return t._offlineComponents}async function Vf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Ms,"Using user provided OnlineComponentProvider"),await eE(t,t._uninitializedComponentsProvider._online)):(B(Ms,"Using default OnlineComponentProvider"),await eE(t,new js))),t._onlineComponents}function cP(t){return kv(t).then(e=>e.persistence)}function Oa(t){return kv(t).then(e=>e.localStore)}function uP(t){return Vf(t).then(e=>e.remoteStore)}function Pv(t){return Vf(t).then(e=>e.syncEngine)}function dP(t){return Vf(t).then(e=>e.datastore)}async function xa(t){const e=await Vf(t),n=e.eventManager;return n.onListen=N6.bind(null,e.syncEngine),n.onUnlisten=V6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j6.bind(null,e.syncEngine),n}function r9(t){return t.asyncQueue.enqueue(async()=>{const e=await cP(t),n=await uP(t);return e.setNetworkEnabled(!0),function(s){const i=W(s);return i.Ia.delete(0),tu(i)}(n)})}function s9(t){return t.asyncQueue.enqueue(async()=>{const e=await cP(t),n=await uP(t);return e.setNetworkEnabled(!1),async function(s){const i=W(s);i.Ia.add(0),await Da(i),i.Aa.set("Offline")}(n)})}function i9(t,e){const n=new gt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=W(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ma(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Oa(t),e,n)),n.promise}function hP(t,e,n={}){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Df({next:p=>{d.Ou(),o.enqueueAndForget(()=>yv(i,h));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new U(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new U(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new _v(Ra(a.path),d,{includeMetadataChanges:!0,ka:!0});return gv(i,h)}(await xa(t),t.asyncQueue,e,n,r)),r.promise}function o9(t,e){const n=new gt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Ch(s,i,!0),l=new rP(i,a.qs),c=l.nu(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ma(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Oa(t),e,n)),n.promise}function fP(t,e,n={}){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Df({next:p=>{d.Ou(),o.enqueueAndForget(()=>yv(i,h)),p.fromCache&&l.source==="server"?c.reject(new U(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new _v(a,d,{includeMetadataChanges:!0,ka:!0});return gv(i,h)}(await xa(t),t.asyncQueue,e,n,r)),r.promise}function a9(t,e,n){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await dP(t);r.resolve(async function(o,a,l){var c;const d=W(o),{request:h,ft:p,parent:y}=pk(d.serializer,B2(a),l);d.connection.Qo||delete h.parent;const x=(await d.Jo("RunAggregationQuery",d.serializer.databaseId,y,h,1)).filter(T=>!!T.result);X(x.length===1,64727);const E=(c=x[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(E).reduce((T,w)=>(T[p[w]]=E[w],T),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function l9(t,e){const n=new Df(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){W(s).Da.add(i),i.next()}(await xa(t),n)),()=>{n.Ou(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){W(s).Da.delete(i)}(await xa(t),n))}}function c9(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?j0().encode(o):o,function(d,h){return new Y6(d,h)}(function(d,h){if(d instanceof Uint8Array)return ZT(d,h);if(d instanceof ArrayBuffer)return ZT(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Ji(e));t.asyncQueue.enqueueAndForget(async()=>{J6(await Pv(t),s,r)})}function u9(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=W(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ti.getNamedQuery(o,s))}(await Oa(t),e))}function pP(t,e){return function(r,s){return new Z6(r,s)}(t,e)}function d9(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=W(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,p,y,x,E){h=[...h],p=[...p],h.sort(y),p.sort(y);const T=h.length,w=p.length;let v=0,_=0;for(;v<w&&_<T;){const k=y(h[_],p[v]);k<0?E(h[_++]):k>0?x(p[v++]):(v++,_++)}for(;v<w;)x(p[v++]);for(;_<T;)E(h[_++])}(c,s,aF,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>M.waitFor(a)))}(await Oa(t),e))}function h9(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){W(r).Cs.Rs=s}(await Oa(t),e))}function f9(t){return t.asyncQueue.enqueue(async()=>function(n){const r=W(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await Oa(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firestore.googleapis.com",nE=!0;class rE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gP,this.ssl=nE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:nE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ek;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bk)throw new U(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J5;switch(r.type){case"firstParty":return new tF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tE.get(n);r&&(B("ComponentProvider","Removing Datastore"),tE.delete(n),r.terminate())}(this),Promise.resolve()}}function p9(t,e,n,r={}){var s;t=ue(t,nu);const i=Qi(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(C0(`https://${l}`),Lb("Firestore",!0)),o.host!==gP&&o.host!==l&&Wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Un(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=ft.MOCK_USER;else{d=AL(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new U(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ft(p)}t._authCredentials=new Y5(new n2(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yt(this.firestore,e,this._query)}}class Ie{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ie(this.firestore,e,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xi(n,Ie._jsonSchema))return new Ie(e,r||null,new q(le.fromString(n.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:it("string",Ie._jsonSchemaVersion),referencePath:it("string")};class er extends yt{constructor(e,n,r){super(e,n,Ra(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ie(this.firestore,null,new q(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function ru(t,e,...n){if(t=Me(t),O0("collection","path",e),t instanceof nu){const r=le.fromString(e,...n);return Wx(r),new er(t,null,r)}{if(!(t instanceof Ie||t instanceof er))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(le.fromString(e,...n));return Wx(r),new er(t.firestore,null,r)}}function Z8(t,e){if(t=ue(t,nu),O0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yt(t,null,function(r){return new Dr(le.emptyPath(),r)}(e))}function Ft(t,e,...n){if(t=Me(t),arguments.length===1&&(e=M0.newId()),O0("doc","path",e),t instanceof nu){const r=le.fromString(e,...n);return qx(r),new Ie(t,null,new q(r))}{if(!(t instanceof Ie||t instanceof er))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(le.fromString(e,...n));return qx(r),new Ie(t.firestore,t instanceof er?t.converter:null,new q(r))}}function e7(t,e){return t=Me(t),e=Me(e),(t instanceof Ie||t instanceof er)&&(e instanceof Ie||e instanceof er)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function yP(t,e){return t=Me(t),e=Me(e),t instanceof yt&&e instanceof yt&&t.firestore===e.firestore&&Xc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="AsyncQueue";class iE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new dv(this,"async_queue_retry"),this.oc=()=>{const r=Rd();r&&B(sE,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Rd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Rd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new gt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zs(e))throw e;B(sE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ye("INTERNAL UNHANDLED ERROR: ",oE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=mv.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&K(47125,{hc:oE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function oE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class m9{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=-1;class Ae extends nu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new iE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iE(e),this._firestoreClient=void 0,await e}}}function n7(t,e,n){n||(n=Tc);const r=Gc(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Un(i,e))return s;throw new U(L.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new U(L.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bk)throw new U(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Qi(e.host)&&C0(e.host),r.initialize({options:e,instanceIdentifier:n})}function g9(t,e){const n=typeof t=="object"?t:Gb(),r=typeof t=="string"?t:e||Tc,s=Gc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=IL("firestore");i&&p9(s,...i)}return s}function Ge(t){if(t._terminated)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vP(t),t._firestoreClient}function vP(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new UF(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mP(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new n9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function r7(t,e){Wt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return _P(t,js.provider,{build:r=>new bv(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function s7(t){Wt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();_P(t,js.provider,{build:n=>new lP(n,e.cacheSizeBytes)})}function _P(t,e,n){if((t=ue(t,Ae))._firestoreClient||t._terminated)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new U(L.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},vP(t)}function i7(t){if(t._initialized&&!t._terminated)throw new U(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Yn.C())return Promise.resolve();const s=r+Dk;await Yn.delete(s)}(av(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function o7(t){return function(n){const r=new gt;return n.asyncQueue.enqueueAndForget(async()=>U6(await Pv(n),r)),r.promise}(Ge(t=ue(t,Ae)))}function a7(t){return r9(Ge(t=ue(t,Ae)))}function l7(t){return s9(Ge(t=ue(t,Ae)))}function c7(t){return L5(t.app,"firestore",t._databaseId.database),t._delete()}function aE(t,e){const n=Ge(t=ue(t,Ae)),r=new m9;return c9(n,t._databaseId,e,r),r}function y9(t,e){return u9(Ge(t=ue(t,Ae)),e).then(n=>n?new yt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class v9{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(Xe.fromBase64String(e))}catch(n){throw new U(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cn(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xi(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:it("string",cn._jsonSchemaVersion),bytes:it("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function u7(){return new Yi(Mg)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tr._jsonSchemaVersion}}static fromJSON(e){if(Xi(e,tr._jsonSchema))return new tr(e.latitude,e.longitude)}}tr._jsonSchemaVersion="firestore/geoPoint/1.0",tr._jsonSchema={type:it("string",tr._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xi(e,Ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ln(e.vectorValues);throw new U(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:it("string",Ln._jsonSchemaVersion),vectorValues:it("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=/^__.*__$/;class w9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class wP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}class jf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xP(this.Ec)&&_9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class x9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ji(e)}Dc(e,n,r,s=!1){return new jf({Ec:e,methodName:n,bc:r,path:Fe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eo(t){const e=t._freezeSettings(),n=Ji(t._databaseId);return new x9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mf(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Mv("Data must be an object, but it was:",o,r);const a=IP(r,o);let l,c;if(i.merge)l=new Zt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=Pc(e,h,n);if(!o.contains(p))throw new U(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);AP(d,p)||d.push(p)}l=new Zt(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new w9(new Tt(a),l,c)}class su extends Zi{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof su}}function TP(t,e,n){return new jf({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rv extends Zi{_toFieldTransform(e){return new Yc(e.path,new fa)}isEqual(e){return e instanceof Rv}}class Cv extends Zi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=TP(this,e,!0),r=this.vc.map(i=>to(i,n)),s=new ji(r);return new Yc(e.path,s)}isEqual(e){return e instanceof Cv&&Un(this.vc,e.vc)}}class Nv extends Zi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=TP(this,e,!0),r=this.vc.map(i=>to(i,n)),s=new Mi(r);return new Yc(e.path,s)}isEqual(e){return e instanceof Nv&&Un(this.vc,e.vc)}}class Dv extends Zi{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new pa(e.serializer,X2(e.serializer,this.Cc));return new Yc(e.path,n)}isEqual(e){return e instanceof Dv&&this.Cc===e.Cc}}function Vv(t,e,n,r){const s=t.Dc(1,e,n);Mv("Data must be an object, but it was:",s,r);const i=[],o=Tt.empty();qs(r,(l,c)=>{const d=Of(e,l,n);c=Me(c);const h=s.gc(d);if(c instanceof su)i.push(d);else{const p=to(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Zt(i);return new wP(o,a,s.fieldTransforms)}function jv(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[Pc(e,r,n)],l=[s];if(i.length%2!=0)throw new U(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Pc(e,i[p])),l.push(i[p+1]);const c=[],d=Tt.empty();for(let p=a.length-1;p>=0;--p)if(!AP(c,a[p])){const y=a[p];let x=l[p];x=Me(x);const E=o.gc(y);if(x instanceof su)c.push(y);else{const T=to(x,E);T!=null&&(c.push(y),d.set(y,T))}}const h=new Zt(c);return new wP(d,h,o.fieldTransforms)}function EP(t,e,n,r=!1){return to(n,t.Dc(r?4:3,e))}function to(t,e){if(SP(t=Me(t)))return Mv("Unsupported field value:",e,t),IP(t,e);if(t instanceof Zi)return function(r,s){if(!xP(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=to(a,s.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ce.fromDate(r);return{timestampValue:ma(s.serializer,i)}}if(r instanceof ce){const i=new ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ma(s.serializer,i)}}if(r instanceof tr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cn)return{bytesValue:lk(s.serializer,r._byteString)};if(r instanceof Ie){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ln)return function(o,a){return{mapValue:{fields:{[q0]:{stringValue:W0},[ua]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return Q0(a.serializer,c)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${mf(r)}`)}(t,e)}function IP(t,e){const n={};return E2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(r,s)=>{const i=to(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function SP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ce||t instanceof tr||t instanceof cn||t instanceof Ie||t instanceof Zi||t instanceof Ln)}function Mv(t,e,n){if(!SP(n)||!s2(n)){const r=mf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Pc(t,e,n){if((e=Me(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return Of(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const T9=new RegExp("[~\\*/\\[\\]]");function Of(t,e,n){if(e.search(T9)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yi(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new U(L.INVALID_ARGUMENT,a+t+l)}function AP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E9 extends Rc{data(){return super.data()}}function Lf(t,e){return typeof e=="string"?Of(t,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ov{}class iu extends Ov{}function Ff(t,e,...n){let r=[];e instanceof Ov&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof La).length,a=i.filter(l=>l instanceof ou).length;if(o>1||o>0&&a>0)throw new U(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ou extends iu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ou(e,n,r)}_apply(e){const n=this._parse(e);return CP(e._query,n),new yt(e.firestore,e.converter,Hg(e._query,n))}_parse(e){const n=eo(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new U(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cE(h,d);const x=[];for(const E of h)x.push(lE(l,i,E));p={arrayValue:{values:x}}}else p=lE(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cE(h,d),p=EP(a,o,h,d==="in"||d==="not-in");return fe.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kP(t,e,n){const r=e,s=Lf("where",t);return ou._create(s,r,n)}class La extends Ov{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new La(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:we.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)CP(o,l),o=Hg(o,l)}(e._query,n),new yt(e.firestore,e.converter,Hg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function d7(...t){return t.forEach(e=>NP("or",e)),La._create("or",t)}function h7(...t){return t.forEach(e=>NP("and",e)),La._create("and",t)}class Lv extends iu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lv(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(i,o)}(e._query,this._field,this._direction);return new yt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Dr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function PP(t,e="asc"){const n=e,r=Lf("orderBy",t);return Lv._create(r,n)}class Uf extends iu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Uf(e,n,r)}_apply(e){return new yt(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function f7(t){return i2("limit",t),Uf._create("limit",t,"F")}function p7(t){return i2("limitToLast",t),Uf._create("limitToLast",t,"L")}class Bf extends iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=RP(e,this.type,this._docOrFields,this._inclusive);return new yt(e.firestore,e.converter,function(s,i){return new Dr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function m7(...t){return Bf._create("startAt",t,!0)}function g7(...t){return Bf._create("startAfter",t,!1)}class $f extends iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new $f(e,n,r)}_apply(e){const n=RP(e,this.type,this._docOrFields,this._inclusive);return new yt(e.firestore,e.converter,function(s,i){return new Dr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function y7(...t){return $f._create("endBefore",t,!1)}function v7(...t){return $f._create("endAt",t,!0)}function RP(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof Rc)return function(i,o,a,l,c){if(!l)throw new U(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Bo(i))if(h.field.isKeyField())d.push(Di(o,l.key));else{const p=l.data.field(h.field);if(wf(p))throw new U(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=h.field.canonicalString();throw new U(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(p)}return new Ds(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=eo(t.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new U(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let x=0;x<d.length;x++){const E=d[x];if(p[x].field.isKeyField()){if(typeof E!="string")throw new U(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!H0(o)&&E.indexOf("/")!==-1)throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const T=o.path.child(le.fromString(E));if(!q.isDocumentKey(T))throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const w=new q(T);y.push(Di(a,w))}else{const T=EP(l,c,E);y.push(T)}}return new Ds(y,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function lE(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H0(e)&&n.indexOf("/")!==-1)throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(le.fromString(n));if(!q.isDocumentKey(r))throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Di(t,new q(r))}if(n instanceof Ie)return Di(t,n._key);throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}function cE(t,e){if(!Array.isArray(t)||t.length===0)throw new U(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CP(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new U(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NP(t,e){if(!(e instanceof ou||e instanceof La))throw new U(L.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class DP{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[ua].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new Ln(i)}convertGeoPoint(e){return new tr(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=le.fromString(e);X(vk(r),9688,{name:e});const s=new Ni(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||Ye(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Fv extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ie(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){return new kc("sum",Pc("sum",t))}function w7(t){return new kc("avg",Pc("average",t))}function I9(){return new kc("count")}function x7(t,e){var n,r;return t instanceof kc&&e instanceof kc&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function T7(t,e){return yP(t.query,e.query)&&Un(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="NOT SUPPORTED";class as{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hn extends Rc{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function E7(t,e,n){if(Xi(e,hn._jsonSchema)){if(e.bundle===VP)throw new U(L.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ji(t._databaseId),s=pP(e.bundle,r),i=s.Ku(),o=new wv(s.getMetadata(),r);for(const d of i)o.Wa(d);const a=o.documents;if(a.length!==1)throw new U(L.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Sf(r,a[0].document),c=new q(le.fromString(e.bundleName));return new hn(t,new Fv(t),c,l,new as(!1,!1),n||null)}}hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",hn._jsonSchema={type:it("string",hn._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class Cd extends hn{data(e={}){return super.data(e)}}class fn{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new as(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cd(this._firestore,this._userDataWriter,r.key,r,new as(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Cd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new as(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Cd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new as(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:S9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=M0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function I7(t,e,n){if(Xi(e,fn._jsonSchema)){if(e.bundle===VP)throw new U(L.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ji(t._databaseId),s=pP(e.bundle,r),i=s.Ku(),o=new wv(s.getMetadata(),r);for(const p of i)o.Wa(p);if(o.queries.length!==1)throw new U(L.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=bf(o.queries[0].bundledQuery),l=o.documents;let c=new Ei;l.map(p=>{const y=Sf(r,p.document);c=c.add(y)});const d=Bi.fromInitialDocuments(a,c,ae(),!1,!1),h=new yt(t,n||null,a);return new fn(t,new Fv(t),h,d)}}function S9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}function S7(t,e){return t instanceof hn&&e instanceof hn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fn&&e instanceof fn&&t._firestore===e._firestore&&yP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){t=ue(t,Ie);const e=ue(t.firestore,Ae);return hP(Ge(e),t._key).then(n=>Uv(e,t,n))}fn._jsonSchemaVersion="firestore/querySnapshot/1.0",fn._jsonSchema={type:it("string",fn._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class Hs extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ie(this.firestore,null,n)}}function A7(t){t=ue(t,Ie);const e=ue(t.firestore,Ae),n=Ge(e),r=new Hs(e);return i9(n,t._key).then(s=>new hn(e,r,t._key,s,new as(s!==null&&s.hasLocalMutations,!0),t.converter))}function b7(t){t=ue(t,Ie);const e=ue(t.firestore,Ae);return hP(Ge(e),t._key,{source:"server"}).then(n=>Uv(e,t,n))}function jP(t){t=ue(t,yt);const e=ue(t.firestore,Ae),n=Ge(e),r=new Hs(e);return bP(t._query),fP(n,t._query).then(s=>new fn(e,r,t,s))}function k7(t){t=ue(t,yt);const e=ue(t.firestore,Ae),n=Ge(e),r=new Hs(e);return o9(n,t._query).then(s=>new fn(e,r,t,s))}function P7(t){t=ue(t,yt);const e=ue(t.firestore,Ae),n=Ge(e),r=new Hs(e);return fP(n,t._query,{source:"server"}).then(s=>new fn(e,r,t,s))}function lu(t,e,n){t=ue(t,Ie);const r=ue(t.firestore,Ae),s=zf(t.converter,e,n);return cu(r,[Mf(eo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ue.none())])}function A9(t,e,n,...r){t=ue(t,Ie);const s=ue(t.firestore,Ae),i=eo(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof Yi?jv(i,"updateDoc",t._key,e,n,r):Vv(i,"updateDoc",t._key,e),cu(s,[o.toMutation(t._key,Ue.exists(!0))])}function b9(t){return cu(ue(t.firestore,Ae),[new Na(t._key,Ue.none())])}function R7(t,e){const n=ue(t.firestore,Ae),r=Ft(t),s=zf(t.converter,e);return cu(n,[Mf(eo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function $i(t,...e){var n,r,s;t=Me(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$o(e[o])||(i=e[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if($o(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof Ie)c=ue(t.firestore,Ae),d=Ra(t._key.path),l={next:h=>{e[o]&&e[o](Uv(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ue(t,yt);c=ue(h.firestore,Ae),d=h._query;const p=new Hs(c);l={next:y=>{e[o]&&e[o](new fn(c,p,h,y))},error:e[o+1],complete:e[o+2]},bP(t._query)}return function(p,y,x,E){const T=new Df(E),w=new _v(y,T,x);return p.asyncQueue.enqueueAndForget(async()=>gv(await xa(p),w)),()=>{T.Ou(),p.asyncQueue.enqueueAndForget(async()=>yv(await xa(p),w))}}(Ge(c),d,a,l)}function C7(t,e,...n){const r=Me(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const p=l[h];if(typeof p!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(p.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=p:h==="bundleName"?c.bundleName=p:h==="bundleSource"&&(c.bundleSource=p)}return c}(e);if(s.error)throw new U(L.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||$o(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&$o(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,p,y){let x,E=!1;return aE(c,d.bundle).then(()=>y9(c,d.bundleName)).then(w=>{w&&!E&&(y&&w.withConverter(y),x=$i(w,h||{},p))}).catch(w=>(p.error&&p.error(w),()=>{})),()=>{E||(E=!0,x&&x())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&$o(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,p,y){let x,E=!1;return aE(c,d.bundle).then(()=>{if(!E){const w=new Ie(c,y||null,q.fromPath(d.bundleName));x=$i(w,h||{},p)}}).catch(w=>(p.error&&p.error(w),()=>{})),()=>{E||(E=!0,x&&x())}}(r,s,i,a,n[o])}throw new U(L.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function N7(t,e){return l9(Ge(t=ue(t,Ae)),$o(e)?e:{next:e})}function cu(t,e){return function(r,s){const i=new gt;return r.asyncQueue.enqueueAndForget(async()=>M6(await Pv(r),s,i)),i.promise}(Ge(t),e)}function Uv(t,e,n){const r=n.docs.get(e._key),s=new Hs(t);return new hn(t,s,e._key,r,new as(n.hasPendingWrites,n.fromCache),e.converter)}function D7(t){return k9(t,{count:I9()})}function k9(t,e){const n=ue(t.firestore,Ae),r=Ge(n),s=T2(e,(i,o)=>new rk(o,i.aggregateType,i._internalFieldPath));return a9(r,t._query,s).then(i=>function(a,l,c){const d=new Hs(a);return new v9(l,d,c)}(n,t,i))}class P9{constructor(e){this.kind="memory",this._onlineComponentProvider=js.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new Av(void 0)}}toJSON(){return{kind:this.kind}}}class R9{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=j9(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class C9{constructor(){this.kind="memoryEager",this._offlineComponentProvider=wa.provider}toJSON(){return{kind:this.kind}}}class N9{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Av(e)}}toJSON(){return{kind:this.kind}}}function V7(){return new C9}function j7(t){return new N9(t==null?void 0:t.cacheSizeBytes)}function M7(t){return new P9(t)}function O7(t){return new R9(t)}class D9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=js.provider,this._offlineComponentProvider={build:n=>new bv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class V9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=js.provider,this._offlineComponentProvider={build:n=>new lP(n,e==null?void 0:e.cacheSizeBytes)}}}function j9(t){return new D9(t==null?void 0:t.forceOwnership)}function L7(){return new V9}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,n,r){this._verifyNotCommitted();const s=ls(e,this._firestore),i=zf(s.converter,n,r),o=Mf(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ue.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=ls(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof Yi?jv(this._dataReader,"WriteBatch.update",i._key,n,r,s):Vv(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ls(e,this._firestore);return this._mutations=this._mutations.concat(new Na(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ls(t,e){if((t=Me(t)).firestore!==e)throw new U(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=eo(e)}get(e){const n=ls(e,this._firestore),r=new Fv(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return K(24041);const i=s[0];if(i.isFoundDocument())return new Rc(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rc(this._firestore,r,n._key,null,n.converter);throw K(18433,{doc:i})})}set(e,n,r){const s=ls(e,this._firestore),i=zf(s.converter,n,r),o=Mf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=ls(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof Yi?jv(this._dataReader,"Transaction.update",i._key,n,r,s):Vv(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=ls(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9 extends L9{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ls(e,this._firestore),r=new Hs(this._firestore);return super.get(e).then(s=>new hn(this._firestore,r,n._key,s._document,new as(!1,!1),n.converter))}}function F7(t,e,n){t=ue(t,Ae);const r=Object.assign(Object.assign({},M9),n);return function(i){if(i.maxAttempts<1)throw new U(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new gt;return i.asyncQueue.enqueueAndForget(async()=>{const c=await dP(i);new t9(i.asyncQueue,c,a,o,l).zu()}),l.promise}(Ge(t),s=>e(new F9(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(){return new su("deleteField")}function B7(){return new Rv("serverTimestamp")}function $7(...t){return new Cv("arrayUnion",t)}function z7(...t){return new Nv("arrayRemove",t)}function q7(t){return new Dv("increment",t)}function W7(t){return new Ln(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){return Ge(t=ue(t,Ae)),new O9(t,e=>cu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t,e){const n=Ge(t=ue(t,Ae));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Wt("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new U(L.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=uE(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const p=Of("setIndexConfiguration",uE(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new xi(p,2)):h.order==="ASCENDING"?d.push(new xi(p,0)):h.order==="DESCENDING"&&d.push(new xi(p,1))}a.push(new sa(sa.UNKNOWN_ID,c,d,ia.empty()))}return a}(e);return d9(n,r)}function uE(t,e){if(typeof t[e]!="string")throw new U(L.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function K7(t){var e;t=ue(t,Ae);const n=dE.get(t);if(n)return n;if(((e=Ge(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new U9(t);return dE.set(t,r),r}function Q7(t){MP(t,!0)}function X7(t){MP(t,!1)}function J7(t){f9(Ge(t._firestore)).then(e=>B("deleting all persistent cache indexes succeeded")).catch(e=>Wt("deleting all persistent cache indexes failed",e))}function MP(t,e){h9(Ge(t._firestore),e).then(n=>B(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Wt(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const dE=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){var e;const n=(e=Ge(ue(t.firestore,Ae))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:Af(n,Ot(t._query)).Vt}function Z7(t,e){var n;const r=T2(e,(i,o)=>new rk(o,i.aggregateType,i._internalFieldPath)),s=(n=Ge(ue(t.firestore,Ae))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return s===void 0?null:pk(s,B2(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Bv.instance.onExistenceFilterMismatch(e)}}class Bv{constructor(){this.Fc=new Map}static get instance(){return id||(id=new Bv,function(n){if(Ah)throw new Error("a TestingHooksSpi instance is already set");Ah=n}(id)),id}ct(e){this.Fc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Fc;return r.set(n,e),()=>r.delete(n)}}let id=null;(function(e,n=!0){(function(s){Pa=s})(ka),ta(new Ci("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ae(new Z5(r.getProvider("auth-internal")),new nF(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new U(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ni(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ts(Bx,$x,e),Ts(Bx,$x,"esm2017")})();var B9="firebase",$9="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(B9,$9,"app");function $v(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function OP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z9=OP,LP=new qc("auth","Firebase",OP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new N0("@firebase/auth");function q9(t,...e){Mh.logLevel<=he.WARN&&Mh.warn(`Auth (${ka}): ${t}`,...e)}function Nd(t,...e){Mh.logLevel<=he.ERROR&&Mh.error(`Auth (${ka}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,...e){throw zv(t,...e)}function nr(t,...e){return zv(t,...e)}function FP(t,e,n){const r=Object.assign(Object.assign({},z9()),{[e]:n});return new qc("auth","Firebase",r).create(e,{appName:t.name})}function Ii(t){return FP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LP.create(t,...e)}function re(t,e,...n){if(!t)throw zv(e,...n)}function mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function Pr(t,e){t||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function W9(){return hE()==="http:"||hE()==="https:"}function hE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W9()||CL()||"connection"in navigator)?navigator.onLine:!0}function H9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=PL()||NL()}get(){return G9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){Pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X9=new uu(3e4,6e4);function Wv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fa(t,e,n,r,s={}){return BP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Wc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return RL()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(c.credentials="include"),UP.fetch()(await $P(t,t.config.apiHost,n,a),c)})}async function BP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},K9),e);try{const s=new Y9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw od(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw od(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw od(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw FP(t,d,c);kr(t,d)}}catch(s){if(s instanceof Nr)throw s;kr(t,"network-request-failed",{message:String(s)})}}async function J9(t,e,n,r,s={}){const i=await Fa(t,e,n,r,s);return"mfaPendingCredential"in i&&kr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function $P(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?qv(t.config,s):`${t.config.apiScheme}://${s}`;return Q9.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Y9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),X9.get())})}}function od(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(t,e){return Fa(t,"POST","/v1/accounts:delete",e)}async function Oh(t,e){return Fa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eU(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=Gv(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Hl(pm(s.auth_time)),issuedAtTime:Hl(pm(s.iat)),expirationTime:Hl(pm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function pm(t){return Number(t)*1e3}function Gv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const s=Db(n);return s?JSON.parse(s):(Nd("Failed to decode base64 JWT payload"),null)}catch(s){return Nd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fE(t){const e=Gv(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&tU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Cc(t,Oh(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zP(i.providerUserInfo):[],a=sU(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ay(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function rU(t){const e=Me(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zP(t){return t.map(e=>{var{providerId:n}=e,r=$v(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,e){const n=await BP(t,{},async()=>{const r=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await $P(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(l.credentials="include"),UP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oU(t,e){return Fa(t,"POST","/v2/accounts:revokeToken",Wv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=fE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new zo;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=$v(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ay(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eU(this,e)}reload(){return rU(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await Cc(this,Z9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:k,isAnonymous:D,providerData:O,stsTokenManager:A}=n;re(_&&A,e,"internal-error");const I=zo.fromJSON(this.name,A);re(typeof _=="string",e,"internal-error"),qr(h,e.name),qr(p,e.name),re(typeof k=="boolean",e,"internal-error"),re(typeof D=="boolean",e,"internal-error"),qr(y,e.name),qr(x,e.name),qr(E,e.name),qr(T,e.name),qr(w,e.name),qr(v,e.name);const b=new jn({uid:_,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:D,photoURL:x,phoneNumber:y,tenantId:E,stsTokenManager:I,createdAt:w,lastLoginAt:v});return O&&Array.isArray(O)&&(b.providerData=O.map(P=>Object.assign({},P))),T&&(b._redirectEventId=T),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new zo;s.updateFromServerResponse(n);const i=new jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new zo;a.updateFromIdToken(r);const l=new jn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;function gr(t){Pr(t instanceof Function,"Expected a class definition");let e=pE.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qP.type="NONE";const mE=qP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e,n){return`firebase:${t}:${e}:${n}`}class qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qo(gr(mE),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||gr(mE);const o=Dd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Oh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await jn._fromGetAccountInfoResponse(e,p,d)}else h=jn._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new qo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new qo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XP(e))return"Blackberry";if(JP(e))return"Webos";if(GP(e))return"Safari";if((e.includes("chrome/")||HP(e))&&!e.includes("edge/"))return"Chrome";if(QP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WP(t=lt()){return/firefox\//i.test(t)}function GP(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HP(t=lt()){return/crios\//i.test(t)}function KP(t=lt()){return/iemobile/i.test(t)}function QP(t=lt()){return/android/i.test(t)}function XP(t=lt()){return/blackberry/i.test(t)}function JP(t=lt()){return/webos/i.test(t)}function Hv(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aU(t=lt()){var e;return Hv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lU(){return DL()&&document.documentMode===10}function YP(t=lt()){return Hv(t)||QP(t)||JP(t)||XP(t)||/windows phone/i.test(t)||KP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e=[]){let n;switch(t){case"Browser":n=gE(lt());break;case"Worker":n=`${gE(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ka}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e={}){return Fa(t,"GET","/v2/passwordPolicy",Wv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=6;class hU{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yE(this),this.idTokenSubscription=new yE(this),this.beforeStateQueue=new cU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),r=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Ii(this));const n=e?Me(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uU(this),n=new hU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kv(t){return Me(t)}class yE{constructor(e){this.auth=e,this.observer=null,this.addObserver=FL(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pU(t){Qv=t}function mU(t){return Qv.loadJS(t)}function gU(){return Qv.gapiScript}function yU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t,e){const n=Gc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Un(i,e??{}))return s;kr(s,"already-initialized")}return n.initialize({options:e})}function _U(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wU(t,e,n){const r=Kv(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=eR(e),{host:o,port:a}=xU(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Un(c,r.config.emulator)&&Un(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Qi(o)?(C0(`${i}//${o}${l}`),Lb("Auth",!0)):s||TU()}function eR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xU(t){const e=eR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vE(o)}}}function vE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e){return J9(t,"POST","/v1/accounts:signInWithIdp",Wv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="http://localhost";class zi extends tR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=$v(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new zi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wo(e,n)}buildRequest(){const e={requestUri:EU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends nR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends du{constructor(){super("facebook.com")}static credential(e){return zi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends du{constructor(){super("github.com")}static credential(e){return zi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends du{constructor(){super("twitter.com")}static credential(e,n){return zi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await jn._fromIdTokenResponse(e,r,s),o=_E(r);return new Ta({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_E(r);return new Ta({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _E(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fh(e,n,r,s)}}function rR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,i,e,r):i})}async function IU(t,e,n=!1){const r=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ta._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e,n=!1){const{auth:r}=t;if(Gn(r.app))return Promise.reject(Ii(r));const s="reauthenticate";try{const i=await Cc(t,rR(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Gv(i.idToken);re(o,r,"internal-error");const{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),Ta._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&kr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e,n=!1){if(Gn(t.app))return Promise.reject(Ii(t));const r="signIn",s=await rR(t,r,e),i=await Ta._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function bU(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function kU(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=1e3,RU=10;class iR extends sR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iR.type="LOCAL";const CU=iR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends sR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oR.type="SESSION";const aR=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await NU(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Xv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function VU(t){rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function jU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OU(){return lR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebaseLocalStorageDb",LU=1,Bh="firebaseLocalStorage",uR="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wf(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function FU(){const t=indexedDB.deleteDatabase(cR);return new hu(t).toPromise()}function ly(){const t=indexedDB.open(cR,LU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bh,{keyPath:uR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),await FU(),e(await ly()))})})}async function wE(t,e,n){const r=Wf(t,!0).put({[uR]:e,value:n});return new hu(r).toPromise()}async function UU(t,e){const n=Wf(t,!1).get(e),r=await new hu(n).toPromise();return r===void 0?null:r.value}function xE(t,e){const n=Wf(t,!0).delete(e);return new hu(n).toPromise()}const BU=800,$U=3;class dR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$U)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(OU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jU(),!this.activeServiceWorker)return;this.sender=new DU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await wE(e,Uh,"1"),await xE(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wf(s,!1).getAll();return new hu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dR.type="LOCAL";const zU=dR;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t,e){return e?gr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends tR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WU(t){return AU(t.auth,new Jv(t),t.bypassAuthState)}function GU(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),SU(n,new Jv(t),t.bypassAuthState)}async function HU(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),IU(n,new Jv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WU;case"linkViaPopup":case"linkViaRedirect":return HU;case"reauthViaPopup":case"reauthViaRedirect":return GU;default:kr(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new uu(2e3,1e4);class Vo extends hR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=Xv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KU.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU="pendingRedirect",Vd=new Map;class XU extends hR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await JU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JU(t,e){const n=eB(e),r=ZU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YU(t,e){Vd.set(t._key(),e)}function ZU(t){return gr(t._redirectPersistence)}function eB(t){return Dd(QU,t.config.apiKey,t.name)}async function tB(t,e,n=!1){if(Gn(t.app))return Promise.reject(Ii(t));const r=Kv(t),s=qU(r,e),o=await new XU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=10*60*1e3;class rB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nB&&this.cachedEventUids.clear(),this.cachedEventUids.has(TE(e))}saveEventToCache(e){this.cachedEventUids.add(TE(e)),this.lastProcessedEventTime=Date.now()}}function TE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB(t,e={}){return Fa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aB=/^https?/;async function lB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iB(t);for(const n of e)try{if(cB(n))return}catch{}kr(t,"unauthorized-domain")}function cB(t){const e=oy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aB.test(n))return!1;if(oB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new uu(3e4,6e4);function EE(){const t=rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dB(t){return new Promise((e,n)=>{var r,s,i;function o(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),n(nr(t,"network-request-failed"))},timeout:uB.get()})}if(!((s=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rr().gapi)===null||i===void 0)&&i.load)o();else{const a=yU("iframefcb");return rr()[a]=()=>{gapi.load?o():n(nr(t,"network-request-failed"))},mU(`${gU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jd=null,e})}let jd=null;function hB(t){return jd=jd||dB(t),jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=new uu(5e3,15e3),pB="__/auth/iframe",mB="emulator/auth/iframe",gB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vB(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qv(e,mB):`https://${t.config.authDomain}/${pB}`,r={apiKey:e.apiKey,appName:t.name,v:ka},s=yB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Wc(r).slice(1)}`}async function _B(t){const e=await hB(t),n=rr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:vB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=nr(t,"network-request-failed"),a=rr().setTimeout(()=>{i(o)},fB.get());function l(){rr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xB=500,TB=600,EB="_blank",IB="http://localhost";class IE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SB(t,e,n,r=xB,s=TB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wB),{width:r.toString(),height:s.toString(),top:i,left:o}),c=lt().toLowerCase();n&&(a=HP(c)?EB:n),WP(c)&&(e=e||IB,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[y,x])=>`${p}${y}=${x},`,"");if(aU(c)&&a!=="_self")return AB(e||"",a),new IE(null);const h=window.open(e||"",a,d);re(h,t,"popup-blocked");try{h.focus()}catch{}return new IE(h)}function AB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="__/auth/handler",kB="emulator/auth/handler",PB=encodeURIComponent("fac");async function SE(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ka,eventId:s};if(e instanceof nR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof du){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${PB}=${encodeURIComponent(l)}`:"";return`${RB(t)}?${Wc(a).slice(1)}${c}`}function RB({config:t}){return t.emulator?qv(t,kB):`https://${t.authDomain}/${bB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class CB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aR,this._completeRedirectFn=tB,this._overrideRedirectResult=YU}async _openPopup(e,n,r,s){var i;Pr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await SE(e,n,r,oy(),s);return SB(e,o,Xv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await SE(e,n,r,oy(),s);return VU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Pr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _B(e),r=new rB(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mm,{type:mm},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[mm];o!==void 0&&n(!!o),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YP()||GP()||Hv()}}const NB=CB;var AE="@firebase/auth",bE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jB(t){ta(new Ci("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZP(t)},c=new fU(r,s,i,l);return _U(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ta(new Ci("auth-internal",e=>{const n=Kv(e.getProvider("auth").getImmediate());return(r=>new DB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(AE,bE,VB(t)),Ts(AE,bE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=5*60,OB=Ob("authIdTokenMaxAge")||MB;let kE=null;const LB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OB)return;const s=n==null?void 0:n.token;kE!==s&&(kE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FB(t=Gb()){const e=Gc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vU(t,{popupRedirectResolver:NB,persistence:[zU,CU,aR]}),r=Ob("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=LB(i.toString());kU(n,o,()=>o(n.currentUser)),bU(n,a=>o(a))}}const s=jb("auth");return s&&wU(n,`http://${s}`),n}function UB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jB("Browser");const BB={apiKey:"AIzaSyDJ5oCi5ylGIfkCS_RvE7FeQNaTQBvGhIQ",authDomain:"weekly-brief-2025.firebaseapp.com",projectId:"weekly-brief-2025",storageBucket:"weekly-brief-2025.firebasestorage.app",messagingSenderId:"487940577484",appId:"1:487940577484:web:1d6262da34bd9bb98bca69"},Yv=Wb(BB),Be=g9(Yv),$B=FB(Yv),zB=Object.freeze(Object.defineProperty({__proto__:null,auth:$B,db:Be,default:Yv},Symbol.toStringTag,{value:"Module"})),ut={NEWS:"news",REPORTS:"reports",SCHEDULES:"schedules",SOUKE_CACHE:"souke_cache",TABLE_CACHE:"table_cache",ZENTAI_CACHE:"zentai_cache"},qB=t=>({...t,publishedAt:t.publishedAt,createdAt:ce.now(),updatedAt:ce.now()}),fu=t=>{var e;return{id:t.id,title:t.title,summary:t.summary,url:t.url,publishedAt:(e=t.publishedAt)!=null&&e.toDate?t.publishedAt.toDate().toISOString().split("T")[0]:t.publishedAt,category:t.category,relevanceScore:t.relevanceScore,assignedReportId:t.assignedReportId}},cy=async()=>{try{const t=ru(Be,ut.NEWS),e=Ff(t,PP("publishedAt","desc"));return(await jP(e)).docs.map(r=>fu({id:r.id,...r.data()}))}catch(t){throw console.error("Failed to fetch news from Firebase:",t),t}},WB=async t=>{try{const e=Ft(Be,ut.NEWS,t),n=await au(e);return n.exists()?fu({id:n.id,...n.data()}):null}catch(e){throw console.error("Failed to fetch news by ID from Firebase:",e),e}},pR=async t=>{try{const e=ru(Be,ut.NEWS),n=Ft(e),r={...t,id:n.id};return await lu(n,qB(r)),r}catch(e){throw console.error("Failed to create news in Firebase:",e),e}},GB=async t=>{try{const e=Ft(Be,ut.NEWS,t);return await b9(e),!0}catch(e){return console.error("Failed to delete news from Firebase:",e),!1}},HB=async(t,e)=>{try{const n=Ft(Be,ut.NEWS,t);return await A9(n,{assignedReportId:e||null,updatedAt:ce.now()}),await WB(t)}catch(n){throw console.error("Failed to update news assignment in Firebase:",n),n}},KB=async t=>{try{const e=ru(Be,ut.NEWS),n=Ff(e,kP("assignedReportId","==",t));return(await jP(n)).docs.map(i=>fu({id:i.id,...i.data()})).sort((i,o)=>new Date(o.publishedAt).getTime()-new Date(i.publishedAt).getTime())}catch(e){throw console.error("Failed to fetch news for report from Firebase:",e),e}},QB=t=>{const e=ru(Be,ut.NEWS),n=Ff(e,PP("publishedAt","desc"));return $i(n,s=>{const i=s.docs.map(o=>fu({id:o.id,...o.data()}));t(i)},s=>{console.error("Error listening to news updates:",s)})},mR=(t,e)=>{const n=ru(Be,ut.NEWS),r=Ff(n,kP("assignedReportId","==",t));return $i(r,i=>{const a=i.docs.map(l=>fu({id:l.id,...l.data()})).sort((l,c)=>new Date(c.publishedAt).getTime()-new Date(l.publishedAt).getTime());e(a)},i=>{console.error("Error listening to report news updates:",i)})},XB=t=>({reportId:t.reportId,weekStart:t.weekStart,weekEnd:t.weekEnd,items:t.items,createdAt:t.createdAt?t.createdAt:ce.now(),updatedAt:ce.now()}),gR=t=>{var e,n,r,s,i,o;return{id:t.id,reportId:t.reportId,weekStart:t.weekStart,weekEnd:t.weekEnd,items:t.items||[],createdAt:((r=(n=(e=t.createdAt)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||t.createdAt,updatedAt:((o=(i=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:i.call(s))==null?void 0:o.toISOString())||t.updatedAt}},yR=async t=>{try{const e=Ft(Be,ut.SCHEDULES,t),n=await au(e);return n.exists()?gR({id:n.id,...n.data()}):null}catch(e){throw console.error("Failed to fetch schedule by report ID from Firebase:",e),e}},JB=async t=>{try{const e=Ft(Be,ut.SCHEDULES,t.reportId),n=XB(t);return await lu(e,n,{merge:!0}),await yR(t.reportId)||t}catch(e){throw console.error("Failed to save schedule to Firebase:",e),e}},YB=(t,e)=>{const n=Ft(Be,ut.SCHEDULES,t);return $i(n,s=>{if(s.exists()){const i=gR({id:s.id,...s.data()});e(i)}else e(null)},s=>{console.error("Schedule subscription error:",s),e(null)})},ZB=t=>{const e=(t==null?void 0:t.souke)!==void 0;console.log("🔧 soukeDataToFirestore: detecting structure type:",{hasIntegratedStructure:e,dataKeys:Object.keys(t||{}),soukeExists:!!(t!=null&&t.souke)});let n;if(e){const i=t.souke;n={daily:(i==null?void 0:i.daily)||{},cumulative:(i==null?void 0:i.cumulative)||{},weekly:(i==null?void 0:i.weekly)||{},metadata:(i==null?void 0:i.metadata)||t.metadata||{}},console.log("🔧 Using integrated structure (data.souke)")}else{const i=t;n={daily:i.daily||{},cumulative:i.cumulative||{},weekly:i.weekly||{},metadata:i.metadata||{}},console.log("🔧 Using legacy structure (data.daily)")}const r=i=>{if(i==null)return null;if(typeof i!="object")return i;const o={};return Object.keys(i).forEach(a=>{i[a]!==void 0&&(o[a]=typeof i[a]=="object"&&i[a]!==null?r(i[a]):i[a])}),o},s={daily:r(n.daily),cumulative:r(n.cumulative),weekly:r(n.weekly),metadata:r(n.metadata),updatedAt:ce.now(),version:"2.0"};return console.log("🔧 Final Firestore data keys:",Object.keys(s)),s},vR=t=>{var e,n,r,s;return{daily:t.daily||{},cumulative:t.cumulative||{},weekly:t.weekly||{},metadata:{...t.metadata,lastUpdated:((r=(n=(e=t.updatedAt)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||((s=t.metadata)==null?void 0:s.lastUpdated)}}},e8=async(t,e)=>{try{const n=Ft(Be,ut.SOUKE_CACHE,"latest"),r=ZB(t);e&&(r.updatedBy=e),await lu(n,r),console.log("✅ Souke data saved to cache")}catch(n){throw console.error("❌ Failed to save souke data to cache:",n),n}},t8=async(t,e)=>{try{const n=Ft(Be,ut.TABLE_CACHE,"latest"),r={...t,updatedAt:ce.now(),updatedBy:e||"unknown",version:"1.0"};await lu(n,r),console.log("✅ Table data saved to cache")}catch(n){throw console.error("❌ Failed to save table data to cache:",n),n}},n8=async()=>{var t,e;try{const n=Ft(Be,ut.SOUKE_CACHE,"latest"),r=await au(n);if(!r.exists())return console.log("⚠️ No souke cache data found"),{data:null,cacheInfo:null};const s=r.data(),i=((e=(t=s.updatedAt)==null?void 0:t.toDate)==null?void 0:e.call(t))||new Date(s.updatedAt),a=(new Date().getTime()-i.getTime())/(1e3*60),l={updatedAt:i.toISOString(),ageMinutes:Math.round(a),isExpired:a>1440,updatedBy:s.updatedBy},c=vR(s);return console.log(`✅ Souke cache loaded (age: ${Math.round(a)}min)`),{data:c,cacheInfo:l}}catch(n){throw console.error("❌ Failed to get souke data from cache:",n),n}},r8=t=>{const e=Ft(Be,ut.SOUKE_CACHE,"latest");return $i(e,r=>{var s,i;if(r.exists()){const o=r.data(),a=((i=(s=o.updatedAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||new Date(o.updatedAt),c=(new Date().getTime()-a.getTime())/(1e3*60),d={updatedAt:a.toISOString(),ageMinutes:Math.round(c),isExpired:c>1440,updatedBy:o.updatedBy},h=vR(o);t(h,d)}else t(null,null)},r=>{console.error("Souke data subscription error:",r),t(null,null)})},s8=async()=>{var t,e;try{const n=Ft(Be,ut.TABLE_CACHE,"latest"),r=await au(n);if(!r.exists())return console.log("⚠️ No table cache data found"),{data:null,cacheInfo:null};const s=r.data(),i=((e=(t=s.updatedAt)==null?void 0:t.toDate)==null?void 0:e.call(t))||new Date(s.updatedAt),a=(new Date().getTime()-i.getTime())/(1e3*60),l={updatedAt:i.toISOString(),ageMinutes:Math.round(a),isExpired:a>1440,updatedBy:s.updatedBy};return console.log(`✅ Table cache loaded (age: ${Math.round(a)}min)`),{data:s,cacheInfo:l}}catch(n){throw console.error("❌ Failed to get table data from cache:",n),n}},i8=t=>({souke:t.souke,naitei:t.naitei,metadata:t.metadata,updatedAt:ce.now(),version:"1.0"}),_R=t=>{var e,n,r,s;return{souke:t.souke||{},naitei:t.naitei||{daily:{},cumulative:{},weekly:{},metadata:{}},metadata:{...t.metadata,lastUpdated:((r=(n=(e=t.updatedAt)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||((s=t.metadata)==null?void 0:s.lastUpdated)}}},o8=async(t,e)=>{try{const n=Ft(Be,ut.ZENTAI_CACHE,"latest"),r=i8(t);e&&(r.updatedBy=e),await lu(n,r),console.log("✅ Zentai data saved to cache")}catch(n){throw console.error("❌ Failed to save zentai data to cache:",n),n}},a8=async()=>{var t,e;try{const n=Ft(Be,ut.ZENTAI_CACHE,"latest"),r=await au(n);if(!r.exists())return console.log("⚠️ No zentai cache data found"),{data:null,cacheInfo:null};const s=r.data(),i=((e=(t=s.updatedAt)==null?void 0:t.toDate)==null?void 0:e.call(t))||new Date(s.updatedAt),a=(new Date().getTime()-i.getTime())/(1e3*60),l={updatedAt:i.toISOString(),ageMinutes:Math.round(a),isExpired:a>1440,updatedBy:s.updatedBy},c=_R(s);return console.log(`✅ Zentai cache loaded (age: ${Math.round(a)}min)`),{data:c,cacheInfo:l}}catch(n){throw console.error("❌ Failed to get zentai data from cache:",n),n}},l8=t=>{const e=Ft(Be,ut.ZENTAI_CACHE,"latest");return $i(e,r=>{var s,i;if(r.exists()){const o=r.data(),a=((i=(s=o.updatedAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||new Date(o.updatedAt),c=(new Date().getTime()-a.getTime())/(1e3*60),d={updatedAt:a.toISOString(),ageMinutes:Math.round(c),isExpired:c>1440,updatedBy:o.updatedBy},h=_R(o);t(h,d)}else t(null,null)},r=>{console.error("Zentai data subscription error:",r),t(null,null)})},wR="weeklybrief_news_database",Md=[{id:"news-1",title:"ChatGPT-5の発表でAI業界に新たな波",summary:"OpenAIが次世代モデルを発表し、企業のAI導入がさらに加速すると予想される。",url:"https://openai.com/chatgpt-5-announcement",publishedAt:"2025-01-05",category:"AI",relevanceScore:95,assignedReportId:"2025-01-06"},{id:"news-2",title:"クラウドサービス市場の急成長",summary:"AWSとMicrosoft Azureが競争を激化させ、企業のデジタル変革を推進。",url:"https://aws.amazon.com/news/cloud-market-growth",publishedAt:"2025-01-04",category:"クラウド",relevanceScore:88,assignedReportId:"2025-01-06"},{id:"news-3",title:"サイバーセキュリティ投資の増加傾向",summary:"企業のセキュリティ投資が前年比25%増加、リモートワークの普及が要因。",url:"https://cybersecurity.com/investment-trends-2025",publishedAt:"2025-01-03",category:"セキュリティ",relevanceScore:82,assignedReportId:"2025-01-06"},{id:"news-7",title:"OpenAI、GPT-5の開発進捗を公開 - マルチモーダル性能が大幅向上",summary:"OpenAIが次世代モデルGPT-5の開発状況を発表。画像、音声、テキストを統合した処理能力が飛躍的に向上し、2025年後半のリリースを予定。",url:"https://openai.com/gpt-5-progress",publishedAt:"2025-01-15",category:"AI Model",relevanceScore:94,assignedReportId:"2025-01-13"},{id:"news-8",title:"Microsoft Copilot Enterprise、新機能で企業採用率が前月比40%増",summary:"Microsoft Copilot Enterpriseが新たな統合機能を追加し、企業での導入が急速に拡大。特にコード生成とドキュメント作成支援機能が高評価。",url:"https://microsoft.com/copilot-enterprise-growth",publishedAt:"2025-01-14",category:"Enterprise AI",relevanceScore:89,assignedReportId:"2025-01-13"},{id:"news-9",title:"Amazon、AI駆動の人材マッチングサービス「WorkMatch AI」をローンチ",summary:"Amazonが求職者と企業をAIでマッチングする新サービスを開始。リクルート業界に新たな競争軸をもたらす可能性として注目を集めている。",url:"https://aws.amazon.com/workmatch-ai",publishedAt:"2025-01-13",category:"HR Tech",relevanceScore:91,assignedReportId:"2025-01-13"},{id:"news-4",title:"[2025年6月27日] Gemini CLIは現状ちょっとダメかもしれない (週刊AI)",summary:"リリースされたばかりのGemini CLIについてのレビュー記事です。現状ではまだ改善の余地があるとの評価がなされています。",url:"https://zenn.dev/carenet/articles/7f4d0bf85cc0e2",publishedAt:"2025-06-27",category:"AI",relevanceScore:85,assignedReportId:"2025-01-06"},{id:"news-5",title:"グーグル、「Gemini CLI」をリリース--AIの機能をターミナルに直接統合",summary:"Googleが、GeminiのAI機能をコマンドラインインターフェース（CLI）から直接利用できる「Gemini CLI」をリリースしたことを報じる記事です。",url:"https://japan.zdnet.com/article/35234816/",publishedAt:"2025-06-27",category:"AI",relevanceScore:90,assignedReportId:"2025-01-06"},{id:"news-6",title:"Gemini アプリの機能アップデート（公式）",summary:"Googleの公式発表です。Geminiアプリで特定のタスクのスケジュール設定が可能になりました。また、有料版のGemini Advancedにおいて、より高性能な1.5 Proモデルが利用可能になり、推論やコーディングの性能が向上しました。",url:"https://gemini.google.com/updates?hl=ja",publishedAt:"2025-06-25",category:"AI",relevanceScore:88,assignedReportId:"2025-01-06"},{id:"news-10",title:"Claude 3.5 Sonnet - 新しいAIベンチマークで最高性能を達成",summary:"Anthropic社のClaude 3.5 Sonnetが、複数のAIベンチマークで従来モデルを上回る性能を記録。特にコーディングタスクにおいて85%の精度を達成し、開発者の生産性向上に大きく貢献。",url:"https://www.anthropic.com/news/claude-3-5-sonnet",publishedAt:"2025-06-30",category:"AI",relevanceScore:95,assignedReportId:"2025-06-30"},{id:"news-11",title:"ChatGPT Searchが正式リリース - リアルタイム検索機能でGoogle検索に挑戦",summary:"OpenAI社がChatGPT Searchを正式リリース。リアルタイムWeb検索機能により、最新情報の取得が可能に。検索市場でのGoogle独占に風穴を開ける可能性が高まる。",url:"https://openai.com/blog/chatgpt-search",publishedAt:"2025-06-29",category:"AI",relevanceScore:90,assignedReportId:"2025-06-30"},{id:"news-12",title:"Microsoft Copilot Studio - ノーコードでAIアシスタント構築が可能に",summary:"Microsoftがノーコード環境でカスタムAIアシスタントを構築できるCopilot Studioを発表。企業独自のワークフローに特化したAIアシスタントを簡単に作成可能。",url:"https://www.microsoft.com/copilot-studio",publishedAt:"2025-06-28",category:"AI",relevanceScore:88,assignedReportId:"2025-06-30"},{id:"news-13",title:"[2025年6月23日] 行動型AIアシスタント「11.ai」を発表",summary:"ElevenLabsは、声で操作できる新しい行動型AIアシスタント「11.ai」（アルファ版）をリリースしました。このアシスタントは、ユーザーのタスク（スケジュールの計画、顧客調査、プロジェクト管理など）を自動化するのに役立ちます。",url:"https://elevenlabs.io/ja/blog",publishedAt:"2025-06-23",category:"AI",relevanceScore:87},{id:"news-14",title:"[2025年6月23日] CiscoのWebex AIエージェントへの音声技術提供を発表",summary:"ElevenLabsは、CiscoのWebex AIエージェントに音声技術を提供することを発表しました。これにより、エンタープライズ向けのカスタマーサポートにおいて、より自然で人間らしい音声対話が可能になります。",url:"https://elevenlabs.io/ja/blog",publishedAt:"2025-06-23",category:"AI",relevanceScore:85},{id:"news-15",title:"[2025年6月24日] Anthropic、著作権訴訟でAIの「フェアユース」が認められる重要な勝利",summary:"米国の連邦判事は、AnthropicがAIモデル「Claude」を訓練するために書籍データを使用したことは、米国の著作権法における「フェアユース（公正な利用）」にあたると判断しました。これは、AIの学習データ利用に関する重要な判例となる可能性があります。",url:"https://m.economictimes.com/tech/artificial-intelligence/anthropic-wins-key-ruling-on-ai-in-authors-copyright-lawsuit/articleshow/122050583.cms",publishedAt:"2025-06-24",category:"AI",relevanceScore:93},{id:"news-16",title:"[2025年6月24日] AppleがPerplexityの買収を検討か",summary:"Appleが、自社のAI機能強化のため、AIスタートアップのPerplexityを買収することを検討していると報じられました。Appleの幹部が買収の可能性について社内で議論しているとのことです。",url:"https://www.techradar.com/computing/artificial-intelligence/forget-apple-intelligence-heres-why-i-think-apples-rumored-perplexity-takeover-could-solve-its-ai-woes",publishedAt:"2025-06-24",category:"AI",relevanceScore:91},{id:"news-17",title:"[2025年6月24日] ElevenLabs、公式モバイルアプリをリリース",summary:"ElevenLabsの強力なAI音声ツールが、iOSおよびAndroidの公式アプリとして利用可能になりました。これにより、モバイルデバイスからでも手軽に音声生成機能へアクセスできます。",url:"https://elevenlabs.io/ja/blog",publishedAt:"2025-06-24",category:"AI",relevanceScore:84},{id:"news-18",title:"[2025年6月27日] Perplexity、リアルタイム金融データやMLBのライブスコアなどを追加",summary:"Perplexityは、リアルタイムの金融データをResearch and Labs機能に追加し、Financeページでは価格変動のタイムラインを、また、MLBチームのライブスコアをフォローする機能などを追加しました。",url:"https://www.perplexity.ai/changelog",publishedAt:"2025-06-27",category:"AI",relevanceScore:86},{id:"news-19",title:"OpenAIがAIチップ供給の多様化を図り、GoogleのTPUを採用 - The Information",summary:"OpenAIは、AIモデルのトレーニングと推論に使用するチップの供給源を多様化するため、GoogleのTensor Processing Unit（TPU）を採用することを決定しました。これにより、NVIDIAへの依存を低減し、コンピューティングリソースの可用性とコストに関する懸念に対処することを目的としています。",url:"https://jp.investing.com/news/stock-market-news/article-1158723",publishedAt:"2025-06-28",category:"AI",relevanceScore:89},{id:"news-20",title:"[2025年6月29日] Claudeのパフォーマンスと利用制限に関するユーザーからのフィードバック (Reddit)",summary:"ソーシャルニュースサイトRedditのClaudeAIコミュニティにて、過去一週間におけるClaudeのパフォーマンス、特に利用制限（クオータ）が厳しくなったことに対するユーザーからの不満が多数報告されています。多くのユーザーが、以前より早く使用上限に達してしまうと指摘しています。",url:"https://www.reddit.com/r/ClaudeAI/comments/1lnasi3/claude_performance_report_week_of_june_22_june_29/",publishedAt:"2025-06-29",category:"AI",relevanceScore:82},{id:"news-21",title:"[2025年6月26日] FRB議長パウエル氏「AIが労働市場に大幅な変化をもたらす」と発言",summary:"ジェローム・パウエルFRB議長は米上院銀行委員会で、AIが現時点では経済に大きな影響を与えていないものの、今後数年間で労働市場に「重大な変化」をもたらすと予想されると述べました。AIの経済への影響の規模とタイミングについては未知数としながらも、変革的な効果は避けられないと強調しました。",url:"https://ground.news/article/fed-chair-sees-ai-creating-significant-changes-to-us-workforce",publishedAt:"2025-06-26",category:"AI",relevanceScore:90},{id:"news-22",title:"[2025年6月28日] Meta、OpenAIから4人の研究者をスーパーインテリジェンスチームに引き抜き",summary:"Meta Platformsは、OpenAIから4人の著名なAI研究者（Jiahui Yu、Shuchao Bi、Shengjia Zhao、Hongyu Ren）をスーパーインテリジェンスグループに採用しました。これはGenerative AI分野における人材獲得競争の激化を示しており、各社が数百万ドル規模の採用パッケージで優秀な研究者を争奪している状況を浮き彫りにしています。",url:"https://fortune.com/2025/06/28/meta-four-openai-researchers-superintelligence-team-ai-talent-competition/",publishedAt:"2025-06-28",category:"AI",relevanceScore:88}],c8=()=>{try{const t=localStorage.getItem(wR);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load news from localStorage:",t)}return[...Md]},Zv=t=>{try{localStorage.setItem(wR,JSON.stringify(t))}catch(e){console.error("Failed to save news to localStorage:",e)}};let En=c8();const e_=!0;let uy=!1;const u8=async()=>{var t,e;if(uy){console.log("🔄 Migration already checked, skipping");return}console.log("🚀 Starting Firebase migration..."),console.log("🔍 Migration debug info:",{projectId:(e=(t=Be==null?void 0:Be.app)==null?void 0:t.options)==null?void 0:e.projectId,hasDb:!!Be,USE_FIREBASE:e_,initialDataCount:Md.length});try{console.log("📡 Checking existing Firebase data...");const n=await cy();if(console.log("📊 Existing Firebase news count:",n.length),n.length===0){console.log("📦 Migrating initial data to Firebase..."),console.log("📋 Items to migrate:",Md.length);let r=0,s=0;for(const o of Md)try{console.log(`🔄 Migrating: ${o.id} - ${o.title.substring(0,50)}...`);const a=await pR(o);console.log(`✅ Success: ${o.id}`,a==null?void 0:a.id),r++}catch(a){console.error(`❌ Failed to migrate item: ${o.id}`,a),s++}console.log(`🎉 Migration completed! Success: ${r}, Errors: ${s}`);const i=await cy();console.log("🔍 Final Firebase news count after migration:",i.length)}else console.log("✅ Firebase already has data, skipping migration")}catch(n){console.error("❌ Migration failed completely:",n),console.error("Error details:",{name:n==null?void 0:n.name,message:n==null?void 0:n.message,code:n==null?void 0:n.code,stack:n==null?void 0:n.stack})}finally{uy=!0,console.log("🏁 Migration check completed")}},d8=async()=>{typeof window<"u"&&!uy&&await u8()},t_=[{id:"2025-08-11",title:"2025年8月第2週 週次レポート",weekOf:"2025年8月11日 - 8月17日",createdAt:"2025-08-20T10:00:00Z",sections:[{id:"business-8",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/08/11-2025/08/17"]},{id:"stock-8",type:"stock-movement",title:"株価動向",data:{nikkei:{current:38063,previous:37389,change:674,changePercent:1.8},sp500:{current:5515.25,previous:5505,change:10.25,changePercent:.19},recruitHoldings:{current:8152,previous:8217,change:-65,changePercent:-.79}},notices:["2025/08/20 時点の株価"]},{id:"audio-8",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:["今週はMTGがなし"],audioFiles:[]}},{id:"news-8",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"competitor-8",type:"competitor-reports",title:"1Q決算レポートリンク",data:[{id:"persol-q1-2025",companyName:"パーソル",reportUrl:"https://docs.google.com/document/d/1iEnkpRmbKH4PA0QyEkGmMJTHgXJKV0c2RrTblAf4RN4/edit?usp=drive_link",description:"2025年1Q決算分析レポート",category:"HR Tech"},{id:"enjapan-q1-2025",companyName:"エンジャパン",reportUrl:"https://docs.google.com/document/d/1mgyhOsMVXrd_4fdskCy-xj9w5ES2wUQtQiDkFfPDkvM/edit?usp=drive_link",description:"2025年1Q決算分析レポート",category:"Recruitment"},{id:"kakakucom-q1-2025",companyName:"カカクコム",reportUrl:"https://docs.google.com/document/d/1ET_wr64J8JZSSu4uImnwHrxQwY5eTIp0mVU1ebMKhrc/edit?usp=drive_link",description:"2025年1Q決算分析レポート",category:"E-commerce"},{id:"quick-q1-2025",companyName:"クイック",reportUrl:"https://docs.google.com/document/d/1AnPq3spv6caINB-K9HM6hhPIM9NQqGKGkPPUjFnldps/edit?usp=drive_link",description:"2025年1Q決算分析レポート",category:"Recruitment"}]}]},{id:"2025-08-04",title:"2025年8月第1週 週次レポート",weekOf:"2025年8月4日 - 8月10日",createdAt:"2025-08-04T10:00:00Z",sections:[{id:"business-7",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/07/27-2025/08/02"]},{id:"stock-7",type:"stock-movement",title:"株価動向",data:{nikkei:{current:40205,previous:39800,change:405,changePercent:1.02},sp500:{current:6420.75,previous:6310.5,change:110.25,changePercent:1.75},recruitHoldings:{current:8750,previous:8650,change:100,changePercent:1.16}},notices:["2025/08/04 時点の株価"]},{id:"audio-7",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:["IndeedはAIを活用した採用ソリューションの市場戦略と製品開発について議論しています。彼らは、AIソーシングの顧客からの肯定的なフィードバックに注目し、特に導入プログラムと無料トライアルを通じて製品の普及を促進する方法を模索しています。チームはまた、応募者のエンゲージメントと応答時間の最適化に焦点を当て、本人確認サービスの潜在的な価値と、これらのサービスをどのように収益化できるかについても検討しています。全体として、彼らは採用プロセスの簡素化と、市場のニーズと法的制約に対応したAI機能の統合を目指しています。"],audioFiles:[{id:"weekly-audio-2025-08-04",title:"Sourcing & Screening Weekly 2025年7月29日",audioUrl:"/audio/Sourcing & Screening Weekly 2025年7月29日.wav",duration:0}]}},{id:"news-7",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"schedule-7",type:"weekly-schedule",title:"今週の予定",data:[]}]},{id:"2025-07-28",title:"2025年7月第4週 週次レポート",weekOf:"2025年7月28日 - 8月3日",createdAt:"2025-07-28T10:00:00Z",sections:[{id:"business-6",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/07/21-2025/07/27"]},{id:"stock-6",type:"stock-movement",title:"株価動向",data:{nikkei:{current:39800,previous:39570,change:230,changePercent:.58},sp500:{current:6310.5,previous:6259.75,change:50.75,changePercent:.81},recruitHoldings:{current:8650,previous:8556,change:94,changePercent:1.1}},notices:["2025/07/28 時点の株価"]},{id:"audio-6",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:["法的懸念、製品戦略の変更、採用計画、およびLLMの利用や身元確認システムといった様々な機能について検討しています。また、候補者のフィルタリングにおける課題や、費用対効果を考慮しつつ、主要な構成要素を優先的に構築することの重要性も強調されています。全体として、進化する市場と規制の状況に対応しながら、幅広い顧客ベースを引き付けるための戦略的な方向性が示されています。"],audioFiles:[{id:"weekly-audio-2025-07-28",title:"Sourcing & Screening Weekly 2025年7月22日",audioUrl:"/audio/Sourcing & Screening Weekly 2025年7月22日.wav",duration:0}]}},{id:"news-6",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"schedule-6",type:"weekly-schedule",title:"今週の予定",data:[]}]},{id:"2025-07-14",title:"2025年7月第2週 週次レポート",weekOf:"2025年7月14日 - 7月20日",createdAt:"2025-07-14T10:00:00Z",sections:[{id:"business-5",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/07/07-2025/07/13"]},{id:"stock-5",type:"stock-movement",title:"株価動向",data:{nikkei:{current:39570,previous:39689,change:-119,changePercent:-.3},sp500:{current:6259.75,previous:6280.46,change:-20.71,changePercent:-.33},recruitHoldings:{current:8556,previous:8399,change:157,changePercent:1.85}},notices:["2025/07/12 終値時点の株価"]},{id:"audio-5",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:["法的な課題、特にWorkdayのケースに似たリスクを軽減しながら製品を市場に投入する方法について議論しています。また、価格設定戦略、さまざまな機能（求職者の事前資格審査、応募上限、スクリーニング質問など）の機能的側面、およびAIを活用したマッチングと採用基準の抽出を改善するための計画にも焦点を当てています。さらに、パイロットプログラムの進捗状況、自動化機能、そして製品の導入と継続的な改善における求職者と雇用主のエンゲージメントの重要性についても触れられています。"],audioFiles:[{id:"weekly-audio-2025-07-14",title:"Sourcing & Screening Weekly 2025年7月8日",audioUrl:"/audio/Sourcing & Screening Weekly 2025年7月8日.wav",duration:298}]}},{id:"news-5",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"schedule-5",type:"weekly-schedule",title:"今週の予定",data:[{id:"schedule-5-1",date:"2025-07-15",title:"四半期業績レビュー",description:"Q2業績の最終確認と Q3戦略の策定",type:"meeting"},{id:"schedule-5-2",date:"2025-07-16",title:"新製品ロードマップ会議",description:"AI機能の実装スケジュール調整",type:"meeting"},{id:"schedule-5-3",date:"2025-07-17",title:"クライアント提案書提出",description:"大手企業向けソリューション提案",type:"deadline"},{id:"schedule-5-4",date:"2025-07-18",title:"マーケティング戦略ワークショップ",description:"Q3マーケティング計画の策定",type:"meeting"}]}]},{id:"2025-07-07",title:"2025年7月第1週 週次レポート",weekOf:"2025年7月7日 - 7月13日",createdAt:"2025-07-07T10:00:00Z",sections:[{id:"business-4",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/06/29-2025/07/05"]},{id:"stock-4",type:"stock-movement",title:"株価動向",data:{nikkei:{current:39576,previous:39811,change:-235,changePercent:-.59},sp500:{current:6279.35,previous:6242,change:37.35,changePercent:.6},recruitHoldings:{current:8401,previous:8488,change:-87,changePercent:-1.02}},notices:["2025/07/07 10:25時点の株価（日経平均は実際の市場価格を反映）"]},{id:"audio-4",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:["チームは、エンタープライズ企業や人材紹介会社をターゲットとした専門職向けのAIソーシング製品の機会、潜在的な収益、競合状況について議論しました。特に、LinkedInとの競争戦略、市場規模の評価、および自動ソーシングシステムのパフォーマンスとマッチング品質の向上に重点が置かれています。また、将来のステップとして、人材紹介会社の支出を市場分析に含めることや、より大胆なメールアプローチを検討することなどが挙げられています。"],audioFiles:[{id:"weekly-audio-2025-07-07",title:"Sourcing & Screening Weekly 2025年7月1日",audioUrl:"/audio/weekly-2025-07-07.wav",duration:332}]}},{id:"news-4",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"schedule-4",type:"weekly-schedule",title:"今週の予定",data:[]}]},{id:"2025-01-13",title:"2025年1月第2週 週次レポート",weekOf:"2025年1月13日週",createdAt:"2025-01-13T10:00:00Z",sections:[{id:"audio-2",type:"audio-summary",title:"音声サマリー（Sourcing & Screening Weekly）",data:{transcript:"",keyPoints:[],audioFiles:[{id:"audio-2-1",title:"Sourcing & Screening Weekly",audioUrl:"/audio/weekly-2025-01-13.wav",duration:385}]}},{id:"business-2",type:"business-performance",title:"ビジネス実績",data:null},{id:"stock-2",type:"stock-movement",title:"株式市場動向",data:{nikkei:{current:39725.46,previous:40083.73,change:-358.27,changePercent:-.89},sp500:{current:5893.62,previous:5862.85,change:30.77,changePercent:.52},recruitHoldings:{current:9150,previous:8930,change:220,changePercent:2.46}}},{id:"schedule-2",type:"weekly-schedule",title:"今週の予定",data:[{id:"5",date:"2025-01-14",title:"営業チーム週次会議",description:"第2週業績確認",type:"meeting"},{id:"6",date:"2025-01-15",title:"マーケティング戦略ワークショップ",type:"meeting"},{id:"7",date:"2025-01-16",title:"IT部門セキュリティ監査",type:"meeting"},{id:"8",date:"2025-01-17",title:"クライアント年度契約更新",type:"deadline"},{id:"9",date:"2025-01-19",title:"新年度計画発表会",type:"event"}]},{id:"news-2",type:"ai-news",title:"AI・テクノロジーニュース",data:[]}]},{id:"2025-01-06",title:"2025年1月第1週 週次レポート",weekOf:"2025年1月6日週",createdAt:"2025-01-06T10:00:00Z",sections:[{id:"audio-1",type:"audio-summary",title:"音声サマリー（Sourcing & Screening Weekly）",data:{transcript:"",keyPoints:[],audioFiles:[{id:"audio-1-1",title:"Sourcing & Screening Weekly",audioUrl:"/audio/weekly-2025-01-06.wav",duration:420}]}},{id:"business-1",type:"business-performance",title:"ビジネス実績",data:null},{id:"stock-1",type:"stock-movement",title:"株式市場動向",data:{nikkei:{current:40083.73,previous:39863.82,change:219.91,changePercent:.55},sp500:{current:5862.85,previous:5851.2,change:11.65,changePercent:.2},recruitHoldings:{current:8930,previous:8820,change:110,changePercent:1.25}}},{id:"schedule-1",type:"weekly-schedule",title:"今週の予定",data:[{id:"1",date:"2025-01-07",title:"取締役会",description:"月次業績レビュー",type:"meeting"},{id:"2",date:"2025-01-08",title:"プロダクト戦略会議",type:"meeting"},{id:"3",date:"2025-01-10",title:"四半期レポート提出",type:"deadline"},{id:"4",date:"2025-01-12",title:"新機能リリース",type:"milestone"}]},{id:"news-1",type:"ai-news",title:"AI・テクノロジーニュース",data:[]}]},{id:"2025-06-30",title:"2025年6月第4週 週次レポート",weekOf:"2025年6月30日 - 7月6日",createdAt:"2025-06-30T10:00:00Z",sections:[{id:"business-3",type:"business-performance",title:"ビジネス実績",data:null,notices:["期間：2025/06/22-06/28"]},{id:"stock-3",type:"stock-movement",title:"株式市場動向",data:{nikkei:{current:38725.47,previous:38474.9,change:250.57,changePercent:.65},sp500:{current:5974.07,previous:5918.23,change:55.84,changePercent:.94},recruitHoldings:{current:8420,previous:8280,change:140,changePercent:1.69}},notices:["2025年6月30日14:00時点の株価"]},{id:"audio-3",type:"audio-summary",title:"音声サマリー",data:{transcript:"",keyPoints:[],audioFiles:[{id:"audio-3-1",title:"Sourcing & Screening Weekly 2025年6月24日",audioUrl:"/audio/weekly-2025-06-30.wav",duration:450},{id:"audio-3-2",title:"Jobs & Applications Weekly 2025年6月24日",audioUrl:"/audio/Jobs & Applications Weekly 2025年6月24日.wav",duration:480},{id:"audio-3-3",title:"Deko - SLT 売上シンクMTG 2025年6月26日",audioUrl:"/audio/Deko - SLT rev sync 2025年6月26日.wav",duration:420}]}},{id:"news-3",type:"ai-news",title:"AI・テクノロジーニュース",data:[]},{id:"schedule-3",type:"weekly-schedule",title:"今週の予定",data:[{id:"schedule-3-1",date:"2025-07-02",title:"IVS参加@京都",type:"event"}]}]}],n_=async t=>{console.log(`🔥 === attachDynamicDataToReport for report: ${t.id} ===`);const e=t.sections.find(r=>r.type==="ai-news");if(e){console.log(`📡 News section found for report ${t.id}`),console.log(`⚠️ BEFORE: News section has ${Array.isArray(e.data)?e.data.length:"non-array"} items`);const r=await y8(t.id);console.log(`🔥 CRITICAL: Firebase returned ${r.length} items for report ${t.id}`),console.log("🔥 CRITICAL: Firebase news titles:",r.map(s=>`${s.id}: ${s.title}`)),e.data=r,console.log(`✅ AFTER: News section now has ${e.data.length} items`),console.log("✅ Final news titles:",e.data.map(s=>`${s.id}: ${s.title}`))}else console.log(`❌ No news section found for report ${t.id}`);const n=t.sections.find(r=>r.type==="business-performance");if(n){const r=await gL(t.id);n.data=r}return console.log(`🎯 === End attachDynamicDataToReport for report: ${t.id} ===`),console.log("🎯 Final report sections:",t.sections.map(r=>({type:r.type,dataLength:Array.isArray(r.data)?r.data.length:"non-array"}))),t},h8=async()=>{await new Promise(n=>setTimeout(n,1e3));const t=[...t_].sort((n,r)=>new Date(r.createdAt).getTime()-new Date(n.createdAt).getTime()),e=t.length>0?t[0]:null;return console.log("getLatestReport - selected report:",e==null?void 0:e.id),e?await n_(e):null},f8=async t=>{console.log("🎯 === getReportById called with ID:",t,"==="),await new Promise(n=>setTimeout(n,800));const e=t_.find(n=>n.id===t);if(console.log(`📊 getReportById - requested ID: ${t}, found report:`,e==null?void 0:e.id),e){console.log("🔄 About to call attachDynamicDataToReport...");const n=await n_(e);return console.log("✅ attachDynamicDataToReport completed for report:",n.id),n}else return console.log("❌ No report found with ID:",t),null},xR=async()=>{await new Promise(n=>setTimeout(n,1200));const t=[...t_].sort((n,r)=>new Date(r.createdAt).getTime()-new Date(n.createdAt).getTime());return await Promise.all(t.map(n=>n_(n)))},PE=async()=>{console.log("🎯 getAllNews called, USE_FIREBASE:",e_);try{console.log("📡 Using Firebase path..."),console.log("🔄 Ensuring data migration..."),await d8(),console.log("📊 Fetching news from Firebase...");const t=await cy();return console.log("✅ Firebase getAllNews success! Retrieved",t.length,"items"),console.log("📰 Sample items:",t.slice(0,3).map(e=>({id:e.id,title:e.title.substring(0,50)}))),t}catch(t){console.error("❌ Firebase failed, falling back to localStorage:",t),console.error("Error details:",{name:t==null?void 0:t.name,message:t==null?void 0:t.message,code:t==null?void 0:t.code}),console.log("💾 Using localStorage fallback..."),await new Promise(n=>setTimeout(n,600));const e=[...En].sort((n,r)=>new Date(r.publishedAt).getTime()-new Date(n.publishedAt).getTime());return console.log("💾 localStorage fallback returned",e.length,"items"),e}},p8=async(t,e)=>{console.log("🔥 updateNewsAssignment called:",{newsId:t,reportId:e,USE_FIREBASE:e_});try{console.log("📡 Attempting Firebase update...");const n=await HB(t,e);return console.log("✅ Firebase: News assignment updated successfully",{newsId:t,reportId:e,result:n}),n}catch(n){console.error("❌ Firebase failed, falling back to localStorage:",n),await new Promise(s=>setTimeout(s,500));const r=En.findIndex(s=>s.id===t);return r===-1?null:(En[r]={...En[r],assignedReportId:e},Zv(En),En[r])}},m8=async t=>{try{return await pR(t)}catch(e){console.error("Firebase failed, falling back to localStorage:",e),await new Promise(r=>setTimeout(r,800));const n={...t,id:`news-${Date.now()}`};return En.unshift(n),Zv(En),n}},g8=async t=>{try{return await GB(t)}catch(e){console.error("Firebase failed, falling back to localStorage:",e),await new Promise(r=>setTimeout(r,400));const n=En.findIndex(r=>r.id===t);return n===-1?!1:(En.splice(n,1),Zv(En),!0)}},y8=async t=>{console.log("🎯 getNewsForReport called for reportId:",t);try{console.log("📡 Attempting to fetch from Firebase...");const e=await KB(t);return console.log("✅ Firebase returned",e.length,"news items for report",t),console.log("📰 News items:",e.map(n=>({id:n.id,title:n.title}))),e}catch(e){console.error("❌ Firebase failed, falling back to localStorage:",e),await new Promise(r=>setTimeout(r,300));const n=En.filter(r=>r.assignedReportId===t);return console.log("💾 localStorage returned",n.length,"news items for report",t),console.log("📰 Local news items:",n.map(r=>({id:r.id,title:r.title}))),n}},v8=t=>{const e=new Date(t),n=[];for(let r=0;r<7;r++){const s=new Date(e);s.setDate(e.getDate()+r),n.push(s.toISOString().split("T")[0])}return n},_8=t=>{const e=new Date(t),n=new Date(e);return n.setDate(e.getDate()+6),n.toISOString().split("T")[0]},w8=t=>v8(t).map(n=>({date:n,title:"",description:"",type:"meeting"})),x8=t=>{const e=new Date(t),n=e.getMonth()+1,r=e.getDate(),s=["日","月","火","水","木","金","土"][e.getDay()];return`${n}月${r}日(${s})`},RE=t=>/^\d{4}-\d{2}-\d{2}$/.test(t)?t:new Date().toISOString().split("T")[0],T8=t=>{var e;return!t.title.trim()&&!((e=t.description)!=null&&e.trim())},E8=t=>t.filter(e=>!T8(e)).map(e=>({id:`schedule-${e.date}-${Date.now()}`,date:e.date,title:e.title,description:e.description,type:e.type})),I8=({reportId:t,existingSchedule:e,onSave:n,onCancel:r})=>{const[s,i]=C.useState([]),[o,a]=C.useState(!1),[l,c]=C.useState(null);C.useEffect(()=>{const y=RE(t),x=w8(y);if(e!=null&&e.items){const E=x.map(T=>{const w=e.items.find(v=>v.date===T.date);return w?{date:T.date,title:w.title,description:w.description||"",type:w.type}:T});i(E)}else i(x)},[t,e]);const d=(y,x,E)=>{i(T=>T.map((w,v)=>v===y?{...w,[x]:E}:w))},h=async()=>{a(!0),c(null);try{const y=RE(t),x=_8(y),E=E8(s),T={id:t,reportId:t,weekStart:y,weekEnd:x,items:E,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString()},w=await JB(T);n(w)}catch(y){console.error("Failed to save schedule:",y),c("スケジュールの保存に失敗しました")}finally{a(!1)}},p=s.filter(y=>y.title.trim()).length;return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ri,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"今週の予定を編集"})]}),f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:p>0&&`${p}件の予定`})]}),l&&f.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:l})}),f.jsx("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:s.map((y,x)=>f.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x8(y.date)}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.date})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{children:f.jsx("input",{type:"text",placeholder:"予定を入力してください",value:y.title,onChange:E=>d(x,"title",E.target.value),className:`w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md 
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-white 
                           placeholder-gray-500 dark:placeholder-gray-400
                           focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400`})}),y.title.trim()&&f.jsxs(f.Fragment,{children:[f.jsx("div",{children:f.jsx("input",{type:"text",placeholder:"詳細（任意）",value:y.description,onChange:E=>d(x,"description",E.target.value),className:`w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md 
                               bg-white dark:bg-gray-700 text-gray-900 dark:text-white 
                               placeholder-gray-500 dark:placeholder-gray-400
                               focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400`})}),f.jsx("div",{children:f.jsxs("select",{value:y.type,onChange:E=>d(x,"type",E.target.value),className:`w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md 
                               bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                               focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400`,children:[f.jsx("option",{value:"meeting",children:"会議"}),f.jsx("option",{value:"event",children:"イベント"}),f.jsx("option",{value:"deadline",children:"締切"}),f.jsx("option",{value:"milestone",children:"マイルストーン"})]})})]})]})]},y.date))}),f.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"空欄の日付は表示されません"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:r,disabled:o,className:`flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 
                     bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md
                     hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[f.jsx(Rb,{className:"w-4 h-4"}),"キャンセル"]}),f.jsxs("button",{onClick:h,disabled:o,className:`flex items-center gap-2 px-4 py-2 text-sm font-medium text-white 
                     bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 
                     rounded-md transition-colors
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[o?f.jsx(tL,{className:"w-4 h-4 animate-spin"}):f.jsx(uL,{className:"w-4 h-4"}),o?"保存中...":"保存"]})]})]})]})},S8=({news:t,isOpen:e,onClose:n})=>{if(C.useEffect(()=>{const s=i=>{i.key==="Escape"&&n()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e,n]),!t)return null;const r=s=>{try{return new Date(s).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}catch{return s}};return f.jsx(qO,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:n,"aria-hidden":"true"}),f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4",children:f.jsxs(Ee.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"news-modal-title",onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex items-start justify-between p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:[f.jsx("div",{className:"flex-1 pr-4",children:f.jsx("h2",{id:"news-modal-title",className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white leading-tight",children:t.title})}),f.jsx("button",{onClick:n,className:"flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200","aria-label":"モーダルを閉じる",children:f.jsx(Rb,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[f.jsx(Ri,{className:"w-4 h-4"}),f.jsx("span",{children:r(t.publishedAt)})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(pL,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),f.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium",children:t.category})]}),f.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[f.jsx(cr,{className:"w-4 h-4"}),f.jsxs("span",{children:["関連度: ",t.relevanceScore,"%"]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Ps,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),f.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:"概要"})]}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.summary})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.url&&f.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[f.jsx(Ol,{className:"w-4 h-4"}),"元記事を読む"]}),f.jsx("button",{onClick:n,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors duration-200",children:"閉じる"})]})]})]})})]})})},A8=t=>{if(t>=1e8){const e=Math.floor(t/1e8),n=Math.floor(t%1e8/1e4);return n>0?`${e}億${n}万円`:`${e}億円`}else if(t>=1e4){const e=Math.floor(t/1e4),n=t%1e4;if(n>0){const r=Math.floor(n/1e3),s=Math.floor(n%1e3/100);return r>0&&s>0?`${e}万${r}千${s}百円`:r>0?`${e}万${r}千円`:s>0?`${e}万${s}百円`:`${e}万円`}else return`${e}万円`}else return`${t.toLocaleString()}円`},TR=({section:t,reportId:e})=>{const[n,r]=C.useState([]),[s,i]=C.useState(null),[o,a]=C.useState(!1),[l,c]=C.useState(!1),[d,h]=C.useState(null),[p,y]=C.useState(null),[x,E]=C.useState(!1),[T,w]=C.useState(0),[v,_]=C.useState(0),[k,D]=C.useState(!1),[O,A]=C.useState(null),[I,b]=C.useState(1),P=C.useRef(null);C.useEffect(()=>{t.type==="weekly-schedule"&&e?(async()=>{try{const Y=await yR(e);i(Y),r((Y==null?void 0:Y.items)||[])}catch(Y){console.error("Failed to fetch schedule:",Y),r(t.data||[])}})():t.type==="weekly-schedule"&&r(t.data||[])},[t.type,t.data,e]),C.useEffect(()=>{if(t.type==="weekly-schedule"&&e)return YB(e,Y=>{i(Y),r((Y==null?void 0:Y.items)||[])})},[t.type,e]),C.useEffect(()=>()=>{P.current&&(P.current.pause(),P.current=null)},[]);const N=$=>{i($),r($.items),a(!1)},V=()=>{a(!1)},R=$=>{h($)},_e=()=>{h(null)},St=()=>{c(!l)},Ce=($,Y)=>{try{if(P.current&&(P.current.pause(),P.current=null),p===Y&&x){y(null),E(!1),w(0);return}D(!0),A(null);const me=new Audio($);P.current=me,me.addEventListener("timeupdate",()=>{w(me.currentTime)}),me.addEventListener("loadedmetadata",()=>{_(me.duration),D(!1)}),me.addEventListener("loadstart",()=>{console.log("音声ファイルの読み込みを開始:",$)}),me.addEventListener("canplay",()=>{console.log("音声ファイルの再生準備完了:",$),D(!1)}),me.addEventListener("error",oe=>{console.error("音声ファイルの読み込みエラー:",$,oe),A("音声ファイルを読み込めませんでした"),y(null),E(!1),w(0),_(0),D(!1)}),me.addEventListener("ended",()=>{y(null),E(!1),w(0)}),me.play().then(()=>{y(Y),E(!0),me.playbackRate=I}).catch(oe=>{console.error("音声再生エラー:",oe),A("音声の再生に失敗しました"),y(null),E(!1),w(0),_(0),D(!1)})}catch(me){console.error("音声再生処理エラー:",me),A("音声再生中にエラーが発生しました"),y(null),E(!1),w(0),_(0),D(!1)}},tt=$=>{P.current&&(P.current.currentTime=$,w($))},H=$=>{b($),P.current&&(P.current.playbackRate=$)},Z=$=>{if(isNaN($))return"0:00";const Y=Math.floor($/60),me=Math.floor($%60);return`${Y}:${me.toString().padStart(2,"0")}`},se=$=>f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(KO,{className:"w-3 h-3 text-blue-600 dark:text-blue-400 flex-shrink-0"}),f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white truncate",children:"Placement内定数"})]}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"※RDSを含まない"})]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs(mt,{to:"/souke-report",className:`flex items-center gap-1 px-2 py-1 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 
                           text-green-700 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 
                           rounded-md text-xs font-medium transition-all duration-200 hover:shadow-sm`,title:"集客モニタリング（総受日報）",children:[f.jsx(Ax,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:"集客モニ"})]}),f.jsx("a",{href:"https://console.cloud.google.com/bigquery?ws=!1m7!1m6!12m5!1m3!1sdharma-dwh-rag!2sus-central1!3s211c18ef-6287-44e6-9c3f-1edcc00bf7c9!2e1",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:f.jsx(Ol,{className:"w-3 h-3"})})]}),f.jsxs(mt,{to:"/zentai-monitoring",className:`flex items-center gap-1 px-2 py-1 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-900/50 
                         text-purple-700 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 
                         rounded-md text-xs font-medium transition-all duration-200 hover:shadow-sm`,title:"全体モニタリング（グラフのみ）",children:[f.jsx(Ax,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:"全体モニ"})]})]})]}),f.jsx("div",{className:"mb-1.5",children:f.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white break-all",children:[$.placement.current.toLocaleString(),"件"]})}),f.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[f.jsxs("div",{className:"flex items-center",children:[$.placement.wowPercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600 mr-1"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600 mr-1"}),f.jsxs("span",{className:$.placement.wowPercent>=0?"text-green-600":"text-red-600",children:["前週比",$.placement.wowPercent>=0?"+":"",$.placement.wowPercent.toFixed(1),"%"]})]}),f.jsxs("div",{className:"flex items-center",children:[$.placement.yoyPercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600 mr-1"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600 mr-1"}),f.jsxs("span",{className:$.placement.yoyPercent>=0?"text-green-600":"text-red-600",children:["前年比",$.placement.yoyPercent>=0?"+":"",$.placement.yoyPercent.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(QO,{className:"w-3 h-3 text-green-600 dark:text-green-400 flex-shrink-0"}),f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white truncate",children:"Online Platform売上"})]}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"※グロスレベニュー"})]}),f.jsx("a",{href:"https://docs.google.com/spreadsheets/d/1qJh27Zp5kldAtr0a1YoGUyIeyVGD_hOvqMgZE5dkUL8/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors",children:f.jsx(Ol,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"mb-1.5",children:f.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white break-all",children:A8($.onlinePlatform.current)})}),f.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[f.jsxs("div",{className:"flex items-center",children:[$.onlinePlatform.wowPercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600 mr-1"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600 mr-1"}),f.jsxs("span",{className:$.onlinePlatform.wowPercent>=0?"text-green-600":"text-red-600",children:["前週比",$.onlinePlatform.wowPercent>=0?"+":"",$.onlinePlatform.wowPercent.toFixed(1),"%"]})]}),f.jsxs("div",{className:"flex items-center",children:[$.onlinePlatform.yoyPercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600 mr-1"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600 mr-1"}),f.jsxs("span",{className:$.onlinePlatform.yoyPercent>=0?"text-green-600":"text-red-600",children:["前年比",$.onlinePlatform.yoyPercent>=0?"+":"",$.onlinePlatform.yoyPercent.toFixed(1),"%"]})]})]})]})]}),te=$=>f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"日経平均"}),f.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["¥",$.nikkei.current.toLocaleString()]}),f.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[$.nikkei.changePercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600"}),f.jsxs("span",{className:`text-xs ${$.nikkei.changePercent>=0?"text-green-600":"text-red-600"}`,children:[$.nikkei.changePercent>=0?"+":"",$.nikkei.changePercent.toFixed(2),"%"]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"S&P 500"}),f.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",$.sp500.current.toLocaleString()]}),f.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[$.sp500.changePercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600"}),f.jsxs("span",{className:`text-xs ${$.sp500.changePercent>=0?"text-green-600":"text-red-600"}`,children:[$.sp500.changePercent>=0?"+":"",$.sp500.changePercent.toFixed(2),"%"]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"リクルートHD"}),f.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["¥",$.recruitHoldings.current.toLocaleString()]}),f.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[$.recruitHoldings.changePercent>=0?f.jsx(cr,{className:"w-3 h-3 text-green-600"}):f.jsx(Zs,{className:"w-3 h-3 text-red-600"}),f.jsxs("span",{className:`text-xs ${$.recruitHoldings.changePercent>=0?"text-green-600":"text-red-600"}`,children:[$.recruitHoldings.changePercent>=0?"+":"",$.recruitHoldings.changePercent.toFixed(2),"%"]})]})]})]}),pe=$=>o?f.jsx(I8,{reportId:e,existingSchedule:s,onSave:N,onCancel:V}):!$||$.length===0?f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-2 text-center",children:[f.jsx(Ri,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"今週の予定はありません"})]}):f.jsx("div",{className:"space-y-1.5",children:$.map(Y=>f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1.5 border border-gray-200 dark:border-gray-700 shadow-sm",children:f.jsxs("div",{className:"flex items-start gap-1.5",children:[f.jsx("div",{className:"flex-shrink-0 w-1 h-1 bg-blue-500 rounded-full mt-1.5"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex flex-col gap-0.5 mb-1",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:Y.title}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx(Ri,{className:"w-3 h-3"}),f.jsx("span",{children:new Date(Y.date).toLocaleDateString("ja-JP")})]})]}),Y.description&&f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:Y.description}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("span",{className:`text-xs px-1 py-0.5 rounded-full ${Y.type==="meeting"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":Y.type==="event"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":Y.type==="deadline"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:Y.type==="meeting"?"会議":Y.type==="event"?"イベント":Y.type==="deadline"?"締切":"マイルストーン"})})]})]})},Y.id))}),be=$=>{if(!Array.isArray($)||$.length===0)return f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-2 text-center",children:[f.jsx(Ps,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"このレポートに関連するニュースはありません。"})]});const Y=l?$:$.slice(0,3),me=$.length>3;return f.jsxs("div",{className:"space-y-1.5",children:[Y.map(oe=>f.jsx("div",{onClick:()=>R(oe),className:"bg-white dark:bg-gray-800 rounded-lg p-1.5 border border-gray-200 dark:border-gray-700 shadow-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200",children:f.jsxs("div",{className:"flex items-start gap-1.5",children:[f.jsx("div",{className:"flex-shrink-0 w-1 h-1 bg-blue-500 rounded-full mt-1.5"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white mb-1 line-clamp-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:oe.title}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2 mb-1.5",children:oe.summary}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded text-xs",children:oe.category}),f.jsxs("span",{children:["関連度: ",oe.relevanceScore,"%"]}),f.jsx("span",{children:"•"}),f.jsx("span",{children:new Date(oe.publishedAt).toLocaleDateString("ja-JP")})]})]})]})},oe.id)),me&&f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:oe=>{oe.stopPropagation(),St()},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline font-medium transition-colors duration-200",children:l?"閉じる":`他${$.length-3}件のニュースを表示`})})]})},Kt=$=>{const Y=Math.floor($/60),me=$%60;return`${Y}:${me.toString().padStart(2,"0")}`},Qt=$=>!Array.isArray($)||$.length===0?f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-2 text-center",children:[f.jsx(Ps,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"競合レポートはありません"})]}):f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:$.map(Y=>{const me={"HR Tech":{color:"blue",icon:"🏢"},Recruitment:{color:"green",icon:"👥"},"E-commerce":{color:"orange",icon:"🛒"},Other:{color:"gray",icon:"📊"}},{color:oe,icon:At}=me[Y.category]||me.Other;return f.jsx("a",{href:Y.reportUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200 group",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-50 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:f.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-sm",children:At}),f.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:Y.companyName}),f.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full bg-${oe}-100 text-${oe}-800 dark:bg-${oe}-900 dark:text-${oe}-200`,children:"1Q決算"})]}),Y.description&&f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:Y.description}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-1.5 py-0.5 rounded-full",children:"Google Docs"}),f.jsx(Ol,{className:"w-3 h-3 ml-auto group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})]})]})]})},Y.id)})}),vt=$=>f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"音声ファイル"}),f.jsx("div",{className:"space-y-1.5 sm:space-y-2",children:$.audioFiles.map(Y=>{const me=p===Y.id&&x,oe=p===Y.id,At=oe&&v>0?T/v*100:0;return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 sm:p-3 border border-gray-200 dark:border-gray-700 shadow-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("button",{onClick:()=>Ce(Y.audioUrl,Y.id),disabled:k&&oe,className:`flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full text-white flex items-center justify-center transition-all duration-200 transform ${k&&oe?"bg-blue-500 scale-95 cursor-not-allowed":O&&oe?"bg-red-500 hover:bg-red-600 scale-95":me?"bg-green-600 hover:bg-green-700 shadow-lg":"bg-blue-600 hover:bg-blue-700 hover:shadow-lg hover:scale-105 active:scale-95"}`,title:k&&oe?"読み込み中...":O&&oe?`エラー: ${O} (クリックで再試行)`:me?"再生を停止":"再生",children:k&&oe?f.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):O&&oe?f.jsx(yi,{className:"w-4 h-4 sm:w-5 sm:h-5"}):me?f.jsx(oL,{className:"w-4 h-4 sm:w-5 sm:h-5"}):f.jsx(cL,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white truncate",children:Y.title}),k&&oe?f.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium animate-pulse",children:"読み込み中..."}):O&&oe?f.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),O]}):me?f.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"再生中"]}):null]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-blue-600 transition-all duration-200 ease-out",style:{width:`${At}%`}})}),oe&&v>0&&f.jsx("input",{type:"range",min:"0",max:v,value:T,onChange:kn=>tt(Number(kn.target.value)),className:"absolute inset-0 w-full h-1.5 opacity-0 cursor-pointer"})]}),f.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:oe?Z(T):"0:00"}),f.jsx("span",{children:oe&&v>0?Z(v):Y.duration?Kt(Y.duration):"0:00"})]}),oe&&f.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"速度:"}),f.jsx("div",{className:"flex gap-0.5",children:[.5,.75,1,1.25,1.5,2].map(kn=>f.jsxs("button",{onClick:()=>H(kn),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${I===kn?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:[kn,"x"]},kn))})]})]})]},Y.id)})})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"重要なポイント"}),f.jsx("div",{className:"space-y-1",children:$.keyPoints.map((Y,me)=>f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700 shadow-sm",children:f.jsxs("div",{className:"flex items-start gap-1.5",children:[f.jsx("div",{className:"flex-shrink-0 w-1 h-1 bg-green-500 rounded-full mt-1.5"}),f.jsx("p",{className:"text-xs text-gray-900 dark:text-white leading-relaxed",children:Y})]})},me))})]})]});return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[f.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white truncate flex-1",children:t.title}),t.type==="weekly-schedule"&&e&&!o&&f.jsxs("button",{onClick:()=>a(!0),className:`flex-shrink-0 flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-medium text-gray-600 dark:text-gray-400 
                     hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 
                     rounded-md transition-colors`,title:"スケジュールを編集",children:[f.jsx(lL,{className:"w-3 h-3"}),f.jsx("span",{className:"hidden sm:inline",children:"編集"})]})]}),t.notices&&t.notices.length>0&&f.jsx("div",{className:"mb-1.5 p-1.5 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 rounded",children:t.notices.map(($,Y)=>f.jsxs("p",{className:"text-xs text-yellow-800 dark:text-yellow-300 mb-0.5 last:mb-0",children:["⚠️ ",$]},Y))}),f.jsxs("div",{className:"section-content",children:[t.type==="business-performance"&&se(t.data),t.type==="stock-movement"&&te(t.data),t.type==="weekly-schedule"&&pe(n),t.type==="ai-news"&&be(t.data),t.type==="audio-summary"&&vt(t.data),t.type==="competitor-reports"&&Qt(t.data)]}),f.jsx(S8,{news:d,isOpen:d!==null,onClose:_e})]})},b8=()=>{const[t,e]=C.useState(null),[n,r]=C.useState(!0);C.useState(!1),C.useEffect(()=>{(async()=>{try{const o=await h8();e(o)}catch(o){console.error("Failed to load latest report:",o)}finally{r(!1)}})()},[]),C.useEffect(()=>{if(!(t!=null&&t.id))return;console.log("🔄 Setting up real-time news sync for latest report:",t.id);const i=mR(t.id,o=>{console.log("📡 Latest report news updated:",o.length,"items"),e(a=>{if(!a)return a;const l={...a},c=l.sections.find(d=>d.type==="ai-news");return c&&(console.log("🔄 Updating homepage news section with",o.length,"items"),c.data=o),l})});return()=>{console.log("🧹 Cleaning up homepage real-time subscription"),i&&i()}},[t==null?void 0:t.id]);const s=!1;return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[s,f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:t?f.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[f.jsx("div",{className:"card p-2 mb-2",children:f.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-secondary-900 mb-1 font-display",children:t.title}),f.jsxs("div",{className:"flex items-center text-secondary-600 text-xs",children:[f.jsx(Ri,{className:"h-3 w-3 mr-1"}),f.jsx("span",{className:"font-medium",children:t.weekOf}),f.jsx("span",{className:"mx-2",children:"•"}),f.jsx($c,{className:"h-3 w-3 mr-1"}),f.jsx("span",{children:new Date(t.createdAt).toLocaleDateString("ja-JP")})]})]}),f.jsxs(mt,{to:`/report/${t.id}`,className:"inline-flex items-center px-3 py-1.5 bg-primary-600 text-white rounded-lg font-medium text-xs hover:bg-primary-700 transition-colors duration-200",children:["詳細を表示",f.jsx(Ag,{className:"h-3 w-3 ml-1"})]})]})}),f.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-1.5 sm:gap-2",children:t.sections.map((i,o)=>{let a="";return i.type==="audio-summary"?a="xl:col-span-2":a="xl:col-span-1",f.jsx(Ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.05*o},className:a,children:f.jsx("div",{className:"card p-1.5 sm:p-2 h-full min-w-0",children:f.jsx(TR,{section:i,reportId:t.id})})},i.id)})}),f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"text-center mt-2",children:f.jsxs(mt,{to:`/report/${t.id}`,className:"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors duration-200 text-xs",children:["すべてのセクションを表示",f.jsx(Ag,{className:"h-3 w-3 ml-1"})]})})]}):f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-center py-12",children:f.jsxs("div",{className:"card p-8",children:[f.jsx(Ps,{className:"h-12 w-12 text-secondary-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-3",children:"レポートが見つかりません"}),f.jsx("p",{className:"text-secondary-600 mb-6",children:"まだ週次レポートが作成されていません。"}),f.jsx(mt,{to:"/news-manager",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors duration-200",children:"レポートの作成を開始"})]})})})]})},k8=()=>{const{id:t}=nV(),[e,n]=C.useState(null),[r,s]=C.useState(!0),[i,o]=C.useState(null);return C.useEffect(()=>{if((async()=>{if(!t){o("レポートIDが指定されていません"),s(!1);return}try{const l=await f8(t);n(l)}catch(l){console.error("Failed to load report:",l),o("レポートの読み込みに失敗しました")}finally{s(!1)}})(),t){console.log("🔄 Setting up real-time news sync for report:",t);const l=mR(t,c=>{console.log("📡 Report news updated:",c.length,"items"),n(d=>{if(!d)return d;const h={...d},p=h.sections.find(y=>y.type==="ai-news");return p&&(console.log("🔄 Updating report news section with",c.length,"items"),p.data=c),h})});return()=>{console.log("🧹 Cleaning up real-time subscription"),l&&l()}}},[t]),r?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),f.jsx("p",{className:"text-secondary-600",children:"レポートを読み込み中..."})]})}):i||!e?f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:f.jsx("div",{className:"text-center py-16",children:f.jsxs("div",{className:"card p-12",children:[f.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"⚠️"}),f.jsx("h2",{className:"text-2xl font-semibold text-secondary-900 mb-4",children:"レポートが見つかりません"}),f.jsx("p",{className:"text-secondary-600 mb-8",children:i||"指定されたレポートは存在しないか、削除された可能性があります。"}),f.jsx(mt,{to:"/",className:"btn-primary",children:"ホームに戻る"})]})})}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx(Ee.nav,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:f.jsxs(mt,{to:"/",className:"inline-flex items-center text-secondary-600 hover:text-secondary-900 transition-colors duration-200",children:[f.jsx(Ml,{className:"h-4 w-4 mr-2"}),"ホームに戻る"]})}),f.jsx(Ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"card p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8",children:f.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 sm:gap-6",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-secondary-900 mb-3 sm:mb-4 font-display break-words",children:e.title}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-secondary-600",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Ri,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),f.jsx("span",{className:"font-medium text-sm sm:text-base",children:e.weekOf})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx($c,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),f.jsx("span",{className:"text-xs sm:text-sm",children:e.createdAt})]}),f.jsxs("div",{className:"text-xs sm:text-sm text-secondary-500",children:[e.sections.length," セクション"]})]})]}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsxs("button",{className:"btn-secondary text-xs sm:text-sm px-3 py-2",children:[f.jsx(hL,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"共有"]}),f.jsxs("button",{className:"btn-primary text-xs sm:text-sm px-3 py-2",children:[f.jsx(XO,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"エクスポート"]})]})]})}),f.jsx("div",{className:"space-y-8",children:f.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 sm:gap-4",children:e.sections.map(a=>f.jsx(Ee.div,{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-soft min-w-0",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:f.jsx(TR,{section:a,reportId:e.id})},a.id))})}),f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-16 text-center",children:f.jsx("div",{className:"inline-flex items-center gap-4",children:f.jsx(mt,{to:"/reports",className:"btn-secondary",children:"他のレポートを表示"})})})]})},P8=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(""),[o,a]=C.useState([]);return C.useEffect(()=>{(async()=>{try{const c=await xR();e(c),a(c)}catch(c){console.error("Failed to load reports:",c)}finally{r(!1)}})()},[]),C.useEffect(()=>{const l=t.filter(c=>c.title.toLowerCase().includes(s.toLowerCase())||c.weekOf.toLowerCase().includes(s.toLowerCase()));a(l)},[s,t]),n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),f.jsx("p",{className:"text-secondary-600",children:"レポートを読み込み中..."})]})}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsxs(Ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[f.jsx("h1",{className:"text-4xl font-bold text-secondary-900 mb-4 font-display",children:"過去のレポート"}),f.jsx("p",{className:"text-xl text-secondary-600 max-w-2xl mx-auto",children:"これまでに作成された週次レポートの一覧です"})]}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:f.jsx("div",{className:"card p-6",children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(bb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"}),f.jsx("input",{type:"text",placeholder:"レポートを検索...",value:s,onChange:l=>i(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"})]}),f.jsxs("button",{className:"btn-secondary",children:[f.jsx(Ab,{className:"h-4 w-4 mr-2"}),"フィルター"]})]})})}),o.length>0?f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((l,c)=>f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*c},className:"group",children:f.jsxs(mt,{to:`/report/${l.id}`,className:"block card p-6 h-full hover:shadow-strong transition-all duration-300 group-hover:-translate-y-1",children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsx("div",{className:"p-3 bg-primary-100 rounded-xl",children:f.jsx(Ps,{className:"h-6 w-6 text-primary-600"})}),f.jsxs("div",{className:"text-sm text-secondary-500",children:[l.sections.length," セクション"]})]}),f.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-3 group-hover:text-primary-600 transition-colors duration-200",children:l.title}),f.jsxs("div",{className:"space-y-2 mb-4",children:[f.jsxs("div",{className:"flex items-center text-secondary-600",children:[f.jsx(Ri,{className:"h-4 w-4 mr-2"}),f.jsx("span",{className:"text-sm font-medium",children:l.weekOf})]}),f.jsxs("div",{className:"flex items-center text-secondary-500",children:[f.jsx($c,{className:"h-4 w-4 mr-2"}),f.jsx("span",{className:"text-sm",children:l.createdAt})]})]}),f.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-secondary-100",children:[f.jsx("span",{className:"text-sm text-secondary-600",children:"詳細を表示"}),f.jsx(Ag,{className:"h-4 w-4 text-secondary-400 group-hover:text-primary-500 group-hover:translate-x-1 transition-all duration-200"})]})]})},l.id))}):f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:"text-center py-16",children:f.jsxs("div",{className:"card p-12",children:[f.jsx(Ps,{className:"h-16 w-16 text-secondary-400 mx-auto mb-6"}),f.jsx("h3",{className:"text-2xl font-semibold text-secondary-900 mb-4",children:t.length===0?"レポートが見つかりません":"検索結果がありません"}),f.jsx("p",{className:"text-secondary-600 mb-8",children:t.length===0?"まだ週次レポートが作成されていません。":"検索条件に一致するレポートが見つかりませんでした。"}),t.length===0&&f.jsx(mt,{to:"/",className:"btn-primary",children:"ホームに戻る"})]})}),f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"text-center mt-16",children:f.jsx(mt,{to:"/",className:"btn-secondary",children:"ホームに戻る"})})]})},R8="modulepreload",C8=function(t){return"/"+t},CE={},NE=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=C8(i),i in CE)return;CE[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":R8,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};class N8 extends Dc.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("❌ News Manager Error:",e,n)}render(){return this.state.hasError?f.jsxs("div",{className:"card p-8 text-center",children:[f.jsx(HO,{className:"h-16 w-16 text-red-500 mx-auto mb-6"}),f.jsx("h3",{className:"text-2xl font-semibold text-red-900 mb-4",children:"エラーが発生しました"}),f.jsx("p",{className:"text-red-600 mb-6",children:"ニュースデータの読み込み中に問題が発生しました。"}),f.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary bg-red-600 hover:bg-red-700",children:"ページを再読み込みする"})]}):this.props.children}}const D8=()=>{const[t,e]=C.useState("manage"),n=[{id:"manage",name:"ニュース管理",icon:zc},{id:"upload",name:"アップロード",icon:kb},{id:"settings",name:"設定",icon:dL}];return f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsxs(Ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[f.jsx("h1",{className:"text-4xl font-bold text-secondary-900 mb-4 font-display",children:"AIニュース管理"}),f.jsx("p",{className:"text-xl text-secondary-600 max-w-2xl mx-auto",children:"週次レポートに含めるニュースアイテムの管理とデータベースの更新"})]}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:f.jsx("div",{className:"card p-2",children:f.jsx("nav",{className:"flex space-x-1",children:n.map(r=>{const s=r.icon,i=t===r.id;return f.jsxs("button",{onClick:()=>e(r.id),className:`
                    relative flex items-center px-6 py-3 rounded-xl text-sm font-medium transition-all duration-200
                    ${i?"text-primary-600 bg-primary-50":"text-secondary-600 hover:text-secondary-900 hover:bg-secondary-50"}
                  `,children:[f.jsx(s,{className:"h-4 w-4 mr-2"}),r.name,i&&f.jsx(Ee.div,{layoutId:"activeNewsTab",className:"absolute inset-0 bg-primary-100 rounded-xl -z-10",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},r.id)})})})}),f.jsxs(Ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:[t==="manage"&&f.jsx(N8,{children:f.jsx(V8,{})}),t==="upload"&&f.jsx(j8,{}),t==="settings"&&f.jsx(M8,{})]},t)]})},V8=()=>{const[t,e]=C.useState([]),[n,r]=C.useState([]),[s,i]=C.useState(!0),[o,a]=C.useState(""),[l,c]=C.useState([]);C.useEffect(()=>{(async()=>{try{console.log("🔄 Loading news and reports data...");const[v,_]=await Promise.all([PE(),xR()]);console.log("✅ Data loaded successfully:",{newsCount:(v==null?void 0:v.length)||0,reportsCount:(_==null?void 0:_.length)||0});const k=Array.isArray(v)?v:[],D=Array.isArray(_)?_:[],O=k.sort((A,I)=>{const b=new Date(A.publishedAt||"1970-01-01");return new Date(I.publishedAt||"1970-01-01").getTime()-b.getTime()});e(O),r(D),c(O)}catch(v){console.error("❌ Failed to load data:",v),e([]),r([]),c([])}finally{i(!1)}})();let w=null;try{w=QB(v=>{if(console.log("📡 Real-time update received:",(v==null?void 0:v.length)||0,"news items"),Array.isArray(v)){const _=v.sort((k,D)=>{const O=new Date(k.publishedAt||"1970-01-01");return new Date(D.publishedAt||"1970-01-01").getTime()-O.getTime()});e(_)}else console.warn("⚠️ Invalid real-time update data:",v)})}catch(v){console.error("❌ Failed to set up real-time updates:",v)}return()=>{if(w)try{w()}catch(v){console.error("❌ Error during cleanup:",v)}}},[]),C.useEffect(()=>{try{const w=t.filter(v=>{const _=v.title||"",k=v.category||"",D=v.summary||"",O=o.toLowerCase();return _.toLowerCase().includes(O)||k.toLowerCase().includes(O)||D.toLowerCase().includes(O)}).sort((v,_)=>{const k=new Date(v.publishedAt||"1970-01-01");return new Date(_.publishedAt||"1970-01-01").getTime()-k.getTime()});c(w)}catch(T){console.error("Filtering error:",T),c(t)}},[o,t]);const d=async(T,w)=>{console.log("🔄 handleAssignNews called:",{newsId:T,reportId:w});try{const v=t.find(k=>k.id===T);console.log("📰 Current news before update:",v);const _=await p8(T,w);console.log("✅ News assignment updated:",_),_&&(e(k=>{const D=k.map(O=>O.id===T?_:O);return console.log("🔄 Updated newsList state"),D}),console.log("🎉 Assignment successful!",{newsTitle:_.title,assignedTo:w||"Unassigned"}))}catch(v){console.error("❌ Failed to update news assignment:",v),alert("ニュースの割り当て更新に失敗しました。再度お試しください。")}},h=async T=>{if(confirm("このニュースを削除しますか？"))try{console.log("🗑️ Attempting to delete news:",T);const w=await g8(T);console.log("✅ Delete result:",w),w?(e(v=>{const _=v.filter(k=>k.id!==T);return console.log("🔄 Local state updated, remaining items:",_.length),_}),alert("ニュースを削除しました！")):alert("ニュースの削除に失敗しました。")}catch(w){console.error("❌ Failed to delete news:",w),alert("削除中にエラーが発生しました: "+w)}},p=async()=>{try{console.log("🔥 === Firebase Debug Info ===");const T=await PE();console.log("📊 Total news items in Firebase:",T.length);const w=T.filter(_=>_.assignedReportId==="2025-06-30");console.log("📰 News assigned to 2025-06-30:",w.length),console.log("📋 Assigned news:",w.map(_=>({id:_.id,title:_.title})));const v=T.filter(_=>!_.assignedReportId);console.log("❓ Unassigned news:",v.length),console.log("📋 Unassigned news:",v.map(_=>({id:_.id,title:_.title}))),alert(`Firebase データ確認完了！

全ニュース: ${T.length}件
2025-06-30レポート: ${w.length}件
未割り当て: ${v.length}件

詳細はコンソールをご確認ください。`)}catch(T){console.error("Firebase debug failed:",T),alert("Firebase データ確認に失敗しました: "+T)}},y=()=>{if(confirm(`⚠️ WARNING: localStorage のニュースデータをクリアします。

これによりローカルキャッシュがリセットされ、Firebase データが正しく表示されるようになります。

実行しますか？`))try{localStorage.removeItem("weeklybrief_news_database"),console.log("🧹 localStorage cleared successfully"),alert(`✅ localStorage をクリアしました！

ページを再読み込みしてください。`),window.location.reload()}catch(T){console.error("Failed to clear localStorage:",T),alert("localStorage のクリアに失敗しました: "+T)}},x=async()=>{const T=[{title:"NVIDIA、AIエージェントの効率化に小規模言語モデル（SLM）の活用を提唱",summary:"NVIDIAは、大規模言語モデル（LLM）と小規模言語モデル（SLM）を組み合わせることで、AIエージェントのコスト削減と効率化が図れると発表。繰り返されるタスクを特定し、SLMで処理することで、運用の最適化が期待される。",url:"https://www.itmedia.co.jp/aiplus/articles/2508/14/news033.html",publishedAt:"2025-08-14",category:"AI",relevanceScore:90},{title:"Google、超小型AIモデル「Gemma 3 270M」を発表",summary:"Googleが2.7億パラメータという超小型のAIモデル「Gemma 3 270M」を発表。スマートフォンでも高速に動作し、高いエネルギー効率と指示追従能力を持つ。これにより、デバイス上でのAI活用がさらに進むと期待される。",url:"https://note.com/masa_wunder/n/n0bd9f2e8904d",publishedAt:"2025-08-16",category:"AI",relevanceScore:88},{title:"AIエージェント成功の鍵、「コンテキストエンジニアリング」が提唱される",summary:"AIエージェントが最適な結果を出すためには、プロンプトだけでなく、ツールや履歴、データなどの「コンテキスト」を動的に活用する「コンテキストエンジニアリング」が重要であると提唱された。これにより、より複雑なタスクの実行が可能になる。",url:"https://www.boxsquare.jp/blog/why-context-engineering-far-more-just-prompt-engineering-20",publishedAt:"2025-08-14",category:"AI",relevanceScore:85},{title:"PCやスマホを自動操作する「OSエージェント」に関する調査報告",summary:"浙江大学とOPPO AI Centerが、PCやスマートフォンを自律的に操作するAI「OSエージェント」に関する包括的な調査を発表。その技術的な構成要素や今後の可能性、そして安全性についての課題を提示しており、AIアシスタントの進化を示唆している。",url:"https://innovatopia.jp/ai/ai-news/62919/",publishedAt:"2025-08-13",category:"AI",relevanceScore:87},{title:"OpenAI、ChatGPTを中心としたエコシステム拡大のためAIブラウザ開発か",summary:"OpenAIがChatGPTを中心としたサービスを人々の生活に浸透させるため、独自のAIブラウザを開発している可能性が報じられた。Googleへの依存から脱却し、独自のプラットフォームを確立することで、AI市場でのさらなるシェア拡大を目指す。",url:"https://innova-jp.com/media/ai-weekly/61",publishedAt:"2025-08-01",category:"AI",relevanceScore:92},{title:"キリン、経営会議に「AI役員」を本格導入",summary:"キリンホールディングスが、過去10年分の議事録や社内データを学習した「AI役員 CoreMate」を経営戦略会議に導入。多様な視点から議論の論点を提示することで、意思決定の質とスピードの向上を目指す。",url:"https://www.watch.impress.co.jp/docs/news/2036523.html",publishedAt:"2025-08-04",category:"AI",relevanceScore:89},{title:"ChatGPTの週間アクティブユーザー数が7億人に到達",summary:"OpenAIは、ChatGPTの週間アクティブユーザー数が7億人に達したと発表。これは驚異的な数字であり、個人向けAIツールとしての圧倒的なシェアを維持していることを示している。次期モデルGPT-5の発表も控え、さらなる利用者増が期待される。",url:"https://innovatopia.jp/ai/ai-news/62164/",publishedAt:"2025-08-06",category:"AI",relevanceScore:94},{title:"Google、AI検索によるトラフィック減の報告に反論",summary:"Googleは、AI検索機能の導入後もWebサイトへのクリック数は安定しており、クリックの質はむしろ向上していると反論。AIで完結する質問が増える一方で、より深い情報へのニーズは高まっているとし、ウェブサイト運営者の懸念払拭に努めた。",url:"https://www.itmedia.co.jp/news/articles/2508/07/news071.html",publishedAt:"2025-08-07",category:"AI",relevanceScore:86},{title:"Appleのティム・クックCEO、「AIで勝つ必要がある」と表明",summary:"Appleのティム・クックCEOが、従業員向けの会議でAI分野での勝利への強い意欲を表明。過去に他社に先行された市場で成功してきた経験を挙げ、AI分野での巻き返しを誓った。Siriのアップデート遅延の理由も説明し、品質を重視する姿勢を強調した。",url:"https://hyper.ai/ja/headlines/f71dcc353509011551ac15347933692f",publishedAt:"2025-08-02",category:"AI",relevanceScore:91}];console.log("🚀 Starting to add August AI news to Firebase...");let w=0,v=0;for(const _ of T)try{console.log(`📰 Adding: ${_.title}`);const k=await m8(_);console.log(`✅ Added successfully: ${k.id}`),w++,await new Promise(D=>setTimeout(D,300))}catch(k){console.error(`❌ Failed to add news: ${_.title}`,k),v++}console.log(`🎉 Completed! Success: ${w}, Errors: ${v}`),alert(`2025年8月分のAIニュース追加が完了しました！
成功: ${w}件
エラー: ${v}件`)},E=async()=>{try{console.log("🔥 === Firebase Connection Test ===");const{db:T}=await NE(()=>Promise.resolve().then(()=>zB),void 0);console.log("✅ Firebase config loaded successfully"),console.log("📡 Firebase app:",T.app.name),console.log("📡 Project ID:",T.app.options.projectId),console.log("🏷️ USE_FIREBASE flag: true (hardcoded)");const{collection:w,getDocs:v}=await NE(()=>import("./index.esm-98dd3142.js"),[]);console.log("📚 Attempting to read from Firestore...");const _=w(T,"news"),k=await v(_);console.log("✅ Firestore read successful!"),console.log("📊 Documents count:",k.size),console.log("📋 Document IDs:",k.docs.map(D=>D.id)),alert(`🎉 Firebase接続成功！

プロジェクト: ${T.app.options.projectId}
USE_FIREBASE: true
ドキュメント数: ${k.size}

詳細はコンソールをご確認ください。`)}catch(T){console.error("❌ Firebase connection failed:",T),console.error("❌ Error details:",{name:T==null?void 0:T.name,message:T==null?void 0:T.message,code:T==null?void 0:T.code,stack:T==null?void 0:T.stack}),alert(`❌ Firebase接続エラー！

エラー: ${(T==null?void 0:T.message)||"Unknown error"}
コード: ${(T==null?void 0:T.code)||"N/A"}

詳細はコンソールをご確認ください。`)}};return s?f.jsx("div",{className:"flex items-center justify-center py-16",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"card p-6",children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(bb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"}),f.jsx("input",{type:"text",placeholder:"ニュースを検索...",value:o,onChange:T=>a(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"})]}),f.jsxs("button",{className:"btn-secondary",children:[f.jsx(Ab,{className:"h-4 w-4 mr-2"}),"フィルター"]}),f.jsx("button",{onClick:E,className:"btn-primary bg-blue-600 hover:bg-blue-700",children:"🔌 Firebase接続テスト"}),f.jsx("button",{onClick:p,className:"btn-primary bg-red-600 hover:bg-red-700",children:"🔍 Firebase確認"}),f.jsx("button",{onClick:y,className:"btn-secondary bg-orange-600 hover:bg-orange-700 text-white",children:"🧹 キャッシュクリア"}),f.jsxs("button",{onClick:x,className:"btn-primary bg-green-600 hover:bg-green-700",children:[f.jsx(Ps,{className:"h-4 w-4 mr-2"}),"2025年8月AIニュース追加"]}),f.jsx("button",{onClick:E,className:"btn-primary bg-red-600 hover:bg-red-700",children:"🔄 Firebase接続テスト"}),f.jsxs("button",{className:"btn-primary",children:[f.jsx(kx,{className:"h-4 w-4 mr-2"}),"新規追加"]})]})}),l.length>0?f.jsx("div",{className:"space-y-4",children:l.map((T,w)=>f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:w*.05},className:"card p-6",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1 pr-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("h4",{className:"font-semibold text-secondary-900 text-lg",children:T.title}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-primary-100 text-primary-700 rounded-full",children:T.category}),f.jsxs("span",{className:"text-xs text-secondary-500",children:[T.relevanceScore,"%"]})]})]}),f.jsx("p",{className:"text-secondary-700 mb-4 leading-relaxed",children:T.summary}),f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("span",{className:"text-sm text-secondary-500",children:T.publishedAt&&typeof T.publishedAt=="string"?new Date(T.publishedAt).toLocaleDateString("ja-JP"):"日付不明"}),T.url&&f.jsxs("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-700 font-medium",children:["リンクを開く",f.jsx(Ol,{className:"h-3 w-3 ml-1"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(eL,{className:"h-4 w-4 text-secondary-500"}),f.jsx("span",{className:"text-sm text-secondary-600",children:"レポート割り当て:"}),f.jsxs("select",{value:T.assignedReportId||"",onChange:v=>{console.log("🎯 Select onChange triggered:",{newsId:T.id,newsTitle:T.title,oldValue:T.assignedReportId,newValue:v.target.value}),d(T.id,v.target.value||void 0)},className:"text-sm border border-secondary-300 rounded-lg px-3 py-1 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"未割り当て"}),n.map(v=>f.jsx("option",{value:v.id,children:v.title},v.id))]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{className:"p-2 text-secondary-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors duration-200",children:f.jsx(aL,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>h(T.id),className:"p-2 text-secondary-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:f.jsx(mL,{className:"h-4 w-4"})})]})]})},T.id))}):f.jsxs("div",{className:"card p-8 text-center",children:[f.jsx(zc,{className:"h-16 w-16 text-secondary-400 mx-auto mb-6"}),f.jsx("h3",{className:"text-2xl font-semibold text-secondary-900 mb-4",children:o?"検索結果がありません":"ニュースデータベース"}),f.jsx("p",{className:"text-secondary-600 mb-8",children:o?"検索条件に一致するニュースが見つかりませんでした。":"ニュースアイテムがありません。新しいニュースを追加してください。"}),f.jsxs("button",{className:"btn-primary",children:[f.jsx(kx,{className:"h-4 w-4 mr-2"}),"新規追加"]})]})]})},j8=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"card p-8",children:f.jsxs("div",{className:"border-2 border-dashed border-secondary-300 rounded-xl p-12 text-center hover:border-primary-400 transition-colors duration-200",children:[f.jsx(kb,{className:"h-16 w-16 text-secondary-400 mx-auto mb-6"}),f.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-4",children:"CSVファイルをアップロード"}),f.jsx("p",{className:"text-secondary-600 mb-8",children:"ドラッグ&ドロップするか、クリックしてファイルを選択してください"}),f.jsx("button",{className:"btn-primary",children:"ファイルを選択"})]})}),f.jsxs("div",{className:"card p-6",children:[f.jsx("h4",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"CSVフォーマット要件"}),f.jsxs("div",{className:"space-y-2 text-sm text-secondary-600",children:[f.jsxs("p",{children:["• ",f.jsx("strong",{children:"title"}),": ニュースのタイトル"]}),f.jsxs("p",{children:["• ",f.jsx("strong",{children:"summary"}),": ニュースの要約"]}),f.jsxs("p",{children:["• ",f.jsx("strong",{children:"url"}),": ニュースのURL（オプション）"]}),f.jsxs("p",{children:["• ",f.jsx("strong",{children:"publishedAt"}),": 公開日（YYYY-MM-DD形式）"]}),f.jsxs("p",{children:["• ",f.jsx("strong",{children:"category"}),": カテゴリー"]}),f.jsxs("p",{children:["• ",f.jsx("strong",{children:"relevanceScore"}),": 関連度スコア（1-100）"]})]})]})]}),M8=()=>f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"card p-6",children:[f.jsx("h4",{className:"text-lg font-semibold text-secondary-900 mb-6",children:"ニュース設定"}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"デフォルトカテゴリー"}),f.jsxs("select",{className:"w-full px-3 py-2 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[f.jsx("option",{children:"技術"}),f.jsx("option",{children:"ビジネス"}),f.jsx("option",{children:"マーケット"}),f.jsx("option",{children:"AI・機械学習"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"最小関連度スコア"}),f.jsx("input",{type:"number",min:"1",max:"100",defaultValue:"50",className:"w-full px-3 py-2 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"週次レポートに含める最大ニュース数"}),f.jsx("input",{type:"number",min:"1",max:"20",defaultValue:"5",className:"w-full px-3 py-2 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),f.jsx("div",{className:"mt-8 pt-6 border-t border-secondary-200",children:f.jsx("button",{className:"btn-primary",children:"設定を保存"})})]})}),DE={username:"president",password:"WeeklyReport2025!"},gm="weeklybrief_auth_state",ER=C.createContext(void 0),O8=({children:t})=>{const[e,n]=C.useState({isAuthenticated:!1,user:null}),[r,s]=C.useState(!0);C.useEffect(()=>{(()=>{try{const d=sessionStorage.getItem(gm);if(d){const h=JSON.parse(d);n(h)}}catch(d){console.error("Failed to load auth state from sessionStorage:",d),n({isAuthenticated:!1,user:null})}finally{s(!1)}})()},[]);const i=c=>{try{sessionStorage.setItem(gm,JSON.stringify(c)),n(c)}catch(d){console.error("Failed to save auth state to sessionStorage:",d)}},o=async(c,d)=>c===DE.username&&d===DE.password?(i({isAuthenticated:!0,user:{id:c}}),console.log("✅ ログイン成功"),!0):(console.log("❌ ログイン失敗: 無効な認証情報"),!1),a=()=>{i({isAuthenticated:!1,user:null});try{sessionStorage.removeItem(gm)}catch(d){console.error("Failed to clear auth state from sessionStorage:",d)}console.log("✅ ログアウト完了")},l={isAuthenticated:e.isAuthenticated,user:e.user,login:o,logout:a,loading:r};return f.jsx(ER.Provider,{value:l,children:t})},pu=()=>{const t=C.useContext(ER);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},L8=()=>{const[t,e]=C.useState(!0),[n,r]=C.useState(null),s=C.useRef(null),{user:i}=pu(),[o,a]=C.useState({isLoading:!1,isUpdating:!1}),[l,c]=C.useState(null),[d,h]=C.useState(null),[p,y]=C.useState({isLoading:!1,isUpdating:!1}),[x,E]=C.useState(null);C.useEffect(()=>{document.title="リクルートエージェント総受日報 | Weekly Brief",T();const v=r8((k,D)=>{var O;c(D),h(k),console.log("📊 Real-time chart data updated:",k?"has data":"no data"),k&&((O=s.current)!=null&&O.contentWindow)&&(console.log("🔄 Real-time update detected, sending to iframe..."),console.log("🔄 Real-time: Sending integrated data structure to Chart.js"),console.log("  data keys:",Object.keys(k)),console.log("  has souke property:",!!(k!=null&&k.souke)),s.current.contentWindow.postMessage({type:"UPDATE_CHART_DATA",data:k},"*"))}),_=setTimeout(()=>e(!1),3e3);return()=>{v(),clearTimeout(_)}},[]);const T=async()=>{try{const{data:v,cacheInfo:_}=await n8();if(c(_),v&&_){console.log("✅ Graph cache data loaded:",_);const O={souke:{daily:v.daily||{},cumulative:v.cumulative||{},weekly:v.weekly||{},metadata:v.metadata||{lastUpdated:new Date().toISOString(),dataSource:"cache"}},metadata:v.metadata||{lastUpdated:new Date().toISOString(),dataSource:"cache"}};console.log("🔄 Cache: Converting flat to integrated structure"),console.log("  Original keys:",Object.keys(v)),console.log("  Integrated keys:",Object.keys(O)),console.log("  souke keys:",Object.keys(O.souke)),h(O)}const{data:k,cacheInfo:D}=await s8();k&&D&&(console.log("✅ Table cache data loaded:",D),E(k),console.log("📊 Table cache info updated:",D?"キャッシュあり":"キャッシュなし"))}catch(v){console.error("Failed to load cache data:",v)}},w=async()=>{var v;if(!i){r("認証が必要です"),y({isLoading:!1,isUpdating:!1,error:"認証が必要です"});return}a({isLoading:!1,isUpdating:!0,error:void 0}),y({isLoading:!1,isUpdating:!0,error:void 0});try{console.log("🚀 Starting simultaneous graph and table data update...");const _=`custom-auth-${i.id}`,[k,D]=await Promise.all([fetch("/.netlify/functions/update-souke-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`}}),fetch("/.netlify/functions/get-table-data",{method:"GET",headers:{"Content-Type":"application/json",Authorization:_}})]);console.log("🔍 Initial response check:",{graphStatus:k.status,tableStatus:D.status,graphOk:k.ok,tableOk:D.ok,graphContentType:k.headers.get("content-type"),tableContentType:D.headers.get("content-type")});let O,A;try{if(!k.ok)throw new Error(`Graph API failed with status ${k.status}`);O=await k.json(),console.log("✅ Graph JSON parse successful")}catch(b){const P=b instanceof Error?b.message:String(b);throw console.error("❌ Failed to parse graph response as JSON:",P),new Error(`グラフAPIレスポンス解析エラー (${k.status}): ${P}`)}try{if(!D.ok)throw new Error(`Table API failed with status ${D.status}`);A=await D.json(),console.log("✅ Table JSON parse successful")}catch(b){const P=b instanceof Error?b.message:String(b);throw console.error("❌ Failed to parse table response as JSON:",P),new Error(`テーブルAPIレスポンス解析エラー (${D.status}): ${P}`)}if(console.log("✅ Both updates completed:",{graphResult:O,tableResult:A}),O.success&&O.data){console.log("📊 Chart data received, saving to cache...");try{await e8(O.data,i.id),console.log("✅ Souke data cached in Firestore successfully")}catch(b){console.warn("⚠️ Graph cache save failed:",b)}}if(A.success&&A.data){E(A.data);try{await t8(A.data,i.id),console.log("✅ Table data cached in Firestore successfully")}catch(b){console.warn("⚠️ Table cache save failed:",b)}(v=s.current)!=null&&v.contentWindow&&(console.log("📤 Sending complete table data to iframe:",A.data),s.current.contentWindow.postMessage({type:"UPDATE_TABLE_DATA",data:A.data},"*"))}const I=new Date().toISOString();a({isLoading:!1,isUpdating:!1,lastUpdated:I}),y({isLoading:!1,isUpdating:!1,lastUpdated:I}),console.log("🎉 All data update completed successfully!")}catch(_){console.error("❌ Data update failed:",_);const k=_ instanceof Error?_.message:"データ更新エラー";a({isLoading:!1,isUpdating:!1,error:k}),y({isLoading:!1,isUpdating:!1,error:k}),r(k)}};return t?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-6"}),f.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[f.jsx(kg,{className:"w-5 h-5"}),f.jsx("span",{className:"font-medium",children:"セキュアレポートを読み込み中..."})]})]})}):n?f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[f.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(mt,{to:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors duration-200",children:[f.jsx(Ml,{className:"h-4 w-4 mr-2"}),"ホームに戻る"]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[f.jsx(yi,{className:"w-4 h-4"}),f.jsx("span",{className:"font-medium",children:"アクセスエラー"})]})]})})}),f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 to-pink-100 dark:from-gray-900 dark:to-gray-800",children:f.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[f.jsx(yi,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"レポート読み込みエラー"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n}),f.jsxs(mt,{to:"/",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[f.jsx(Ml,{className:"h-4 w-4 mr-2"}),"ホームに戻る"]})]})})]}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[f.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(mt,{to:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors duration-200 text-sm sm:text-base",children:[f.jsx(Ml,{className:"h-4 w-4 mr-1 sm:mr-2"}),f.jsx("span",{className:"hidden xs:inline",children:"ホームに戻る"}),f.jsx("span",{className:"xs:hidden",children:"戻る"})]}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l&&f.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx($c,{className:"w-3 h-3"}),f.jsxs("span",{className:"hidden sm:inline",children:[l.ageMinutes<1?"Just now":`${l.ageMinutes}分前`,l.updatedBy&&` (${l.updatedBy}が更新)`]}),l.isExpired&&f.jsx("span",{className:"text-orange-500 font-medium",children:"(期限切れ)"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:w,disabled:o.isUpdating||p.isUpdating,className:`
                    inline-flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium
                    transition-all duration-200 border
                    ${o.isUpdating||p.isUpdating?"bg-purple-50 border-purple-200 text-purple-600 cursor-not-allowed dark:bg-purple-900/20 dark:border-purple-700 dark:text-purple-400":l!=null&&l.isExpired?"bg-orange-50 hover:bg-orange-100 border-orange-200 hover:border-orange-300 text-orange-700 hover:text-orange-800 dark:bg-orange-900/20 dark:hover:bg-orange-900/30 dark:border-orange-700 dark:hover:border-orange-600 dark:text-orange-400":"bg-purple-50 hover:bg-purple-100 border-purple-200 hover:border-purple-300 text-purple-700 hover:text-purple-800 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 dark:border-purple-700 dark:hover:border-purple-600 dark:text-purple-400"}
                  `,children:[o.isUpdating||p.isUpdating?f.jsx(bg,{className:"w-4 h-4 animate-spin"}):f.jsx(bg,{className:"w-4 h-4"}),f.jsx("span",{children:o.isUpdating||p.isUpdating?"データ更新中...":"データ更新"})]}),f.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-green-600 dark:text-green-400",children:[f.jsx(kg,{className:"w-3 h-3 sm:w-4 sm:h-4"}),f.jsx("span",{className:"font-medium hidden xs:inline",children:"認証済みアクセス"}),f.jsx("span",{className:"font-medium xs:hidden",children:"認証済み"})]})]})]})]}),o.error&&f.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[f.jsx(yi,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"グラフ:"})," ",o.error]})]})}),p.error&&f.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[f.jsx(yi,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"テーブル:"})," ",p.error]})]})}),o.lastUpdated&&!o.error&&f.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[f.jsx(zc,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"グラフ:"})," データが正常に更新されました"]})]})}),p.lastUpdated&&!p.error&&f.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[f.jsx(Sb,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"テーブル:"})," KPIデータが正常に更新されました"]})]})})]})}),f.jsx("div",{className:"w-full",style:{height:"calc(100vh - 65px)"},children:f.jsx("iframe",{ref:s,src:"/protected-reports/souke_chart_report.html",className:"w-full h-full border-0",title:"リクルートエージェント総受日報",allowFullScreen:!0,onLoad:()=>{var _;console.log("✅ Iframe loaded successfully - initializing cache data..."),console.log("🔗 Iframe ref status:",s.current?"exists":"null"),console.log("🔗 Iframe contentWindow:",(_=s.current)!=null&&_.contentWindow?"accessible":"not accessible"),e(!1),setTimeout(async()=>{var k,D,O,A,I,b,P,N;try{console.log("🔄 Starting iframe cache initialization..."),console.log("📊 Current chart data state:",d?"exists":"null"),console.log("📊 Current table data state:",x?"exists":"null"),d&&((k=s.current)!=null&&k.contentWindow)?(console.log("📊 Sending cached graph data to iframe..."),console.log("🔄 Sending integrated data structure to Chart.js (like ZentaiMonitoring)"),console.log("  chartData typeof:",typeof d),console.log("  chartData is null:",d===null),console.log("  chartData is undefined:",d===void 0),console.log("  chartData keys:",Object.keys(d||{})),console.log("  has souke property:",!!(d!=null&&d.souke)),console.log("  souke.daily.2025 length:",((A=(O=(D=d==null?void 0:d.souke)==null?void 0:D.daily)==null?void 0:O["2025"])==null?void 0:A.length)||0),console.log("  souke.weekly.2025 length:",((P=(b=(I=d==null?void 0:d.souke)==null?void 0:I.weekly)==null?void 0:b["2025"])==null?void 0:P.length)||0),console.log("📊 Full chartData JSON:",JSON.stringify(d,null,2)),s.current.contentWindow.postMessage({type:"UPDATE_CHART_DATA",data:d},"*"),console.log("📤 PostMessage sent with type:","UPDATE_CHART_DATA"),console.log("✅ Cached graph data sent successfully")):console.warn("⚠️ No cached graph data available"),x&&((N=s.current)!=null&&N.contentWindow)?(console.log("📊 Sending cached table data to iframe..."),s.current.contentWindow.postMessage({type:"UPDATE_TABLE_DATA",data:x},"*"),console.log("✅ Cached table data sent successfully")):console.warn("⚠️ No cached table data available")}catch(V){console.warn("⚠️ Failed to initialize iframe with cache:",V)}},200)},onError:v=>{console.error("❌ Iframe loading failed:",v),r("レポートの読み込みに失敗しました"),e(!1)}})})]})},F8=()=>{const[t,e]=C.useState(!0),[n,r]=C.useState(null),s=C.useRef(null),{user:i}=pu(),[o,a]=C.useState({isLoading:!1,isUpdating:!1}),[l,c]=C.useState(null),[d,h]=C.useState(null);C.useEffect(()=>{document.title="リクルートエージェント全体モニタリング | Weekly Brief",p();const x=l8((T,w)=>{var v;T&&w&&(c(w),h(T),console.log("📊 Real-time zentai chart data updated:",!!T),(v=s.current)!=null&&v.contentWindow&&(console.log("🔄 Real-time zentai update detected, sending data to iframe..."),s.current.contentWindow.postMessage({type:"UPDATE_CHART_DATA",data:T},"*")))}),E=setTimeout(()=>e(!1),3e3);return()=>{x(),clearTimeout(E)}},[]);const p=async()=>{try{console.log("🔄 Loading zentai cache data...");const{data:x,cacheInfo:E}=await a8();console.log("💾 Zentai cache data loaded:",{hasData:!!x,cacheInfo:E}),x&&E?(c(E),h(x),console.log("✅ Zentai data loaded from cache")):(h(null),c(null),console.warn("⚠️ No zentai cache data available"))}catch(x){console.error("❌ Failed to load zentai cache data:",x),r("Zentaiキャッシュデータの読み込みに失敗しました")}},y=async()=>{var x;if(!(!(i!=null&&i.id)||o.isUpdating)){a(E=>({...E,isUpdating:!0,error:void 0}));try{console.log("🚀 Fetching fresh zentai chart data from BigQuery...");const E=`custom-auth-${i.id}`,T=await fetch("/.netlify/functions/update-souke-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({userId:i.id,forceUpdate:!0})}),w=await T.json();if(!T.ok)throw new Error(w.error||`HTTP ${T.status}: ${T.statusText}`);if(w.success&&w.data){console.log("✅ Zentai chart data update successful:",w);const v=w.data,_={updatedAt:w.lastUpdated||new Date().toISOString(),updatedBy:i.id,ageMinutes:0,isExpired:!1};await o8(v,i.id),h(v),c(_),(x=s.current)!=null&&x.contentWindow&&(console.log("🔄 Sending updated zentai chart data to iframe..."),s.current.contentWindow.postMessage({type:"UPDATE_CHART_DATA",data:v},"*"),console.log("✅ Zentai chart data sent to iframe successfully")),a(k=>({...k,isUpdating:!1,lastUpdated:_.updatedAt}))}else throw new Error(w.error||"データの更新に失敗しました")}catch(E){console.error("❌ Chart data update failed:",E);const T=E instanceof Error?E.message:"データの更新に失敗しました";a(w=>({...w,isUpdating:!1,error:T})),r(T)}}};return n&&!o.isUpdating?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-4",children:f.jsx("div",{className:"max-w-2xl mx-auto pt-20",children:f.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(yi,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),f.jsx("h2",{className:"text-lg font-semibold text-red-800 dark:text-red-200",children:"エラーが発生しました"})]}),f.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:n}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>{r(null),p()},className:"btn-primary",children:"再読み込み"}),f.jsx(mt,{to:"/",className:"btn-secondary",children:"ホームに戻る"})]})]})})}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:[f.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200/50 dark:border-gray-700/50 sticky top-0 z-10",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center justify-between h-16",children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsxs(mt,{to:"/souke-report",className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:[f.jsx(Ml,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:"集客モニタリングに戻る"})]})}),f.jsx("div",{className:"flex items-center gap-4",children:l&&f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx($c,{className:"w-4 h-4"}),f.jsxs("span",{children:["最終更新: ",new Date(l.updatedAt).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})})]})})}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-lg p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-soft",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(kg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"全体モニタリング"}),i&&f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ユーザー: ",i.id]})]}),f.jsx("div",{className:"flex items-center gap-3",children:f.jsx("button",{onClick:y,disabled:o.isUpdating||t,className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${o.isUpdating||t?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600 text-white shadow-sm hover:shadow-md"}`,children:o.isUpdating?f.jsxs(f.Fragment,{children:[f.jsx(bg,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{children:"グラフ更新中..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Sb,{className:"w-4 h-4"}),f.jsx("span",{children:"グラフ更新"})]})})})]}),o.error&&f.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[f.jsx(yi,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"グラフ更新エラー:"})," ",o.error]})]})}),o.lastUpdated&&!o.error&&f.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:f.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[f.jsx(zc,{className:"w-4 h-4"}),f.jsxs("span",{children:[f.jsx("strong",{children:"グラフ:"})," データが正常に更新されました"]})]})})]})}),f.jsx("div",{className:"w-full",style:{height:"calc(100vh - 145px)"},children:f.jsx("iframe",{ref:s,src:"/protected-reports/zentai_monitoring_report.html",className:"w-full h-full border-0",title:"リクルートエージェント全体モニタリング",allowFullScreen:!0,onLoad:()=>{console.log("🔄 Iframe loaded, initializing with cache data..."),e(!1),setTimeout(async()=>{var E;try{console.log("🔄 Initializing iframe with cache data..."),d&&((E=s.current)!=null&&E.contentWindow)?(console.log("📊 Sending cached chart data to iframe..."),s.current.contentWindow.postMessage({type:"UPDATE_CHART_DATA",data:d},"*"),console.log("✅ Cached chart data sent successfully")):console.warn("⚠️ No cached chart data available")}catch(T){console.warn("⚠️ Failed to initialize iframe with cache:",T)}},200)},onError:x=>{console.error("❌ Iframe loading failed:",x),r("レポートの読み込みに失敗しました"),e(!1)}})})]})},U8=()=>{const{login:t,isAuthenticated:e,loading:n}=pu(),[r,s]=C.useState({username:"",password:""}),[i,o]=C.useState(!1),[a,l]=C.useState(""),[c,d]=C.useState(!1);if(e)return f.jsx(nA,{to:"/",replace:!0});if(n)return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-secondary-100",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const h=y=>{const{name:x,value:E}=y.target;s(T=>({...T,[x]:E})),a&&l("")},p=async y=>{if(y.preventDefault(),!r.username||!r.password){l("ユーザーIDとパスワードを入力してください");return}d(!0),l("");try{await t(r.username,r.password)||l("ユーザーIDまたはパスワードが正しくありません")}catch(x){console.error("Login error:",x),l("ログインに失敗しました。もう一度お試しください")}finally{d(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 p-4",children:f.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx(Ee.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full mb-4",children:f.jsx(bx,{className:"h-8 w-8 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2 font-display",children:"週次レポート管理"}),f.jsx("p",{className:"text-secondary-600",children:"アクセスにはログインが必要です"})]}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"card p-8",children:f.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-secondary-700 mb-2",children:"ユーザーID"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Pb,{className:"h-5 w-5 text-secondary-400"})}),f.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:h,className:"w-full pl-10 pr-4 py-3 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200",placeholder:"ユーザーIDを入力",disabled:c})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700 mb-2",children:"パスワード"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(bx,{className:"h-5 w-5 text-secondary-400"})}),f.jsx("input",{type:i?"text":"password",id:"password",name:"password",value:r.password,onChange:h,className:"w-full pl-10 pr-12 py-3 border border-secondary-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200",placeholder:"パスワードを入力",disabled:c}),f.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:c,children:i?f.jsx(JO,{className:"h-5 w-5 text-secondary-400 hover:text-secondary-600"}):f.jsx(YO,{className:"h-5 w-5 text-secondary-400 hover:text-secondary-600"})})]})]}),a&&f.jsx(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:f.jsx("p",{className:"text-sm text-red-700",children:a})}),f.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"ログイン中..."]}):f.jsxs(f.Fragment,{children:[f.jsx(nL,{className:"h-4 w-4 mr-2"}),"ログイン"]})})]})}),f.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"text-center mt-8",children:f.jsx("p",{className:"text-xs text-secondary-500",children:"© 2025 週次レポート管理システム"})})]})})},IR=C.createContext(void 0),B8=()=>{const t=C.useContext(IR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},$8=({children:t})=>{const[e,n]=C.useState("system"),[r,s]=C.useState("light"),i=()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=c=>c==="system"?i():c;C.useEffect(()=>{const c=localStorage.getItem("theme");c&&["light","dark","system"].includes(c)&&n(c)},[]),C.useEffect(()=>{const c=o(e);s(c),c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),C.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{if(e==="system"){const h=o("system");s(h),h==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[e]);const l={theme:e,resolvedTheme:r,setTheme:c=>{n(c),localStorage.setItem("theme",c)}};return f.jsx(IR.Provider,{value:l,children:t})},z8=()=>{const{theme:t,resolvedTheme:e,setTheme:n}=B8(),r=()=>{n(t==="light"?"dark":t==="dark"?"system":"light")},s=()=>t==="system"?f.jsx(sL,{className:"h-4 w-4"}):e==="dark"?f.jsx(iL,{className:"h-4 w-4"}):f.jsx(fL,{className:"h-4 w-4"}),i=()=>{switch(t){case"light":return"ライトモード";case"dark":return"ダークモード";case"system":return"システム設定";default:return""}};return f.jsxs("div",{className:"relative group",children:[f.jsxs("button",{onClick:r,className:`
          relative flex items-center justify-center
          w-10 h-10 rounded-full
          transition-all duration-300 ease-in-out
          hover:scale-110 active:scale-95
          ${e==="dark"?"bg-secondary-800 hover:bg-secondary-700 text-secondary-200":"bg-secondary-100 hover:bg-secondary-200 text-secondary-700"}
          border-2 border-transparent hover:border-primary-500/20
          shadow-soft hover:shadow-medium
        `,"aria-label":i(),children:[f.jsx("div",{className:"transform transition-transform duration-300 ease-in-out",children:s()}),f.jsx("div",{className:`
          absolute inset-0 rounded-full opacity-0 transition-opacity duration-300
          ${e==="dark"?"bg-gradient-to-r from-blue-500/10 to-purple-500/10":"bg-gradient-to-r from-yellow-400/10 to-orange-400/10"}
          group-hover:opacity-100
        `})]}),f.jsxs("div",{className:`
        absolute -bottom-10 left-1/2 transform -translate-x-1/2
        px-2 py-1 text-xs font-medium rounded-md
        opacity-0 group-hover:opacity-100
        transition-all duration-200 ease-in-out
        pointer-events-none
        ${e==="dark"?"bg-secondary-800 text-secondary-200 border border-secondary-700":"bg-secondary-900 text-white"}
        shadow-medium
      `,children:[i(),f.jsx("div",{className:`
          absolute -top-1 left-1/2 transform -translate-x-1/2
          w-2 h-2 rotate-45
          ${e==="dark"?"bg-secondary-800":"bg-secondary-900"}
        `})]}),t!=="system"&&f.jsx("div",{className:`
          absolute -top-1 -right-1 w-3 h-3 rounded-full
          ${t==="dark"?"bg-blue-500":"bg-yellow-500"}
          animate-pulse
        `})]})},q8=({children:t})=>{const e=Gi(),{user:n,logout:r}=pu(),s=()=>{confirm("ログアウトしますか？")&&r()},i=[{name:"ホーム",href:"/",icon:ZO},{name:"過去のレポート",href:"/reports",icon:Ps},{name:"ニュース管理",href:"/news-manager",icon:zc}];return f.jsxs("div",{className:"min-h-screen",children:[f.jsx("header",{className:"bg-white/80 dark:bg-secondary-900/80 backdrop-blur-xl border-b border-secondary-200/50 dark:border-secondary-700/50 sticky top-0 z-50 transition-colors duration-300",children:f.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[f.jsxs(mt,{to:"/",className:"flex items-center space-x-2 sm:space-x-3 group min-w-0",children:[f.jsx("div",{className:"p-1.5 sm:p-2 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl shadow-medium group-hover:shadow-strong transition-all duration-200 flex-shrink-0",children:f.jsx(cr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h1",{className:"text-sm sm:text-xl font-bold text-secondary-900 dark:text-secondary-100 font-display transition-colors duration-300 truncate",children:"President Office Weekly Brief"}),f.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400 -mt-0.5 transition-colors duration-300 hidden sm:block",children:"週次役員向けブリーフィング"})]})]}),f.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4",children:[f.jsx("nav",{className:"flex space-x-0.5 sm:space-x-1",children:i.map(o=>{const a=e.pathname===o.href,l=o.icon;return f.jsxs(mt,{to:o.href,className:`
                        relative px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all duration-200
                        ${a?"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/30":"text-secondary-600 dark:text-secondary-300 hover:text-secondary-900 dark:hover:text-secondary-100 hover:bg-secondary-50 dark:hover:bg-secondary-800/50"}
                      `,children:[f.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[f.jsx(l,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),f.jsx("span",{className:"hidden lg:inline",children:o.name})]}),a&&f.jsx(Ee.div,{layoutId:"activeTab",className:"absolute inset-0 bg-primary-100 dark:bg-primary-900/30 rounded-lg sm:rounded-xl -z-10 transition-colors duration-300",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},o.name)})}),f.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3",children:[f.jsxs("div",{className:"hidden md:flex items-center space-x-2 px-3 py-1.5 bg-secondary-50 dark:bg-secondary-800/50 rounded-lg",children:[f.jsx(Pb,{className:"h-4 w-4 text-secondary-500 dark:text-secondary-400"}),f.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:(n==null?void 0:n.id)||"Guest"})]}),f.jsx(z8,{}),f.jsxs("button",{onClick:s,className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium text-secondary-600 dark:text-secondary-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200",title:"ログアウト",children:[f.jsx(rL,{className:"h-3 w-3 sm:h-4 sm:w-4"}),f.jsx("span",{className:"hidden sm:inline",children:"ログアウト"})]})]})]})]})})}),f.jsx("main",{className:"flex-1",children:t}),f.jsx("footer",{className:"bg-white/50 dark:bg-secondary-900/50 backdrop-blur-sm border-t border-secondary-200/30 dark:border-secondary-700/30 mt-20 transition-colors duration-300",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsx("div",{className:"text-center text-secondary-500 dark:text-secondary-400 text-sm transition-colors duration-300",children:f.jsx("p",{children:"© 2025 President Office Weekly Brief. All rights reserved."})})})})]})},W8=({children:t})=>{const{isAuthenticated:e,loading:n}=pu(),r=Gi();return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50/30",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),f.jsx("p",{className:"text-secondary-600",children:"認証情報を確認中..."})]})}):e?f.jsx(f.Fragment,{children:t}):f.jsx(nA,{to:"/login",state:{from:r},replace:!0})};function G8(){return f.jsx(IV,{children:f.jsx(O8,{children:f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 via-white to-primary-50/30 dark:from-secondary-900 dark:via-secondary-800 dark:to-secondary-900 transition-colors duration-300",children:f.jsxs(v1,{children:[f.jsx(ar,{path:"/login",element:f.jsx(U8,{})}),f.jsx(ar,{path:"/*",element:f.jsx(W8,{children:f.jsx(q8,{children:f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"animate-fade-in",children:f.jsxs(v1,{children:[f.jsx(ar,{path:"/",element:f.jsx(b8,{})}),f.jsx(ar,{path:"/report/:id",element:f.jsx(k8,{})}),f.jsx(ar,{path:"/reports",element:f.jsx(P8,{})}),f.jsx(ar,{path:"/news-manager",element:f.jsx(D8,{})}),f.jsx(ar,{path:"/souke-report",element:f.jsx(L8,{})}),f.jsx(ar,{path:"/zentai-monitoring",element:f.jsx(F8,{})})]})})})})})]})})})})}ym.createRoot(document.getElementById("root")).render(f.jsx(Dc.StrictMode,{children:f.jsx($8,{children:f.jsx(G8,{})})}));export{ru as $,DP as A,cn as B,er as C,Ie as D,Z7 as E,Yi as F,tr as G,Y7 as H,Y8 as I,Wt as J,oF as K,m9 as L,R7 as M,x7 as N,T7 as O,U9 as P,yt as Q,h7 as R,as as S,ce as T,z7 as U,Ln as V,O9 as W,$7 as X,w7 as Y,i7 as Z,M0 as _,kc as a,kP as a$,Z8 as a0,p9 as a1,I9 as a2,J7 as a3,b9 as a4,U7 as a5,l7 as a6,X7 as a7,Ft as a8,u7 as a9,j7 as aA,y9 as aB,$i as aC,C7 as aD,N7 as aE,d7 as aF,PP as aG,O7 as aH,L7 as aI,j9 as aJ,Ff as aK,yP as aL,I7 as aM,e7 as aN,F7 as aO,B7 as aP,lu as aQ,H7 as aR,K8 as aS,S7 as aT,g7 as aU,m7 as aV,_7 as aW,c7 as aX,A9 as aY,W7 as aZ,o7 as a_,E7 as aa,r7 as ab,s7 as ac,a7 as ad,Q7 as ae,v7 as af,y7 as ag,Ge as ah,cu as ai,k9 as aj,D7 as ak,au as al,A7 as am,b7 as an,jP as ao,k7 as ap,P7 as aq,g9 as ar,K7 as as,q7 as at,n7 as au,f7 as av,p7 as aw,aE as ax,V7 as ay,M7 as az,v9 as b,G7 as b0,hn as c,Zi as d,Ae as e,U as f,La as g,iu as h,Cd as i,$f as j,ou as k,Uf as l,Lv as m,fn as n,Bf as o,F9 as p,Xe as q,Ni as r,q as s,X8 as t,t7 as u,J5 as v,Fe as w,e$ as x,ue as y,Q8 as z};
